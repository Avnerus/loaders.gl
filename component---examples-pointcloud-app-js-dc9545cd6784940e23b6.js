(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{196:function(e,t,n){"use strict";n.r(t);n(250),n(7);var r=n(16),a=n.n(r),i=n(2),s=n.n(i),o=n(0),c=n.n(o),u=n(44),l=n(343),h=n(239),p=n(344),d=(n(30),n(80),n(274));n(205),n(216),n(225);function m(e){var t={};return t.POSITION={value:new Float32Array(e.vertices),size:3},e.normals.length>0&&(t.NORMAL={value:new Float32Array(e.normals),size:3}),e.uvs.length>0&&(t.TEXCOORD_0={value:new Float32Array(e.uvs),size:2}),e.colors.length>0&&(t.COLOR_0={value:new Uint8Array(e.colors),size:3}),t}function v(e,t){var n,r;if(void 0===t&&(t={}),e instanceof ArrayBuffer){var a=(new d.TextDecoder).decode(e);r="ascii"===(n=f(a,t)).format?b(a,n):function(e,t){for(var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="binary_little_endian"===t.format,i=new DataView(e,t.headerLength),s=0,o=0;o<t.elements.length;o++)for(var c=t.elements[o].count,u=0;u<c;u++){n=C(i,s,t.elements[o].properties,a),s+=n[1];var l=n[0];S(r,t.elements[o].name,l)}return r}(e,n)}else r=b(e,n=f(e,t));return function(e,t,n){var r={loaderData:{header:e},header:{vertexCount:t.indices.length||t.vertices.length/3},mode:t.indices&&t.indices.length>0?4:0,attributes:m(t)};return t.indices&&t.indices.length>0&&(r.indices={value:new Uint32Array(t.indices),size:1}),r}(n,r)}function f(e,t){var n="",r=0,a=/ply([\s\S]*)end_header\s/.exec(e);null!==a&&(n=a[1],r=a[0].length);for(var i,s,o,c={comments:[],elements:[],headerLength:r},u=n.split("\n"),l=0;l<u.length;l++){var h=u[l];if(""!==(h=h.trim()))switch(s=(o=h.split(/\s+/)).shift(),h=o.join(" "),s){case"format":c.format=o[0],c.version=o[1];break;case"comment":c.comments.push(h);break;case"element":void 0!==i&&c.elements.push(i),(i={}).name=o[0],i.count=parseInt(o[1],10),i.properties=[];break;case"property":i.properties.push(g(o,t.propertyNameMapping));break;default:console.log("unhandled",s,o)}}return void 0!==i&&c.elements.push(i),c}function g(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],t&&n.name in t&&(n.name=t[n.name]),n}function w(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e,10);case"float":case"double":case"float32":case"float64":return parseFloat(e);default:throw new Error(t)}}function y(e,t){for(var n=t.split(/\s+/),r={},a=0;a<e.length;a++)if("list"===e[a].type){for(var i=[],s=w(n.shift(),e[a].countType),o=0;o<s;o++)i.push(w(n.shift(),e[a].itemType));r[e[a].name]=i}else r[e[a].name]=w(n.shift(),e[a].type);return r}function b(e,t){var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="";null!==(n=/end_header\s([\s\S]*)$/.exec(e))&&(a=n[1]);for(var i=a.split("\n"),s=0,o=0,c=0;c<i.length;c++){var u=i[c];if(""!==(u=u.trim())){o>=t.elements[s].count&&(s++,o=0);var l=y(t.elements[s].properties,u);S(r,t.elements[s].name,l),o++}}return r}function S(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var r=n.vertex_indices||n.vertex_index;3===r.length?e.indices.push(r[0],r[1],r[2]):4===r.length&&(e.indices.push(r[0],r[1],r[3]),e.indices.push(r[1],r[2],r[3]))}}function _(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8];default:throw new Error(n)}}function C(e,t,n,r){for(var a,i={},s=0,o=0;o<n.length;o++)if("list"===n[o].type){var c=[],u=(a=_(e,t+s,n[o].countType,r))[0];s+=a[1];for(var l=0;l<u;l++)a=_(e,t+s,n[o].itemType,r),c.push(a[0]),s+=a[1];i[n[o].name]=c}else a=_(e,t+s,n[o].type,r),i[n[o].name]=a[0],s+=a[1];return[i,s]}var O={name:"PLY",extensions:["ply"],parseTextSync:v,parseSync:v,text:!0,binary:!0,DEFAULT_OPTIONS:{}},x=n(272),T=n(342);n.d(t,"default",function(){return A}),n.d(t,"renderToDOM",function(){return D}),Object(x.b)(O);var I="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/point-cloud-ply/lucy800k.ply",L={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},z=new h.d(["rotationOrbit"]),A=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={viewState:L,pointsCount:0,points:null},n._onLoad=n._onLoad.bind(a()(n)),n._onViewStateChange=n._onViewStateChange.bind(a()(n)),n._rotateCamera=n._rotateCamera.bind(a()(n)),Object(T.a)(I).then(n._onLoad),n}s()(t,e);var n=t.prototype;return n._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},n._rotateCamera=function(){var e=this.state.viewState;this.setState({viewState:Object.assign({},e,{rotationOrbit:e.rotationOrbit+30,transitionDuration:600,transitionInterpolator:z,onTransitionEnd:this._rotateCamera})})},n._onLoad=function(e){var t=e.header,n=e.loaderData,r=e.attributes,a=(e.progress,n.header),i=a.mins,s=a.maxs,o=this.state.viewState;i&&s&&(o=Object.assign({},o,{target:[(i[0]+s[0])/2,(i[1]+s[1])/2,(i[2]+s[2])/2],zoom:Math.log2(window.innerWidth/(s[0]-i[0]))-1})),this.props.onLoad&&this.props.onLoad({count:t.vertexCount,progress:1}),this.setState({pointsCount:t.vertexCount,points:r.POSITION.value,viewState:o},this._rotateCamera)},n._renderLayers=function(){var e=this.state,t=e.pointsCount,n=e.points;return[n&&new p.a({id:"laz-point-cloud-layer",coordinateSystem:h.a.IDENTITY,numInstances:t,instancePositions:n,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]},n.render=function(){var e=this.state.viewState;return c.a.createElement(l.a,{views:new h.e,viewState:e,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}})},t}(o.PureComponent);function D(e){Object(u.render)(c.a.createElement(A,null),e)}}}]);
//# sourceMappingURL=component---examples-pointcloud-app-js-dc9545cd6784940e23b6.js.map