(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{196:function(e,t,n){"use strict";n.r(t);n(262),n(7);var r=n(16),a=n.n(r),i=n(2),o=n.n(i),s=n(0),u=n.n(s),c=n(44),f=n(374),l=n(247),p=n(376),d=(n(31),n(80),n(226));n(204),n(219),n(228);function v(e){var t={};return t.POSITION={value:new Float32Array(e.vertices),size:3},e.normals.length>0&&(t.NORMAL={value:new Float32Array(e.normals),size:3}),e.uvs.length>0&&(t.TEXCOORD_0={value:new Float32Array(e.uvs),size:2}),e.colors.length>0&&(t.COLOR_0={value:new Uint8Array(e.colors),size:3}),t}function y(e,t){var n,r;if(void 0===t&&(t={}),e instanceof ArrayBuffer){var a=(new d.TextDecoder).decode(e);r="ascii"===(n=h(a,t)).format?x(a,n):function(e,t){for(var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="binary_little_endian"===t.format,i=new DataView(e,t.headerLength),o=0,s=0;s<t.elements.length;s++)for(var u=t.elements[s].count,c=0;c<u;c++){n=O(i,o,t.elements[s].properties,a),o+=n[1];var f=n[0];g(r,t.elements[s].name,f)}return r}(e,n)}else r=x(e,n=h(e,t));return function(e,t,n){var r={loaderData:{header:e},header:{vertexCount:t.indices.length||t.vertices.length/3},mode:t.indices&&t.indices.length>0?4:0,attributes:v(t)};return t.indices&&t.indices.length>0&&(r.indices={value:new Uint32Array(t.indices),size:1}),r}(n,r)}function h(e,t){var n="",r=0,a=/ply([\s\S]*)end_header\s/.exec(e);null!==a&&(n=a[1],r=a[0].length);for(var i,o,s,u={comments:[],elements:[],headerLength:r},c=n.split("\n"),f=0;f<c.length;f++){var l=c[f];if(""!==(l=l.trim()))switch(o=(s=l.split(/\s+/)).shift(),l=s.join(" "),o){case"format":u.format=s[0],u.version=s[1];break;case"comment":u.comments.push(l);break;case"element":void 0!==i&&u.elements.push(i),(i={}).name=s[0],i.count=parseInt(s[1],10),i.properties=[];break;case"property":i.properties.push(b(s,t.propertyNameMapping));break;default:console.log("unhandled",o,s)}}return void 0!==i&&u.elements.push(i),u}function b(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],t&&n.name in t&&(n.name=t[n.name]),n}function w(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e,10);case"float":case"double":case"float32":case"float64":return parseFloat(e);default:throw new Error(t)}}function m(e,t){for(var n=t.split(/\s+/),r={},a=0;a<e.length;a++)if("list"===e[a].type){for(var i=[],o=w(n.shift(),e[a].countType),s=0;s<o;s++)i.push(w(n.shift(),e[a].itemType));r[e[a].name]=i}else r[e[a].name]=w(n.shift(),e[a].type);return r}function x(e,t){var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="";null!==(n=/end_header\s([\s\S]*)$/.exec(e))&&(a=n[1]);for(var i=a.split("\n"),o=0,s=0,u=0;u<i.length;u++){var c=i[u];if(""!==(c=c.trim())){s>=t.elements[o].count&&(o++,s=0);var f=m(t.elements[o].properties,c);g(r,t.elements[o].name,f),s++}}return r}function g(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var r=n.vertex_indices||n.vertex_index;3===r.length?e.indices.push(r[0],r[1],r[2]):4===r.length&&(e.indices.push(r[0],r[1],r[3]),e.indices.push(r[1],r[2],r[3]))}}function A(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8];default:throw new Error(n)}}function O(e,t,n,r){for(var a,i={},o=0,s=0;s<n.length;s++)if("list"===n[s].type){var u=[],c=(a=A(e,t+o,n[s].countType,r))[0];o+=a[1];for(var f=0;f<c;f++)a=A(e,t+o,n[s].itemType,r),u.push(a[0]),o+=a[1];i[n[s].name]=u}else a=A(e,t+o,n[s].type,r),i[n[s].name]=a[0],o+=a[1];return[i,o]}var S={name:"PLY",extensions:["ply"],parseTextSync:y,parseSync:y,text:!0,binary:!0,DEFAULT_OPTIONS:{}},k=n(375),T=n(225),j=n(302);n.d(t,"default",function(){return E}),n.d(t,"renderToDOM",function(){return I}),Object(T.b)(S),Object(T.b)(k.a);var _="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/point-cloud-laz/indoor.0.1.laz",C={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},L=new l.d(["rotationOrbit"]),E=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={viewState:C,pointsCount:0,points:null},n._onLoad=n._onLoad.bind(a()(n)),n._onViewStateChange=n._onViewStateChange.bind(a()(n)),n._rotateCamera=n._rotateCamera.bind(a()(n)),Object(j.a)(_).then(n._onLoad),n}o()(t,e);var n=t.prototype;return n._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},n._rotateCamera=function(){var e=this.state.viewState;this.setState({viewState:Object.assign({},e,{rotationOrbit:e.rotationOrbit+30,transitionDuration:600,transitionInterpolator:L,onTransitionEnd:this._rotateCamera})})},n._onLoad=function(e){var t=e.header,n=e.loaderData,r=e.attributes,a=(e.progress,n.header),i=a.mins,o=a.maxs,s=this.state.viewState;i&&o&&(s=Object.assign({},s,{target:[(i[0]+o[0])/2,(i[1]+o[1])/2,(i[2]+o[2])/2],zoom:Math.log2(window.innerWidth/(o[0]-i[0]))-1})),this.props.onLoad&&this.props.onLoad({count:t.vertexCount,progress:1}),this.setState({pointsCount:t.vertexCount,points:r.POSITION.value,viewState:s},this._rotateCamera)},n._renderLayers=function(){var e=this.state,t=e.pointsCount,n=e.points;return[n&&new p.a({id:"laz-point-cloud-layer",coordinateSystem:l.a.IDENTITY,numInstances:t,instancePositions:n,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]},n.render=function(){var e=this.state.viewState;return u.a.createElement(f.a,{views:new l.e,viewState:e,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}})},t}(s.PureComponent);function I(e){Object(c.render)(u.a.createElement(E,null),e)}},216:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});n(7);var r=n(217);function a(e){return!!e&&(Array.isArray(e)&&(e=e[0]),e.parseTextSync||e.parseSync||e.parse||e.loadAndParse||e.parseStream||e.parseInBatches||e.worker)}function i(e){var t;return Object(r.a)(a(e)),Array.isArray(e)&&(t=(e=e[0])[1],e=Object.assign({},e,{options:Object.assign({},e.options,{options:t})})),e.extension&&(e.extensions=e.extensions||[e.extension],delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Object(r.a)(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}},217:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"loader assertion failed.")}n.d(t,"a",function(){return r})},225:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});n(14),n(11),n(243),n(75),n(76),n(19);var r=n(216),a={};function i(e){var t=e=Array.isArray(e)?e:[e],n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var s=o;Object(r.b)(s);var u=s.extensions,c=Array.isArray(u),f=0;for(u=c?u:u[Symbol.iterator]();;){var l;if(c){if(f>=u.length)break;l=u[f++]}else{if((f=u.next()).done)break;l=f.value}a[l]=s}}}function o(){return Object.values(a)}},226:function(e,t){"undefined"==typeof TextDecoder||"undefined"==typeof TextEncoder?e.exports={}:e.exports={TextEncoder:TextEncoder,TextDecoder:TextDecoder}},229:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return a});var a="object"!=typeof e||"[object process]"!==String(e)||e.browser;"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document}).call(this,n(117),n(78))},252:function(e,t){},253:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});n(204);function r(e){return e+3&-4}function a(e,t){var n=e instanceof ArrayBuffer?new Uint8Array(e):e,r=t instanceof ArrayBuffer?new Uint8Array(t):t,a=new Uint8Array(n.byteLength+r.byteLength);return a.set(n,0),a.set(r,n.byteLength),a}},254:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});n(30),n(11),n(204);var r=n(217),a=n(226),i=function(e){return e&&e instanceof ArrayBuffer},o=function(t){return t&&t instanceof e};function s(e){if(i(e))return e;if(o(e))return new Uint8Array(e).buffer;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new a.TextEncoder).encode(t).buffer}return Object(r.a)(!1)}}).call(this,n(235).Buffer)},256:function(e,t,n){"use strict";var r=n(206),a=n.n(r),i=(n(207),n(208)),o=n.n(i),s=n(229),u=n(252);n(7),n(212),n(217);function c(e,t){return f.apply(this,arguments)}function f(){return(f=o()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(33);var l="",p={};function d(e){for(var t in p)if(e.startsWith(t)){var n=p[t];return e.replace(t,n)}return e+=l}function v(e,t){return y.apply(this,arguments)}function y(){return(y=o()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d(t),r=s.a?c:u.fetchFile,e.abrupt("return",r(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"a",function(){return v})},260:function(e,t){},291:function(e,t){},292:function(e,t){},302:function(e,t,n){"use strict";var r=n(206),a=n.n(r),i=(n(207),n(208)),o=n.n(i),s=n(256),u=n(216),c=(n(75),n(76),n(19),n(79),/[^.]+$/);function f(e,t,n){void 0===e&&(e="");var r=e.match(c);if(r&&r[0]){var a=function(e,t){t=t.toLowerCase();for(var n=e,r=Array.isArray(n),a=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var o=i;Object(u.b)(o);for(var s=o.extensions,c=Array.isArray(s),f=0,s=c?s:s[Symbol.iterator]();;){var l;if(c){if(f>=s.length)break;l=s[f++]}else{if((f=s.next()).done)break;l=f.value}var p=l;if(p.toLowerCase()===t)return o}}return null}(n,r[0]);if(a)return a}var i=function(e,t){for(var n=e,r=Array.isArray(n),a=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var o=i;if(o.testText&&o.testText(t))return o}return null}(n,t);return i||null}n(7);var l=function(){function e(){}var t=e.prototype;return t.log=function(){},t.info=function(){},t.warn=function(){},t.error=function(){},e}(),p=n(225),d=n(217),v=(n(30),n(14),n(11),n(77),n(230),n(254)),y=new Map;function h(e,t,n){var r=function(e){var t=y.get(e);if(!t){var n=new Blob([e],{type:"application/javascript"});t=URL.createObjectURL(n),y.set(e,t)}return new Worker(t)}(e);n=function(e){null!==(e=Object.assign({},e)).log&&delete e.log;return e}(n);var a=function(e,t){return new Promise(function(n,a){r.onmessage=function(e){switch(e.data.type){case"done":n(e.data.result),r.terminate();break;case"error":a(new Error(e.data.message))}};var i=Object(v.a)(e);r.postMessage({arraybuffer:i,opts:t},[i])})};return t?a(t,n):a}var b=function(e){return"undefined"!=typeof window&&e instanceof window.Response||e.arrayBuffer&&e.json&&e.body};n(280),n(281),n(229),n(253);var w=n(226),m="Cannot convert supplied data type";function x(e){return b(e)?e.url:null}function g(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var n=e.buffer||e;return t.text&&!t.binary?new w.TextDecoder("utf8").decode(n):n}throw new Error(m)}function A(e,t){return O.apply(this,arguments)}function O(){return(O=o()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=6;break}return e.abrupt("return",g(t,n));case 6:if(!b(t)){e.next=15;break}if(!n.binary){e.next=13;break}return e.next=10,t.arrayBuffer();case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=t.text();case 14:return e.abrupt("return",e.t0);case 15:throw new Error(m);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,t,n,r){return k.apply(this,arguments)}function k(){return(k=o()(a.a.mark(function e(t,n,r,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),i=i||x(t),e.next=4,A(t,n);case 4:if(t=e.sent,!n.parseTextSync||"string"!=typeof t){e.next=8;break}return r.dataType="text",e.abrupt("return",n.parseTextSync(t,r,i,n));case 8:if(!n.parseSync){e.next=10;break}return e.abrupt("return",n.parseSync(t,r,i,n));case 10:if(!n.parse){e.next=14;break}return e.next=13,n.parse(t,r,i,n);case 13:return e.abrupt("return",e.sent);case 14:if(!n.worker){e.next=18;break}return e.next=17,h(n.worker,t,r);case 17:return e.abrupt("return",e.sent);case 18:return e.abrupt("return",Object(d.a)(!1));case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=o()(a.a.mark(function e(t,n,r,i){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Object(u.a)(n)||(i=r,r=n,n=null),n=n||Object(p.a)(),o=Array.isArray(n)?f(i,t,n):n){e.next=5;break}return e.abrupt("return",null);case 5:return Object(u.b)(o),r=_(r,o),e.next=9,S(t,o,r,i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return null===(e=Object.assign({},t.DEFAULT_OPTIONS,t.options,e,{dataType:"arraybuffer"})).log&&(e.log=new l),"log"in e||(e.log=console),e}function C(e,t,n){return L.apply(this,arguments)}function L(){return(L=o()(a.a.mark(function e(t,n,r){var i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Object(u.a)(n)||(r=n,n=null),n=n||Object(p.a)(),!(i=Array.isArray(n)?f(t,null,n):n)||!i.loadAndParse){e.next=7;break}return e.next=6,i.loadAndParse(t,r);case 6:return e.abrupt("return",e.sent);case 7:if("string"!=typeof(o=t)){e.next=12;break}return e.next=11,Object(s.a)(t,r);case 11:o=e.sent;case 12:return e.abrupt("return",T(o,n,r,t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"a",function(){return C})},340:function(e,t){},341:function(e,t){}}]);