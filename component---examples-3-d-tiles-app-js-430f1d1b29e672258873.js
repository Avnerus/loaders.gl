(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{194:function(e,t,r){"use strict";r.r(t);r(250),r(7),r(226);var n=r(16),a=r.n(n),i=r(2),o=r.n(i),s=r(0),u=r.n(s),c=r(44),f=r(343),l=r(239),h=r(344),p={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"},y=(r(205),r(254)),d=r(274);function T(e,t,r){Object(y.a)(e instanceof ArrayBuffer);var n=new d.TextDecoder("utf8"),a=new Uint8Array(e,t,r);return n.decode(a)}r(238);var b,_={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},g=(r(30),r(281),r(229),r(230),r(225),r(222),r(216),r(282),(b={})[_.DOUBLE]=Float64Array,b[_.FLOAT]=Float32Array,b[_.UNSIGNED_SHORT]=Uint16Array,b[_.UNSIGNED_INT]=Uint32Array,b[_.UNSIGNED_BYTE]=Uint8Array,b[_.BYTE]=Int8Array,b[_.SHORT]=Int16Array,b[_.INT]=Int32Array,b),E={DOUBLE:_.DOUBLE,FLOAT:_.FLOAT,UNSIGNED_SHORT:_.UNSIGNED_SHORT,UNSIGNED_INT:_.UNSIGNED_INT,UNSIGNED_BYTE:_.UNSIGNED_BYTE,BYTE:_.BYTE,SHORT:_.SHORT,INT:_.INT},v=function(){function e(){}return e.fromTypedArray=function(e){for(var t in e=ArrayBuffer.isView(e)?e.constructor:e,g){if(g[t]===e)return t}throw new Error("Failed to convert GL type")},e.fromName=function(e){var t=E[e];if(!t)throw new Error("Failed to convert GL type");return t},e.getArrayType=function(e,t){switch(void 0===t&&(t=!1),e){case _.UNSIGNED_SHORT_5_6_5:case _.UNSIGNED_SHORT_4_4_4_4:case _.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var r=g[e];if(!r)throw new Error("Failed to convert GL type");return r}},e.getByteSize=function(t){return e.getArrayType(t).BYTES_PER_ELEMENT},e.validate=function(t){return Boolean(e.getArrayType(t))},e.createTypedArray=function(t,r,n,a){return void 0===n&&(n=0),void 0===a&&(a=(r.byteLength-n)/e.getByteSize(t)),new(e.getArrayType(t))(r,n,a)},e}(),I=function(){function e(e,t){this.json=e,this.buffer=t,this.featuresLength=0,this._cachedTypedArrays={}}var t=e.prototype;return t.getExtension=function(e){return this.json.extensions&&this.json.extensions[e]},t.hasProperty=function(e){return Boolean(this.json[e])},t.getGlobalProperty=function(e,t,r){void 0===t&&(t=_.UNSIGNED_INT),void 0===r&&(r=1);var n=this.json[e];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(e,t,r,1,n.byteOffset):n},t.getPropertyArray=function(e,t,r){var n=this.json[e];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(t=v.fromName(n.componentType)),this._getTypedArrayFromBinary(e,t,r,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(e,t,n)},t.getProperty=function(e,t,r,n,a){var i=this.json[e];if(!i)return i;var o=this.getPropertyArray(e,t,r);if(1===r)return o[n];for(var s=0;s<r;++s)a[s]=o[r*n+s];return a},t._getTypedArrayFromBinary=function(e,t,r,n,a){var i=this._cachedTypedArrays,o=i[e];return o||(o=v.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+a,n*r),i[e]=o),o},t._getTypedArrayFromArray=function(e,t,r){var n=this._cachedTypedArrays,a=n[e];return a||(a=v.createTypedArray(t,r),n[e]=a),a},e}();r(19),r(14),r(11),r(214);function N(e,t){if(!e)throw new Error(t||"3d-tile loader: assertion failed.")}var m={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A={SCALAR:function(e,t){return e[t]},VEC2:function(e,t){return[e[2*t+0],e[2*t+1]]},VEC3:function(e,t){return[e[3*t+0],e[3*t+1],e[3*t+2]]},VEC4:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT2:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT3:function(e,t){return[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]]},MAT4:function(e,t){return[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]}},S={SCALAR:function(e,t,r){t[r]=e},VEC2:function(e,t,r){t[2*r+0]=e[0],t[2*r+1]=e[1]},VEC3:function(e,t,r){t[3*r+0]=e[0],t[3*r+1]=e[1],t[3*r+2]=e[2]},VEC4:function(e,t,r){t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT2:function(e,t,r){t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT3:function(e,t,r){t[9*r+0]=e[0],t[9*r+1]=e[1],t[9*r+2]=e[2],t[9*r+3]=e[3],t[9*r+4]=e[4],t[9*r+5]=e[5],t[9*r+6]=e[6],t[9*r+7]=e[7],t[9*r+8]=e[8],t[9*r+9]=e[9]},MAT4:function(e,t,r){t[16*r+0]=e[0],t[16*r+1]=e[1],t[16*r+2]=e[2],t[16*r+3]=e[3],t[16*r+4]=e[4],t[16*r+5]=e[5],t[16*r+6]=e[6],t[16*r+7]=e[7],t[16*r+8]=e[8],t[16*r+9]=e[9],t[16*r+10]=e[10],t[16*r+11]=e[11],t[16*r+12]=e[12],t[16*r+13]=e[13],t[16*r+14]=e[14],t[16*r+15]=e[15]}};r(283);var O=r(321),w=r.n(O),C=function(e){return void 0!==e};function B(e,t,r){if(!t)return null;var n=e.getExtension("3DTILES_batch_table_hierarchy"),a=t.HIERARCHY;return a&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=a,n=a),n?function(e,t){var r,n,a,i,o=e.instancesLength,s=e.classes,u=e.classIds,c=e.parentCounts,f=e.parentIds,l=o;C(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,a=getBinaryAccessor(u),w()("classIds"),u=a.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,o));if(C(c))for(C(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,a=getBinaryAccessor(c),w()("parentCounts"),c=a.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,o)),i=new Uint16Array(o),w()("parentIdsLength"),l=0,r=0;r<o;++r)i[r]=l,l+=(w()("parentIdsLength"),c[r]);C(f)&&C(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,GL.UNSIGNED_SHORT),f.type=AttributeType.SCALAR,a=getBinaryAccessor(f),w()("parentIds"),f=a.createArrayBufferView(t.buffer,t.byteOffset+f.byteOffset,l));var h=s.length;for(r=0;r<h;++r){var p=s[r].length,y=s[r].instances,d=getBinaryProperties(p,y,t);s[r].instances=combine(d,y)}var T=new Array(h).fill(0),b=new Uint16Array(o);for(r=0;r<o;++r)n=u[r],b[r]=T[n],++T[n];var _={classes:s,classIds:u,classIndexes:b,parentCounts:c,parentIndexes:i,parentIds:f};return function(e){for(var t=e.classIds.length,r=0;r<t;++r)L(e,r,stack)}(_),_}(n,r):null}function P(e,t,r){if(e){var n=e.parentCounts;return e.parentIds?r(e,t):n>0?function(e,t,r){var n=e.classIds,a=e.parentCounts,i=e.parentIds,o=e.parentIndexes,s=n.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,f=scratchStack;f.length=0,f.push(t);for(;f.length>0;)if(t=f.pop(),u[t]!==c){u[t]=c;var l=r(e,t);if(C(l))return l;for(var h=a[t],p=o[t],y=0;y<h;++y){var d=i[p+y];d!==t&&f.push(d)}}return null}(e,t,r):function(e,t,r){var n=!0;for(;n;){var a=r(e,t);if(C(a))return a;var i=e.parentIds[t];n=i!==t,t=i}throw new Error("traverseHierarchySingleParent")}(e,t,r)}}function L(e,t,r){var n=e.parentCounts,a=e.parentIds,i=e.parentIndexes,o=e.classIds.length;if(C(a)){assert(t<o,"Parent index "+t+" exceeds the total number of instances: "+o),assert(-1===r.indexOf(t),"Circular dependency detected in the batch table hierarchy."),r.push(t);for(var s=C(n)?n[t]:1,u=C(n)?i[t]:t,c=0;c<s;++c){var f=a[u+c];f!==t&&L(e,f,r)}r.pop(t)}}var D=function(e){return void 0!==e},x=function(e){return e},G={HIERARCHY:!0,extensions:!0,extras:!0},U=function(){function e(e,t,r,n){for(var a in void 0===n&&(n={}),N(r>=0),this.json=e||{},this.binary=t,this.featureCount=r,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)G[a]||(this._properties[a]=this.json[a]);this._binaryProperties=this._initializeBinaryProperties(),n["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=B(this,this.json,this.binary))}var t=e.prototype;return t.getExtension=function(e){return this.json&&this.json.extensions&&this.json.extensions[e]},t.memorySizeInBytes=function(){return 0},t.isClass=function(e,t){if(this._checkBatchId(e),N("string"==typeof t,t),this._hierarchy){var r=P(this._hierarchy,e,function(e,r){var n=e.classIds[r];return e.classes[n].name===t});return D(r)}return!1},t.isExactClass=function(e,t){return N("string"==typeof t,t),this.getExactClassName(e)===t},t.getExactClassName=function(e){if(this._checkBatchId(e),this._hierarchy){var t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}},t.hasProperty=function(e,t){return this._checkBatchId(e),N("string"==typeof t,t),D(this._properties[t])||this._hasPropertyInHierarchy(e,t)},t.getPropertyNames=function(e,t){var r;this._checkBatchId(e),(t=D(t)?t:[]).length=0;var n=Object.keys(this._properties);return(r=t).push.apply(r,n),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t},t.getProperty=function(e,t){if(this._checkBatchId(e),N("string"==typeof t,t),this._binaryProperties){var r=this._binaryProperties[t];if(D(r))return this._getBinaryProperty(r,e)}var n=this._properties[t];if(D(n))return x(n[e]);if(this._hierarchy){var a=this._getHierarchyProperty(e,t);if(D(a))return a}},t.setProperty=function(e,t,r){var n=this.featureCount;if(this._checkBatchId(e,n),N("string"==typeof t,t),this._binaryProperties){var a=this._binaryProperties[t];if(a)return void this._setBinaryProperty(a,e,r)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,t,r)){var i=this._properties[t];D(i)||(this._properties[t]=new Array(n),i=this._properties[t]),i[e]=x(r)}},t._checkBatchId=function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")},t._getBinaryProperty=function(e,t){return e.unpack(e.typedArray,t)},t._setBinaryProperty=function(e,t,r){e.pack(r,e.typedArray,t)},t._initializeBinaryProperties=function(){var e=null;for(var t in this._properties){var r=this._properties[t],n=this._initializeBinaryProperty(t,r);n&&((e=e||{})[t]=n)}return e},t._initializeBinaryProperty=function(e,t){if("byteOffset"in t){var r=t;N(this.binary,"Property "+e+" requires a batch table binary."),N(r.type,"Property "+e+" requires a type.");var n=function(e,t,r,n){var a=e.componentType;N(e.componentType);var i="string"==typeof a?v.fromName(a):a,o=m[e.type],s=A[e.type],u=S[e.type];return r+=e.byteOffset,{values:v.createTypedArray(i,t,r,o*n),type:i,size:o,unpacker:s,packer:u}}(r,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null},t._hasPropertyInHierarchy=function(e,t){if(!this._hierarchy)return!1;var r=P(this._hierarchy,e,function(e,r){var n=e.classIds[r],a=e.classes[n].instances;return D(a[t])});return D(r)},t._getPropertyNamesInHierarchy=function(e,t){P(this._hierarchy,e,function(e,r){var n=e.classIds[r],a=e.classes[n].instances;for(var i in a)a.hasOwnProperty(i)&&-1===t.indexOf(i)&&t.push(i)})},t._getHierarchyProperty=function(e,t){var r=this;return P(this._hierarchy,e,function(e,n){var a=e.classIds[n],i=e.classes[a],o=e.classIndexes[n],s=i.instances[t];return D(s)?D(s.typedArray)?r._getBinaryProperty(s,o):x(s[o]):null})},t._setHierarchyProperty=function(e,t,r,n){var a=this,i=P(this._hierarchy,t,function(e,i){var o=e.classIds[i],s=e.classes[o],u=e.classIndexes[i],c=s.instances[r];return!!D(c)&&(N(i===t,'Inherited property "'+r+'" is read-only.'),D(c.typedArray)?a._setBinaryProperty(c,u,n):c[u]=x(n),!0)});return D(i)},e}(),R=4;function F(e,t,r){void 0===r&&(r=0);var n=new DataView(t);if(e.magic=n.getUint32(r,!0),r+=R,e.version=n.getUint32(r,!0),r+=R,e.byteLength=n.getUint32(r,!0),r+=R,1!==e.version)throw new Error("3D Tile Version "+e.version+" not supported");return r}var H=4;function V(e,t,r){var n=new DataView(t);return e.featureTableJsonByteLength=n.getUint32(r,!0),r+=H,e.featureTableBinaryByteLength=n.getUint32(r,!0),r+=H,e.batchTableJsonByteLength=n.getUint32(r,!0),r+=H,e.batchTableBinaryByteLength=n.getUint32(r,!0),r+=H}function M(e,t,r,n){return r=function(e,t,r,n){var a=e.featureTableJsonByteLength,i=e.featureTableBinaryByteLength;if(e.featureTableJson={BATCH_LENGTH:0},a>0){var o=T(t,r,a);e.featureTableJson=JSON.parse(o)}return r+=a,e.featureTableBinary=new Uint8Array(t,r,i),r+=i}(e,t,r),r=function(e,t,r,n){var a=e.batchTableJsonByteLength,i=e.batchTableBinaryByteLength;if(a>0){var o=T(t,r,a);e.batchTableJson=JSON.parse(o),r+=a,i>0&&(e.batchTableBinary=new Uint8Array(t,r,i),e.batchTableBinary=new Uint8Array(e.batchTableBinary),r+=i)}return r}(e,t,r)}var k={NEEDS_DECODE:0,DECODING:1,READY:2,FAILED:3};function j(e,t,r,n){return r=M(e,t,r=V(e,t,r=F(e,t,r))),function(e){var t=new I(e.featureTableJson,e.featureTableBinary),r=t.getGlobalProperty("POINTS_LENGTH");if(e.featuresLength=r,t.featuresLength=r,!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");e.rtcCenter=t.getGlobalProperty("RTC_CENTER",_.FLOAT,3),e.positions=null,e.colors=null,e.normals=null,e.batchIds=null,e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1,function(e,t){if(!e.positions)if(t.hasProperty("POSITION"))e.positions=t.getPropertyArray("POSITION",_.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){if(e.positions=t.getPropertyArray("POSITION_QUANTIZED",_.UNSIGNED_SHORT,3),e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",_.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",_.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.")}if(!e.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}(e,t),function(e,t){e.colors||(t.hasProperty("RGBA")?(e.colors=t.getPropertyArray("RGBA",_.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?e.colors=t.getPropertyArray("RGB",_.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(e.colors=t.getPropertyArray("RGB565",_.UNSIGNED_SHORT,1),e.isRGB565=!0));t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",_.UNSIGNED_BYTE,4))}(e,t),function(e,t){e.normals||(t.hasProperty("NORMAL")?e.normals=t.getPropertyArray("NORMAL",_.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(e.normals=t.getPropertyArray("NORMAL_OCT16P",_.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0))}(e,t);var n=function(e,t){var r=null;if(t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",_.UNSIGNED_SHORT,1),e.batchIds)){var n=t.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var a=e.batchTableJson,i=e.batchTableBinary;r=new U(a,i,n)}return r}(e,t);!function(e,t,r){var n,a,i,o=r&&r.getExtension("3DTILES_draco_point_compression");o&&(i=o.properties);var s=t.getExtension("3DTILES_draco_point_compression");if(s){a=s.properties;var u=s.byteOffset,c=s.byteLength;if(!a||!Number.isFinite(u)||!c)throw new Error("Draco properties, byteOffset, and byteLength must be defined");n=e.featureTableBinary.slice(u,u+c),e.hasPositions=a.POSITION,e.hasColors=a.RGB||a.RGBA,e.hasNormals=a.NORMAL,e.hasBatchIds=a.BATCH_ID,e.isTranslucent=a.RGBA}n&&(e.draco={buffer:n,properties:Object.assign({},a,i),featureTableProperties:a,batchTableProperties:i,dequantizeInShader:!1},e.decodingState=k.NEEDS_DECODE)}(e,t,n)}(e),r}function z(e,t,r){var n=e.byteOffset+e.byteLength-r;if(0===n)throw new Error("glTF byte length must be greater than 0.");if(r%4==0)e.gltfView=new Uint8Array(t,r,n);else{console.warn(e.type+": embedded glb is not aligned to a 4-byte boundary.");var a=new Uint8Array(t);e.gltfView=new Uint8Array(a.subarray(r,r+n))}return e.byteOffset+e.byteLength}function Y(e,t,r,n){switch(void 0===t&&(t=0),void 0===r&&(r={}),void 0===n&&(n={}),n.byteOffset=t,n.type=function(e,t){void 0===t&&(t=0);var r=new DataView(e);return""+String.fromCharCode(r.getUint8(t+0))+String.fromCharCode(r.getUint8(t+1))+String.fromCharCode(r.getUint8(t+2))+String.fromCharCode(r.getUint8(t+3))}(e,t),n.type){case p.COMPOSITE:!function(e,t,r,n,a){r=F(e,t,r);var i=new DataView(t);for(e.tilesLength=i.getUint32(r,!0),r+=4,e.tiles=[];e.tiles.length<e.tilesLength&&e.byteLength-r>12;){var o={};e.tiles.push(o),r=a(t,r,n,o)}}(n,e,t,r,Y);break;case p.BATCHED_3D_MODEL:!function(e,t,r,n){r=z(e,t,r=M(e,t,r=V(e,t,r=F(e,t,r))));var a=new I(e.featureTableJson,e.featureTableBinary);e.rtcCenter=a.getGlobalProperty("RTC_CENTER",_.FLOAT,3)}(n,e,t);break;case p.INSTANCED_3D_MODEL:!function(e,t,r,n){if(r=F(e,t,r),1!==e.version)throw new Error("Instanced 3D Model version "+e.version+" is not supported");r=V(e,t,r);var a=new DataView(t);if(e.gltfFormat=a.getUint32(r,!0),r=z(e,r=M(e,t,r+=4)),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var i=new I(e.featureTableJson,e.featureTableBinary),o=i.getGlobalProperty("INSTANCES_LENGTH");if(i.featuresLength=o,!Number.isFinite(o))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=i.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=i.getGlobalProperty("RTC_CENTER",_.FLOAT,3)}(n,e,t);break;case p.POINT_CLOUD:j(n,e,t);break;default:throw new Error("3DTileLoader: unknown type "+n.type)}return n}var J={name:"3D Tiles",extensions:["cmpt","pnts","b3dm","i3dm"],parseSync:function(e,t,r,n){return Y(e,0,t)},binary:!0};var q=r(272),Q=r(342),Z=(r(80),r(9)),X=Z.a.div.withConfig({displayName:"control-panel__Container",componentId:"t27rqk-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),W=Z.a.select.withConfig({displayName:"control-panel__DropDown",componentId:"t27rqk-1"})(["margin-bottom:6px;"]),$=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var r=t.prototype;return r._renderByCategories=function(){var e=this.props,t=e.category,r=e.example,n=e.onChange,a=e.data,i=void 0===a?{}:a,o=Object.keys(i),s=t+"."+r;return u.a.createElement(W,{value:s,onChange:function(e){var t=e.target.value.split(".");n({category:t[0],example:t[1]})}},o.map(function(e,t){var r=i[e].examples;return u.a.createElement("optgroup",{key:t,label:e},Object.keys(r).map(function(t,r){var n=e+"."+t;return u.a.createElement("option",{key:r,value:n},t)}))}))},r._renderDropped=function(){var e=this.props.droppedFile;return e?u.a.createElement("div",null,"Dropped file: ",JSON.stringify(e.name)):null},r.render=function(){return u.a.createElement(X,null,this._renderByCategories(),this._renderDropped())},t}(s.PureComponent);r(31);r.d(t,"MeshTile3DLoader",function(){return K}),r.d(t,"default",function(){return ne}),r.d(t,"renderToDOM",function(){return ae});var K={name:"3D Tile Pointloud",extensions:["pnts"],parseSync:function(e,t,r,n){return J.parseSync(e,t,r,n)},binary:!0};Object(q.b)(K);var ee="https://raw.githubusercontent.com/uber-web/loaders.gl/master",te={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:-10,maxZoom:10,zoom:1},re=new l.d(["rotationOrbit"]);var ne=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={viewState:te,featureTable:null,batchTable:null,tile:null,droppedFile:null,example:"PointCloudNormals",category:"PointCloud"},r._deckRef=null,r._onLoad=r._onLoad.bind(a()(r)),r._onViewStateChange=r._onViewStateChange.bind(a()(r)),r._rotateCamera=r._rotateCamera.bind(a()(r)),r._getColor=r._getColor.bind(a()(r)),r._loadExample=r._loadExample.bind(a()(r)),r._onSelectExample=r._onSelectExample.bind(a()(r)),r}o()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e,t,r=this;e=this._deckRef.deckCanvas,t=function(e,t){r.setState({droppedFile:t,tile:null}),Object(Q.a)(e,K).then(r._onLoad)},e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){if(e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length){var r=e.dataTransfer.files[0],n=new Promise(function(e){var t=new window.FileReader;t.onload=function(t){return e(t.target.result)},t.readAsArrayBuffer(r)});t(n,r)}},fetch("https://raw.githubusercontent.com/uber-web/loaders.gl/master/modules/3d-tiles/test/data/index.json").then(function(e){return e.json()}).then(function(e){r.setState({data:e});var t=r.state,n=t.category,a=t.example;r._loadExample(n,a)})},r._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},r._rotateCamera=function(){var e=this.state.viewState;this.setState({viewState:Object.assign({},e,{rotationOrbit:e.rotationOrbit+30,transitionDuration:600,transitionInterpolator:re,onTransitionEnd:this._rotateCamera})})},r._loadExample=function(e,t){var r=this.state.data;if(this.setState({tile:null}),r&&e&&t){var n=r[e].examples[t],a=ee+"/"+n.path+"/"+n.files[0];Object(Q.a)(a).then(this._onLoad)}},r._onLoad=function(e){var t=new I(e.featureTableJson,e.featureTableBinary),r=null;if(e.batchTableBinaryByteLength){var n=e.batchTableJson,a=e.batchTableBinary;r=new U(n,a,t.getGlobalProperty("BATCH_LENGTH"))}var i=function(e,t){void 0===t&&(t=3);for(var r=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],n=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],a=e.length/t,i=0;i<a;i++)r[0]=Math.min(r[0],e[i*t]),r[1]=Math.min(r[1],e[i*t+1]),r[2]=Math.min(r[2],e[i*t+2]),n[0]=Math.max(n[0],e[i*t]),n[1]=Math.max(n[1],e[i*t+1]),n[2]=Math.max(n[2],e[i*t+2]);return{mins:r,maxs:n}}(e.positions),o=i.mins,s=i.maxs,u=this.state.viewState;o&&s&&(u=Object.assign({},u,{target:[(o[0]+s[0])/2,(o[1]+s[1])/2,(o[2]+s[2])/2],zoom:Math.log2(window.innerWidth/(s[0]-o[0]))-1.5})),e.pointsCount=e.featureTableJson.POINTS_LENGTH,this.setState({tile:e,featureTable:t,batchTable:r,viewState:u},this._rotateCamera)},r._getColor=function(e,t){var r=t.index,n=t.data,a=t.target;if(!this.state.tile)return null;var i,o,s,u,c=this.state,f=c.tile,l=f.colors,h=f.isRGB565,p=f.constantRGBA,y=f.batchIds,d=c.batchTable;if(l){if(h){var T=(i=n.colors.value[r],o=31&i,s=i>>5&63,u=i>>11&31,[o=Math.round(255*o/32),s=Math.round(255*s/64),u=Math.round(255*u/32)]);a[0]=T[0],a[1]=T[1],a[2]=T[2],a[3]=255}else a[0]=n.colors.value[3*r],a[1]=n.colors.value[3*r+1],a[2]=n.colors.value[3*r+2],a[3]=4===n.colors.size?n.colors[3*r+4]:255;return a}if(p)return p;if(y&&d){var b=y[r],_=d.getProperty(b,"dimensions").map(function(e){return 255*e});return[].concat(_,[255])}return[255,255,255]},r._renderLayers=function(){if(!this.state.tile)return null;var e=this.state.tile,t=e.pointsCount,r=e.positions,n=e.colors,a=e.normals;return r&&new h.a({data:{colors:{value:n,size:4},normals:{value:r,size:3},length:r.length/3},id:"3d-point-cloud-layer",coordinateSystem:l.a.IDENTITY,numInstances:t,instancePositions:r,getColor:this._getColor,getNormal:a?function(e,t){var r=t.index,n=t.data,a=t.target;return a[0]=n.normals[3*r],a[1]=n.normals[3*r+1],a[2]=n.normals[3*r+2],a}:[0,1,0],opacity:.5,pointSize:1.5})},r._onSelectExample=function(e){var t=this,r=e.category,n=e.example;this.setState({category:r,example:n},function(){t.state.data&&r&&n&&t._loadExample(r,n)})},r._renderControlPanel=function(){var e=this.state,t=e.data,r=e.example,n=e.category;return u.a.createElement($,{data:t,category:n,example:r,onChange:this._onSelectExample})},r.render=function(){var e=this,t=this.state.viewState;return u.a.createElement(f.a,{ref:function(t){return e._deckRef=t},width:"100%",height:"100%",views:new l.e,viewState:t,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}})},t}(s.PureComponent);function ae(e){Object(c.render)(u.a.createElement(ne,null),e)}},214:function(e,t,r){var n=r(46),a=r(39);r(241)("keys",function(){return function(e){return a(n(e))}})},222:function(e,t,r){r(213)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},226:function(e,t,r){"use strict";var n=r(8),a=r(28),i=r(35),o=r(280),s=r(58),u=r(26),c=r(84).f,f=r(122).f,l=r(21).f,h=r(319).trim,p=n.Number,y=p,d=p.prototype,T="Number"==i(r(83)(d)),b="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var r,n,a,i=(t=b?t.trim():h(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,u=t.slice(2),c=0,f=u.length;c<f;c++)if((o=u.charCodeAt(c))<48||o>a)return NaN;return parseInt(u,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(T?u(function(){d.valueOf.call(r)}):"Number"!=i(r))?o(new y(_(t)),r,p):_(t)};for(var g,E=r(22)?c(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),v=0;E.length>v;v++)a(y,g=E[v])&&!a(p,g)&&l(p,g,f(y,g));p.prototype=d,d.constructor=p,r(27)(n,"Number",p)}},229:function(e,t,r){r(213)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},230:function(e,t,r){r(213)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},238:function(e,t,r){var n=r(20),a=r(8).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},241:function(e,t,r){var n=r(20),a=r(34),i=r(26);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",o)}},281:function(e,t,r){r(213)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},282:function(e,t,r){r(213)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},283:function(e,t,r){var n=r(20);n(n.P,"Array",{fill:r(266)}),r(59)("fill")},319:function(e,t,r){var n=r(20),a=r(42),i=r(26),o=r(320),s="["+o+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(e,t,r){var a={},s=i(function(){return!!o[e]()||"​"!="​"[e]()}),u=a[e]=s?t(l):o[e];r&&(a[r]=u),n(n.P+n.F*s,"String",a)},l=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=f},320:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},321:function(e,t){e.exports=function(e){throw new Error('"'+e+'" is read-only')}}}]);
//# sourceMappingURL=component---examples-3-d-tiles-app-js-430f1d1b29e672258873.js.map