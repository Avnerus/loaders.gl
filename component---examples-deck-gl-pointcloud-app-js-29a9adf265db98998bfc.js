(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+Gmq":function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},"+ar0":function(t,e,n){var r=n("P8UN");r(r.S+r.F*!n("QPJK"),"Object",{defineProperties:n("YmeT")})},"/WnK":function(t,e,n){"use strict";function r(t){if(!t||!t.POSITION)return null;var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=t.POSITION.value,u=s&&s.length;if(!u)return null;for(var c=0;c<u;c+=3){var l=s[c],h=s[c+1],f=s[c+2];e=l<e?l:e,n=h<n?h:n,r=f<r?f:r,i=l>i?l:i,a=h>a?h:a,o=f>o?f:o}return[[e,n,r],[i,a,o]]}n.d(e,"a",(function(){return r}))},"0i8A":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("YBKJ"),n("9ZhD"),n("E5k/");var r=n("vpQ4"),i=n("1OyB"),a=n("vuIU"),o=n("VdrS"),s=n("CxzY"),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?Object(o.c)("geometry"):n,a=e.drawMode,s=void 0===a?u.TRIANGLES:a,c=e.attributes,l=void 0===c?{}:c,h=e.indices,f=void 0===h?null:h,d=e.vertexCount,p=void 0===d?null:d;this.id=r,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(l,f),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return Object(a.a)(t,null,[{key:"DRAW_MODE",get:function(){return u}}]),Object(a.a)(t,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Object(r.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,Object(s.a)(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Object(s.a)(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}return Object(s.a)(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),t}()},"1/Ks":function(t,e,n){"use strict";n("EU/P")("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},"1Nab":function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return P}));var r,i=n("o0o1"),a=n.n(i),o=(n("wcNg"),n("6kNP"),n("8npG"),n("E5k/"),n("rzGZ"),n("Dq+y"),n("YbXK"),n("kD43")),s=n("VLYs");function u(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}function l(t){return h.apply(this,arguments)}function h(){return(h=c(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.modules||{}).draco3d){t.next=3;break}return t.abrupt("return",{draco:n.draco3d.createDecoderModule()});case 3:return r=r||f(e),t.next=6,r;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return(d=c(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,Object(o.a)("draco_decoder.js","draco",e);case 5:return n=t.sent,t.abrupt("break",20);case 7:return t.t1=Promise,t.next=10,Object(o.a)("draco_wasm_wrapper.js","draco",e);case 10:return t.t2=t.sent,t.next=13,Object(o.a)("draco_decoder.wasm","draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:i=t.sent,n=i[0],r=i[1];case 20:return n=n||s.a.DracoDecoderModule,t.next=23,p(n,r);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){var n={};return e&&(n.wasmBinary=e),new Promise((function(e){t(Object.assign({},n,{onModuleLoaded:function(t){return e({draco:t})}}))}))}n("5irr"),n("SIeT"),n("6nXr"),n("h3Sa"),n("AItV"),n("CtJk"),n("88iX");var v=n("/WnK"),g=0,y=1,m={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},b={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},w=function(){function t(t){this.draco=t,this.drawMode="TRIANGLE"}var e=t.prototype;return e.destroy=function(){},e.destroyGeometry=function(t){t&&this.draco.destroy(t.dracoGeometry)},e.parseSync=function(t,e){var n=new this.draco.DecoderBuffer;n.Init(new Int8Array(t),t.byteLength);var r,i,a,o=new this.draco.Decoder,s={};try{var u=o.GetEncodedGeometryType(n);switch(u){case this.draco.TRIANGULAR_MESH:i=new this.draco.Mesh,r=o.DecodeBufferToMesh(n,i),a={type:g,faceCount:i.num_faces(),attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;case this.draco.POINT_CLOUD:i=new this.draco.PointCloud,r=o.DecodeBufferToPointCloud(n,i),a={type:y,attributeCount:i.num_attributes(),vertexCount:i.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!r.ok()||!i.ptr){var c="DRACO decompression failed: "+r.error_msg();throw i&&this.draco.destroy(i),new Error(c)}s.loaderData={header:a},this.extractDRACOGeometry(o,i,u,s),s.header={vertexCount:a.vertexCount,boundingBox:Object(v.a)(s.attributes)}}finally{this.draco.destroy(o),this.draco.destroy(n)}return s},e.extractDRACOGeometry=function(t,e,n,r){var i=this.getAttributes(t,e),a=i.POSITION;if(!a)throw new Error("DRACO decompressor: No position attribute found.");return this.getPositionAttributeMetadata(a),n===this.draco.TRIANGULAR_MESH?(i.indices="TRIANGLE_STRIP"===this.drawMode?this.getMeshStripIndices(t,e):this.getMeshFaceIndices(t,e),r.mode="TRIANGLE_STRIP"===this.drawMode?5:4):r.mode=0,i.indices&&(r.indices={value:i.indices,size:1},delete i.indices),r.attributes=i,r},e.getPositionAttributeMetadata=function(t){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var e=new this.draco.AttributeQuantizationTransform;if(e.InitFromAttribute(t)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=e.range(),this.metadata.attributes.position.numQuantizationBits=e.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var n=0;n<3;++n)this.metadata.attributes.position.minValues[n]=e.min_value(n)}this.draco.destroy(e)},e.getAttributes=function(t,e){var n={},r=e.num_points();for(var i in m){var a=this.draco[i],o=t.GetAttributeId(e,a);if(-1!==o){var s=t.GetAttribute(e,o),u=this.getAttributeTypedArray(t,e,s,i).typedArray;n[m[i]]={value:u,size:u.length/r}}}return n},e.getMeshFaceIndices=function(t,e){for(var n=e.num_faces(),r=new Uint32Array(3*n),i=new this.draco.DracoInt32Array,a=0;a<n;++a){t.GetFaceFromMesh(e,a,i);var o=3*a;r[o]=i.GetValue(0),r[o+1]=i.GetValue(1),r[o+2]=i.GetValue(2)}return this.draco.destroy(i),r},e.getMeshStripIndices=function(t,e){var n=new this.draco.DracoInt32Array;t.GetTriangleStripsFromMesh(e,n);for(var r=new Uint32Array(n.size()),i=0;i<n.size();++i)r[i]=n.GetValue(i);return this.draco.destroy(n),r},e.getAttributeTypedArray=function(t,e,n,r){if(0===n.ptr)throw new Error("DRACO decode bad attribute "+r);var i,a,o=b[n.data_type()],s=n.num_components(),u=e.num_points()*s;switch(o){case Float32Array:i=new this.draco.DracoFloat32Array,t.GetAttributeFloatForAllPoints(e,n,i),a=new Float32Array(u);break;case Int8Array:i=new this.draco.DracoInt8Array,t.GetAttributeInt8ForAllPoints(e,n,i),a=new Int8Array(u);break;case Int16Array:i=new this.draco.DracoInt16Array,t.GetAttributeInt16ForAllPoints(e,n,i),a=new Int16Array(u);break;case Int32Array:i=new this.draco.DracoInt32Array,t.GetAttributeInt32ForAllPoints(e,n,i),a=new Int32Array(u);break;case Uint8Array:i=new this.draco.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(e,n,i),a=new Uint8Array(u);break;case Uint16Array:i=new this.draco.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(e,n,i),a=new Uint16Array(u);break;case Uint32Array:i=new this.draco.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(e,n,i),a=new Uint32Array(u);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var c=0;c<u;c++)a[c]=i.GetValue(c);return this.draco.destroy(i),{typedArray:a,components:s}},e.decode=function(t,e){return this.parseSync(t,e)},t}();function _(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){_(a,r,i,o,s,"next",t)}function s(t){_(a,r,i,o,s,"throw",t)}o(void 0)}))}}var j="undefined"!=typeof __VERSION__?__VERSION__:"latest",k={id:"draco",name:"Draco",version:j,extensions:["drc"],mimeType:"application/octet-stream",binary:!0,test:"DRACO",options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@"+j+"/dist/draco-loader.worker.js",localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js"}}},P=Object.assign({},k,{parse:function(t,e,n,r){return S.apply(this,arguments)}});function S(){return(S=O(a.a.mark((function t(e,n,r,i){var o,s,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(n);case 2:return o=t.sent,s=o.draco,u=new w(s),t.prev=5,t.abrupt("return",u.parseSync(e));case 7:return t.prev=7,u.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}},"1RH0":function(t,e,n){var r=n("P8UN"),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},4:function(t,e){},"49sm":function(t,e,n){n("MIFh"),n("q8oJ"),n("C9fy"),n("8npG");var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},"91Zk":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));n("AqHK");var r=n("QPTa"),i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",a={name:"gouraud-lighting",dependencies:[r.a],vs:i,defines:{LIGHTING_VERTEX:1},getUniforms:c},o={name:"phong-lighting",dependencies:[r.a],fs:i,defines:{LIGHTING_FRAGMENT:1},getUniforms:c},s={};function u(t){var e=t.ambient,n=void 0===e?.35:e,r=t.diffuse,i=void 0===r?.6:r,a=t.shininess,o=void 0===a?32:a,s=t.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:o,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(t){return t/255}))}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!("material"in t))return{};var e=t.material;return e?u(e):{lighting_uEnabled:!1}}},BENj:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));n("QNMc"),n("E5k/"),n("YBKJ"),n("9ZhD");var r=n("ODXe"),i=n("1OyB"),a=n("vuIU"),o=n("md7G"),s=n("foSv"),u=n("Ji7U"),c=n("c9N0"),l=n("sxJW"),h=n("rSc4"),f=n("v88f"),d=n("VMBB"),p=n("RPaY"),v=n("zheZ"),g={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new p.a,transitionInterruption:v.a.BREAK},y={transitionDuration:0},m=0,b=20,w=0,_=60,O=0,j=0,k=1.5,P=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,a=n.height,u=n.latitude,c=n.longitude,l=n.zoom,h=n.bearing,f=void 0===h?j:h,p=n.pitch,v=void 0===p?O:p,g=n.altitude,y=void 0===g?k:g,P=n.maxZoom,S=void 0===P?b:P,x=n.minZoom,T=void 0===x?m:x,E=n.maxPitch,A=void 0===E?_:E,C=n.minPitch,M=void 0===C?w:C,I=n.startPanLngLat,R=n.startZoomLngLat,L=n.startBearing,D=n.startPitch,N=n.startZoom;return Object(i.a)(this,e),Object(d.a)(Number.isFinite(c),"`longitude` must be supplied"),Object(d.a)(Number.isFinite(u),"`latitude` must be supplied"),Object(d.a)(Number.isFinite(l),"`zoom` must be supplied"),(t=Object(o.a)(this,Object(s.a)(e).call(this,{width:r,height:a,latitude:u,longitude:c,zoom:l,bearing:f,pitch:v,altitude:y,maxZoom:S,minZoom:T,maxPitch:A,minPitch:M})))._interactiveState={startPanLngLat:I,startZoomLngLat:R,startBearing:L,startPitch:D,startZoom:N},t}return Object(u.a)(e,t),Object(a.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,i=this._interactiveState.startPanLngLat||this._unproject(n);if(!i)return this;var a=this._calculateNewLngLat({startPanLngLat:i,pos:e}),o=Object(r.a)(a,2),s=o[0],u=o[1];return this._getUpdatedState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=void 0===e?0:e,r=t.deltaScaleY,i=void 0===r?0:r,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:o,startPitch:s}),c=u.pitch,l=u.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,i=t.scale,a=this._interactiveState,o=a.startZoom,s=a.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e));var u=this._calculateNewZoom({scale:i,startZoom:o}),c=new f.c(Object.assign({},this._viewportProps,{zoom:u})).getMapCenterByLngLatPosition({lngLat:s,pos:e}),l=Object(r.a)(c,2),h=l[0],d=l[1];return this._getUpdatedState({zoom:u,longitude:h,latitude:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object(c.h)(r,n,e);var i=t.maxPitch,a=t.minPitch,o=t.pitch;return t.pitch=Object(c.h)(o,a,i),Object.assign(t,Object(f.l)(t)),t}},{key:"_unproject",value:function(t){var e=new f.c(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new f.c(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom,o=n+Math.log2(e);return Object(c.h)(o,a,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Object(c.h)(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(o-i)),{pitch:u,bearing:r+180*e}}}]),e}(h.a),S=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,P,t))).invertPan=!0,n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"_getTransitionProps",value:function(){return g}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,i=this.getCenter(t),a=Object(r.a)(i,2)[1],o=a-n,s=this.controllerState.getViewportProps(),u=s.width,c=s.height,l=e/u,h=0;n>0?Math.abs(c-o)>5&&(h=n/(o-c)*1.2):n<0&&o>5&&(h=1-a/o),h=Math.min(1,Math.max(-1,h));var f=this.controllerState.rotate({deltaScaleX:l,deltaScaleY:h});return this.updateViewport(f,y,{isDragging:!0,isRotating:!0})}}]),e}(l.a)},BK7i:function(t,e,n){var r=n("P8UN"),i=n("+Gmq"),a=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(a(t)+a(-t))}})},BQ9P:function(t,e,n){"use strict";n("E5k/"),n("AqHK"),n("CtJk");var r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var i={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){var n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;return t.pickingHighlightColor&&(e.picking_uHighlightColor=t.pickingHighlightColor.map((function(t){return t/255}))),void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}};e.a=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},i)},F8bt:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return g})),n.d(e,"e",(function(){return y}));n("5irr"),n("YBKJ"),n("9ZhD"),n("vJvp");var r=n("b0ih"),i=n("c9N0");function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t,e){var n=t%e;return n<0?e+n:n}function s(t){var e=t.viewMatrix,n=t.viewMatrixInverse;return{eye:[n[12],n[13],n[14]],direction:[-e[2],-e[6],-e[10]],up:[e[1],e[5],e[9]],right:[e[0],e[4],e[8]]}}var u,c=new i.e,l=new i.e,h=new i.e,f=new i.e,d=new i.e,p=new i.e,v=new i.e;function g(t){var e=t.aspect,n=t.near,r=t.far,a=t.fovyRadians,o=t.position,s=t.direction,u=t.up,g=t.right;l.copy(s);var y=1/l.len();l.normalize(),c.copy(o),h.copy(u);var m=1/h.len();h.normalize(),f.copy(g).normalize();var b=2*Math.tan(a/2)*n*m,w=b*e;d.copy(l).scale(n*y).add(c),p.copy(l).scale(r*y).add(c);var _=l.clone().negate(),O=_.dot(d),j={near:{distance:O,normal:_},far:{distance:l.dot(p),normal:l.clone()}};return v.copy(f).scale(.5*w).add(d).subtract(c).normalize(),_=new i.e(v).cross(h),O=c.dot(_),j.right={normal:_,distance:O},v.copy(f).scale(.5*-w).add(d).subtract(c).normalize(),_=new i.e(h).cross(v),O=c.dot(_),j.left={normal:_,distance:O},v.copy(h).scale(.5*b).add(d).subtract(c).normalize(),_=new i.e(f).cross(v),O=c.dot(_),j.top={normal:_,distance:O},v.copy(h).scale(.5*-b).add(d).subtract(c).normalize(),_=new i.e(v).cross(f),O=c.dot(_),j.bottom={normal:_,distance:O},j}function y(t,e){var n=e.size,i=void 0===n?1:n,a=e.startIndex,o=void 0===a?0:a,s=e.endIndex;Number.isFinite(s)||(s=t.length);var c=(s-o)/i;u=r.a.allocate(u,c,{type:Float32Array,size:2*i});for(var l,h=o,f=0;h<s;){for(var d=0;d<i;d++){var p=t[h++];u[f+d]=p,u[f+d+i]=(l=p)-Math.fround(l)}f+=2*i}return u.subarray(0,c*i*2)}},FR1t:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));n("5irr"),n("E5k/");var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("ReuC"),u=n("Ji7U"),c=n("K4gp"),l=n("91Zk"),h=n("BQ9P"),f=n("K7jV"),d=n("ykdB"),p=n("0i8A"),v=[0,0,0,255],g=[0,0,1],y={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(t){return t.position}},getNormal:{type:"accessor",value:g},getColor:{type:"accessor",value:v},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};var m=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(i.a)(e,[{key:"getShaders",value:function(t){return Object(s.a)(Object(o.a)(e.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * radiusPixels, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a,h.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:g},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:v}})}},{key:"updateState",value:function(t){var n,r,i,a=t.props,u=t.oldProps,c=t.changeFlags;if(Object(s.a)(Object(o.a)(e.prototype),"updateState",this).call(this,{props:a,oldProps:u,changeFlags:c}),c.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),this.getAttributeManager().invalidateAll()}c.dataChanged&&(n=a.data,r=n.header,i=n.attributes,r&&i&&(n.length=r.vertexCount,i.POSITION&&(i.instancePositions=i.POSITION),i.NORMAL&&(i.instanceNormals=i.NORMAL),i.COLOR_0&&(i.instanceColors=i.COLOR_0)))}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,r=this.props,i=r.pointSize,a="meters"===r.sizeUnits?1/n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},e,{radiusPixels:i*a})).draw()}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<3;n++){var r=n/3*Math.PI*2;e.push(2*Math.cos(r),2*Math.sin(r),0)}return new d.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}))}}]),e}(f.a);m.layerName="PointCloudLayer",m.defaultProps=y},Fdud:function(t,e,n){var r=n("P8UN"),i=Math.imul;r(r.S+r.F*n("96qb")((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,a=65535&r;return 0|i*a+((65535&n>>>16)*a+i*(65535&r>>>16)<<16>>>0)}})},H7XF:function(t,e,n){"use strict";n("sc67"),n("CtJk"),e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),o=r[0],s=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),l=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},HDXh:function(t,e,n){"use strict";(function(t){n("HXzo"),n("sC2a"),n("nMRu"),n("YBKJ"),n("gu/5"),n("eoYm"),n("lFjb"),n("sc67"),n("Ll4R"),n("q8oJ"),n("C9fy"),n("8npG"),n("n0hJ"),n("R48M"),n("m210"),n("4DPX"),n("CtJk");var r=n("H7XF"),i=n("kVK+"),a=n("49sm");function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(t,a+f)!==c(e,f)){h=!1;break}if(h)return a}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function w(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function O(t,e,n,r){return _(t,e,n,r)}function j(t,e,n,r){return V(B(e),t,n,r)}function k(t,e,n,r){return V(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function P(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=t[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){a=c[h],o=l[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return j(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function E(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=z(t[a]);return i}function A(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,a){return a||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,a){return a||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:U(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function B(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n("yLpj"))},I3n7:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));n("m210"),n("4DPX");var r={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},i={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")}},"Jh/b":function(t,e,n){"use strict";var r=n("d3wX");e.a=new r.a({id:"deck"})},K4gp:function(t,e,n){"use strict";var r=n("hJkN");e.a={name:"project32",dependencies:[r.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},K7jV:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ae}));n("n7j8"),n("YBKJ"),n("pncC"),n("R48M"),n("pS08"),n("MIFh"),n("m210"),n("4DPX"),n("rzGZ"),n("CtJk"),n("E5k/"),n("pJf4"),n("HOSt"),n("DrhF");var r=n("ODXe"),i=n("1OyB"),a=n("vuIU"),o=n("md7G"),s=n("foSv"),u=n("Ji7U"),c=n("V3d6"),l=(n("JHok"),n("ofTv"),n("9ZhD"),n("v9g0"),n("rePB")),h=n("ReuC"),f=(n("AqHK"),n("zZTu"),n("5irr"),n("n0hJ"),n("+ar0"),n("xtjI"),n("OeI1"),n("Dq+y"),n("8npG"),n("Ggvi"),n("d3kR")),d=n("tMmZ"),p=n("sc/6");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var g=function(){function t(e,n){Object(i.a)(this,t),this.opts=n,this.source=e}return Object(a.a)(t,[{key:"getValue",value:function(){var t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];var n=this.source.value,r=e.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var a=e.elementOffset||0,o=0;o<r;++o)i[o]=n[a+o]}return i}},{key:"getAccessor",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.source.getAccessor(),{},this.opts)}},{key:"value",get:function(){return this.source.value}}]),t}();n("6nXr"),n("AItV"),n("88iX"),n("SIeT"),n("h3Sa");var y=n("b0ih"),m=n("F8bt"),b=n("Jh/b");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t){return t.stride||t.size*t.bytesPerElement}function j(t,e){e.offset&&b.a.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=O(t);return _({},e,{offset:("vertexOffset"in e?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0),stride:n})}var k=function(){function t(e,n){Object(i.a)(this,t),this.gl=e,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,a=5130===r,o=n.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),n.defaultValue=o;var s=r;a?s=5126:!s&&n.isIndexed?s=e&&Object(f.b)(e,d.a.ELEMENT_INDEX_UINT32)?5125:5123:s||(s=5126),n.logicalType=r,n.type=s;var u=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||s||5126);this.shaderAttributes={},this.doublePrecision=a,a&&!1===n.fp64&&(u=Float32Array),n.bytesPerElement=u.BYTES_PER_ELEMENT,this.defaultType=u,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}return Object(a.a)(t,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),y.a.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(t,e){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=(a=this.getAccessor(),{high:o=j(a,e||{}),low:_({},o,{offset:o.offset+4*a.size})});return n[t]=new g(this,i.high),n["".concat(t,"64Low")]=r?new g(this,i.low):new Float32Array(this.size),n}var a,o;if(e){var s=j(this.getAccessor(),e);return Object(l.a)({},t,new g(this,s))}return Object(l.a)({},t,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(t){var e=this.state;ArrayBuffer.isView(t)?t={value:t}:t instanceof p.a&&(t={buffer:t});var n=_({},this.settings,{},t);if(e.bufferAccessor=n,t.constant){var r=t.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!e.constant||!this._areValuesEqual(r,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=r}else if(t.buffer){var i=t.buffer;e.externalBuffer=i,e.constant=!1,this.value=t.value;var a=t.value instanceof Float64Array;n.type=t.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(a?2:1),n.stride=O(n)}else if(t.value){this._checkExternalBuffer(t);var o=t.value;e.externalBuffer=null,e.constant=!1,this.value=o,n.bytesPerElement=o.BYTES_PER_ELEMENT,n.stride=O(n);var s=this.buffer,u=this.byteOffset;this.doublePrecision&&o instanceof Float64Array&&(o=Object(m.e)(o,n)),s.byteLength<o.byteLength+u&&s.reallocate(2*(o.byteLength+u)),s.setAccessor(null),s.subData({data:o,offset:u}),n.type=t.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.value,n=t.startOffset,r=void 0===n?0:n,i=t.endOffset;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?Object(m.e)(e,{size:this.size,startIndex:r,endIndex:i}):e.subarray(r,i),offset:r*e.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(t){var e=t.numInstances,n=t.copy,r=void 0!==n&&n,i=this.state,a=i.allocatedValue,o=y.a.allocate(a,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=o;var s=this.buffer,u=this.byteOffset;return s.byteLength<o.byteLength+u&&(s.reallocate(o.byteLength+u),r&&a&&s.subData({data:a instanceof Float64Array?Object(m.e)(a,this):a,offset:u})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(t){var e=t.value;if(!t.constant&&e){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||b.a.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((function(t){return(t+128)/255*2-1}));case 5122:return new Float32Array(t).map((function(t){return(t+32768)/65535*2-1}));case 5121:return new Float32Array(t).map((function(t){return t/255}));case 5123:return new Float32Array(t).map((function(t){return t/65535}));default:return t}}},{key:"_normalizeValue",value:function(t,e,n){var r=this.settings,i=r.defaultValue,a=r.size;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=i[0],e;switch(a){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:for(var o=a;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:i[o]}return e}},{key:"_areValuesEqual",value:function(t,e){if(!t||!e)return!1;for(var n=this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var t=this.settings,e=t.isIndexed,n=t.type;this._buffer=new p.a(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var t=this.getAccessor();return t.vertexOffset?t.vertexOffset*O(t):0}}]),t}(),P=n("VMBB"),S=n("rpwb"),x=n("Zk56"),T=[],E=[[0,1/0]];function A(t,e){if(t===E)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;for(var n=[],r=t.length,i=0,a=0;a<r;a++){var o=t[a];o[1]<e[0]?(n.push(o),i=a+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function C(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,a=t.end,o=t.getData;a=a||n.length;var s=e.length,u=a-i;if(s>u)n.set(e.subarray(0,u),i);else if(n.set(e,i),o)for(var c=s;c<u;)for(var l=o(c,e),h=0;h<l.length;h++)n[i+c]=l[h],c++}var M={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function I(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",Object.assign({},M[t.type],e,t)):null}function R(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function L(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function D(t){t.push(t.shift())}function N(t,e){var n=t.doublePrecision,r=t.settings,i=t.value,a=t.size,o=n?2:1;return(r.noAlloc?i.length:e*a)*o}function F(t){var e=t.buffer,n=t.numInstances,r=t.attribute,i=t.fromLength,a=t.fromStartIndices,o=t.getData,s=void 0===o?function(t){return t}:o,u=r.doublePrecision?2:1,c=r.size*u,l=r.byteOffset,h=r.startIndices,f=a&&h,d=N(r,n),p=r.state.constant;if(f||!(i>=d)){var v=p?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!p){var g=s;s=function(t,e){return r._normalizeConstant(g(t,e))}}var y=p?function(t,e){return s(v,e)}:function(t,e){return s(v.subarray(t,t+c),e)},m=e.getData({length:i}),b=new Float32Array(d);!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,a=t.sourceStartIndices,o=t.targetStartIndices;if(!Array.isArray(o))return C({source:e,target:n,getData:i}),n;for(var s=0,u=0,c=i&&function(t,e){return i(t+u,e)},l=Math.min(a.length,o.length),h=1;h<l;h++){var f=a[h]*r,d=o[h]*r;C({source:e.subarray(s,f),target:n,start:u,end:d,getData:c}),s=f,u=d}u<n.length&&C({source:[],target:n,start:u,getData:c})}({source:m,target:b,sourceStartIndices:a,targetStartIndices:h,size:c,getData:y}),e.byteLength<b.byteLength+l&&e.reallocate(b.byteLength+l),e.subData({data:b,offset:l})}}var z=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e),n=Object(o.a)(this,Object(s.a)(e).call(this,t,r));var a=r.transition,u=void 0!==a&&a,c=r.noAlloc,l=void 0!==c&&c,h=r.update,f=void 0===h?null:h,d=r.accessor,p=void 0===d?null:d,v=r.transform,g=void 0===v?null:v,y=r.startIndices,m=void 0===y?null:y;return Object.assign(n.settings,{transition:u,noAlloc:l,update:f||p&&n._autoUpdater,accessor:p,transform:g}),Object.assign(n.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:E,startIndices:m}),Object.seal(n.settings),Object.seal(n.state),n._validateAttributeUpdaters(),n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearChangedFlags,n=void 0!==e&&e,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var t=this.settings.accessor;return[this.id].concat("function"!=typeof t&&t||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(t){var e=this.settings.accessor,n=this.settings.transition;return this.supportsTransition()?I(Array.isArray(e)?t[e.find((function(e){return t[e]}))]:t[e],n):null}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){var n=e.startRow,r=void 0===n?0:n,i=e.endRow,a=void 0===i?1/0:i;this.state.updateRanges=A(this.state.updateRanges,[r,a])}else this.state.updateRanges=E}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=T}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}},{key:"update",value:function(t){this.setData(t)}},{key:"allocate",value:function(t){var n=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&(Object(P.a)(Number.isFinite(t)),Object(h.a)(Object(s.a)(e.prototype),"allocate",this).call(this,{numInstances:t,copy:n.updateRanges!==E}),!0))}},{key:"updateBuffer",value:function(t){var n=t.numInstances,i=t.data,a=t.props,o=t.context;if(!this.needsUpdate())return!1;var u=this.state.updateRanges,c=this.settings,l=c.update,f=c.noAlloc,d=!0;if(l){var p=!0,v=!1,g=void 0;try{for(var y,m=u[Symbol.iterator]();!(p=(y=m.next()).done);p=!0){var b=Object(r.a)(y.value,2),w=b[0],_=b[1];l.call(o,this,{data:i,startRow:w,endRow:_,props:a,numInstances:n})}}catch(M){v=!0,g=M}finally{try{p||null==m.return||m.return()}finally{if(v)throw g}}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var O=!0,j=!1,k=void 0;try{for(var P,S=u[Symbol.iterator]();!(O=(P=S.next()).done);O=!0){var x=Object(r.a)(P.value,2),T=x[0],E=x[1],A=Number.isFinite(T)?this.getVertexOffset(T):0,C=Number.isFinite(E)?this.getVertexOffset(E):f||!Number.isFinite(n)?this.value.length:n*this.size;Object(h.a)(Object(s.a)(e.prototype),"updateSubBuffer",this).call(this,{startOffset:A,endOffset:C})}}catch(M){j=!0,k=M}finally{try{O||null==S.return||S.return()}finally{if(j)throw k}}}else;this._checkAttributeArray()}else d=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),d}},{key:"setConstantValue",value:function(t){return void 0!==t&&"function"!=typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(t){var e=this.state;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw(),ArrayBuffer.isView(t)&&(t={value:t});var i=r.transform||e!==this.startIndices;if(i){Object(P.a)(ArrayBuffer.isView(t.value),"invalid ".concat(r.accessor));var a=t.size&&t.size!==this.size;return n.binaryAccessor=Object(S.b)(t.value,{size:t.size||this.size,stride:t.stride,offset:t.offset,startIndices:e,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}},{key:"getVertexOffset",value:function(t){var e=this.startIndices;return(e?e[t]:t)*this.size}},{key:"getShaderAttributes",value:function(){var t=this.settings.shaderAttributes||Object(l.a)({},this.id,null),n={};for(var r in t)Object.assign(n,Object(h.a)(Object(s.a)(e.prototype),"getShaderAttributes",this).call(this,r,t[r]));return n}},{key:"_autoUpdater",value:function(t,e){var n=e.data,r=e.startRow,i=e.endRow,a=e.props,o=e.numInstances,s=t.settings,u=t.state,c=t.value,l=t.size,h=t.startIndices,f=s.accessor,d=s.transform,p=u.binaryAccessor||("function"==typeof f?f:a[f]);Object(P.a)("function"==typeof p,'accessor "'.concat(f,'" is not a function'));var v=t.getVertexOffset(r),g=Object(S.a)(n,r,i),y=g.iterable,m=g.objectInfo,b=!0,w=!1,_=void 0;try{for(var O,j=y[Symbol.iterator]();!(b=(O=j.next()).done);b=!0){var k=O.value;m.index++;var T=p(k,m);if(d&&(T=d.call(this,T)),h){var E=(h[m.index+1]||o)-h[m.index];if(T&&Array.isArray(T[0])){var A=v,C=!0,M=!1,I=void 0;try{for(var R,L=T[Symbol.iterator]();!(C=(R=L.next()).done);C=!0){var D=R.value;t._normalizeValue(D,c,A),A+=l}}catch(N){M=!0,I=N}finally{try{C||null==L.return||L.return()}finally{if(M)throw I}}}else T&&T.length>l?c.set(T,v):(t._normalizeValue(T,m.target,0),Object(x.a)({target:c,source:m.target,start:v,count:E}));v+=E*l}else t._normalizeValue(T,c,v),v+=l}}catch(N){w=!0,_=N}finally{try{b||null==j.return||j.return()}finally{if(w)throw _}}t.constant=!1}},{key:"_validateAttributeUpdaters",value:function(){var t=this.settings;if(!(t.noAlloc||"function"==typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value,e=Math.min(4,this.size);if(t&&t.length>=e){var n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(t){this.state.startIndices=t}}]),e}(k),U=n("hZZG"),B=(n("gu/5"),n("eoYm"),n("sC2a"),n("HQhv"),n("uzDn")),V="void main() {gl_FragColor = vec4(0);}",Y="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",G="#version 300 es\n".concat(Y);function Z(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),i=Object(r.a)(n,3),a=i[0],o=i[1],s=i[2];return e.includes(a)&&o&&s?{qualifier:a,type:o,name:s.split(";")[0]}:null}function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,a=t.output;if(!r)return 300===n?G:n>300?"#version ".concat(n,"\n").concat(Y):V;var o=q(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function H(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(B.a)(!1),null}}function q(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Object(B.a)(!1),null}}var W=n("iein"),J=n("bphH"),K=n("CxzY"),Q=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(a.a)(t,[{key:"setupResources",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this._setupTransformFeedback(o,t)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:"getBuffer",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof p.a?n:n.buffer:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:"delete",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(K.a)(Object(W.f)(this.gl))}},{key:"_getFeedbackBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in n&&(r[a]=i)}for(var o in Object.assign(r,t.feedbackBuffers),r){var s=r[o];if("string"==typeof s){var u=n[s],c=u.byteLength,l=u.usage,h=u.accessor;r[o]=this._createNewBuffer(o,{byteLength:c,usage:l,accessor:h})}}return r}},{key:"_setupBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(t,e){var n=e.model.program;t.transformFeedback=new J.a(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:"_swapBuffers",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Object(K.a)(n[i]instanceof p.a)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(t,e){var n=new p.a(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}(),$=n("p7wt"),tt=n("f5Sf"),et=n("11Ib"),nt=n("MdWm");n("Ll4R");function rt(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var it,at=n("rpxL"),ot={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function st(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,a=Object.keys(n).length,o=null,s={},u=e,c={};if(a>0||r){var l=u.split("\n"),h=l.slice();if(l.forEach((function(t,e,i){if(a>0){var u=function(t,e){var n={},r=function(t){return Z(t,["attribute","in"])}(t);if(!r)return null;var i=r.type,a=r.name;if(a&&e[a]){var o="// ".concat(t," => Replaced by Transform with a sampler"),s=function(t){var e="".concat("transform_uSampler_").concat(t),n="".concat("transform_uSize_").concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(a),u=s.samplerName,c=s.sizeName,l=s.uniformDeclerations,h=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(B.a)(!1),null}}(i),f="  ".concat(i," ").concat(a," = transform_getInput(").concat(u,", ").concat(c,").").concat(h,";\n");return n[u]=a,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":f},samplerTextureMap:n}}return null}(t,n);if(u){var l=u.updatedLine,f=u.inject;h[e]=l,c=Object(at.b)([c,f]),Object.assign(s,u.samplerTextureMap),a--}}r&&!o&&(o=function(t,e){var n=Z(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Object(K.a)(i);var f="".concat("transform_uSize_").concat(r),d={"vs:#decl":"uniform vec2 ".concat(f,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(f,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};c=Object(at.b)([c,d])}u=h.join("\n")}return{vs:u,targetTextureType:o,inject:c,samplerTextureMap:s}}function ut(t){var e,n,r=t.sourceTextureMap,i=t.targetTextureVarying,a=t.targetTexture,o={};for(var s in i&&(e=a.width,n=a.height,o["".concat("transform_uSize_").concat(i)]=[e,n]),r){var u=r[s];e=u.width,n=u.height,o["".concat("transform_uSize_").concat(s)]=[e,n]}return o}var ct=(it={},Object(l.a)(it,10241,9728),Object(l.a)(it,10240,9728),Object(l.a)(it,10242,33071),Object(l.a)(it,10243,33071),it),lt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.gl=e,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(a.a)(t,[{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.sourceTextures,i=e.framebuffer,a=e.targetTexture,o=Object.assign({},n,t.attributes),s=Object.assign({},t.uniforms),u=Object.assign({},t.parameters),c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var l in o.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var h=this.samplerTextureMap[l];s[l]=r[h]}this._setSourceTextureParameters();var f=ut({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:a});Object.assign(s,f)}return this.hasTargetTexture&&(c=!1,u.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:s,discard:c,parameters:u}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=Object($.b)(r);if(!n)return i;for(var a=i.constructor,o=H(this.targetTextureType),s=new a(i.length*o/4),u=0,c=0;c<i.length;c+=4)for(var l=0;l<o;l++)s[u++]=i[c+l];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:"_createTargetTexture",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof tt.a)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=t._sourceTextures,r=void 0===n?{}:n,i=t._targetTexture,a=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:a}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:"_updateElementIDBuffer",value:function(t){if(!("number"!=typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new p.a(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(t,e){var n=e.sourceBuffers,r=e.sourceTextures,i=e.targetTexture;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;var a=i.width,o=i.height,s=t.framebuffer;s?(s.update({attachments:Object(l.a)({},36064,i),resizeAttachments:!1}),s.resize({width:a,height:o})):t.framebuffer=new et.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:a,height:o,attachments:Object(l.a)({},36064,i)})}return t}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(ct)}},{key:"_swapTextures",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(t){var e,n=Object(nt.a)(t,{parameters:(e={},Object(l.a)(e,10241,9728),Object(l.a)(e,10240,9728),Object(l.a)(e,10242,33071),Object(l.a)(e,10243,33071),e),pixelStore:Object(l.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=st({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),a=i.vs,o=i.uniforms,s=i.targetTextureType,u=i.inject,c=i.samplerTextureMap,l=Object(at.b)([t.inject||{},u]);this.targetTextureType=s,this.samplerTextureMap=c;var h=t._fs||X({version:rt(a),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),f=this.hasSourceTextures||this.targetTextureVarying?[ot].concat(t.modules||[]):t.modules;return{vs:a,fs:h,modules:f,uniforms:o,inject:l}}}]),t}(),ht=n("VdrS"),ft=n("ykdB"),dt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(a.a)(t,null,[{key:"isSupported",value:function(t){return Object(W.f)(t)}}]),Object(a.a)(t,[{key:"delete",value:function(){var t=this.model,e=this.bufferTransform,n=this.textureTransform;t&&t.delete(),e&&e.delete(),n&&n.delete()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var t=!1,e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t||s.swap()}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}Object(K.a)(t,"Nothing to swap")}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.getData(t);if(u)return u}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);var e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.update(t)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new ft.a(e,Object.assign({},t,{fs:t.fs||X({version:rt(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){e=o.value.updateModelProps(e)}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}},{key:"_buildResourceTransforms",value:function(t,e){(function(t){if(!Object(ht.a)(t.feedbackBuffers)||!Object(ht.a)(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new Q(t,e)),function(t){if(!Object(ht.a)(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new lt(t,e)),Object(K.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e=Object.assign(e,u.getDrawOptions(e))}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}}]),t}();var pt=n("n6ox");function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt=function(){function t(e){var n=e.gl,r=e.attribute,a=e.timeline;Object(i.a)(this,t),this.gl=n,this.type="interpolation",this.transition=new pt.a(a),this.attribute=r,this.attributeInTransition=new z(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(t,e){var n=L(e.size);return new dt(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var o={byteLength:0,usage:35050};this.buffers=[new p.a(n,o),new p.a(n,o)]}return Object(a.a)(t,[{key:"start",value:function(t,e){if(t.duration<=0)this.transition.cancel();else{this.gl;var n=this.buffers,r=this.attribute;D(n);var i={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){F(gt({buffer:u.value},i))}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}this.currentStartIndices=r.startIndices,this.currentLength=N(r,e),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:R(0,r)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var e=this.transition,n=e.time,r=e.settings,i=r.duration,a=(0,r.easing)(n/i);this.transform.run({uniforms:{time:a}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}();function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wt={interpolation:yt,spring:function(){function t(e){var n=e.gl,r=e.attribute,a=e.timeline;Object(i.a)(this,t),this.gl=n,this.type="spring",this.transition=new pt.a(a),this.attribute=r,this.attributeInTransition=new z(n,Object.assign({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(t){return new tt.a(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(t,e){return new et.a(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(l.a)({},36064,e)})}(n,this.texture),this.transform=function(t,e,n){var r=L(e.size);return new dt(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var o={byteLength:0,usage:35050};this.buffers=[new p.a(n,o),new p.a(n,o),new p.a(n,o)]}return Object(a.a)(t,[{key:"start",value:function(t,e){this.gl;var n=this.buffers,r=this.attribute,i={numInstances:e,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){F(bt({buffer:u.value},i))}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}this.currentStartIndices=r.startIndices,this.currentLength=N(r,e),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aTo:R(0,r)}})}},{key:"update",value:function(){var t=this.buffers,e=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),D(t),this.attributeInTransition.update({buffer:t[1],value:this.attribute.value}),Object($.b)(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),t}()},_t=function(){function t(e,n){var r=n.id,a=n.timeline;Object(i.a)(this,t),this.id=r,this.gl=e,this.timeline=a,this.transitions={},this.needsRedraw=!1,this.numInstances=1,dt.isSupported(e)?this.isSupported=!0:e&&b.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(a.a)(t,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=void 0===n?{}:n,i=t.numInstances;if(this.numInstances=i||1,this.isSupported){for(var a in e){var o=e[a],s=o.getTransitionSetting(r);s&&this._updateAttribute(a,o,s)}for(var u in this.transitions){var c=e[u];c&&c.getTransitionSetting(r)||this._removeTransition(u)}}}},{key:"hasAttribute",value:function(t){var e=this.transitions[t];return e&&e.inProgress}},{key:"getAttributes",value:function(){var t={};for(var e in this.transitions){var n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}var e=this.needsRedraw;return this.needsRedraw=!1,e}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,e,n){var r=this.transitions[t],i=!r||r.type!==n.type;if(i){r&&this._removeTransition(t);var a=wt[n.type];a?this.transitions[t]=new a({attribute:e,timeline:this.timeline,gl:this.gl}):(b.a.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}]),t}(),Ot=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,a=void 0===r?"attribute-manager":r,o=n.stats,s=n.timeline;Object(i.a)(this,t),this.id=a,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new _t(e,{id:"".concat(a,"-transitions"),timeline:s}),Object.seal(this)}return Object(a.a)(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t,e){var n=this._invalidateTrigger(t,e);Object(U.a)("attributeManager.invalidate",this,t,n)}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);Object(U.a)("attributeManager.invalidate",this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.startIndices,i=void 0===r?null:r,a=t.transitions,o=t.props,s=void 0===o?{}:o,u=t.buffers,c=void 0===u?{}:u,l=t.context,h=void 0===l?{}:l,f=!1;for(var d in Object(U.a)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var p=this.attributes[d],v=p.settings.accessor;p.startIndices=i,s[d]&&b.a.removed("props.".concat(d),"data.attributes.".concat(d))(),p.setExternalBuffer(c[d])||p.setBinaryValue(c[v],e.startIndices)||!c[v]&&p.setConstantValue(s[v])||p.needsUpdate()&&(f=!0,this._updateAttribute({attribute:p,numInstances:n,data:e,props:s,context:h})),this.needsRedraw|=p.needsRedraw()}f&&Object(U.a)("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:a})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in e){var a=e[i];a.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=a)}return r}},{key:"getShaderAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var n={};for(var r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&b.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in t){var a=t[i],o=this._createAttribute(i,a,n);r[i]=o}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,n){var r={id:t,constant:e.constant||!1,isIndexed:e.isIndexed||e.elements,size:e.elements?1:e.size,value:e.value||null,divisor:e.instanced||n.instanced?1:e.divisor};return new z(this.gl,Object.assign({},e,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t,e){var n=this.attributes,r=this.updateTriggers[t];return r&&r.forEach((function(t){var r=n[t];r&&r.setNeedsUpdate(r.id,e)})),r}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances;Object(U.a)("attribute.updateStart",e),e.allocate(n)&&Object(U.a)("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,Object(U.a)("attribute.updateEnd",e,n))}}]),t}(),jt=(n("YbXK"),n("xJgp"),n("c9N0")),kt=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(a.a)(e,[{key:"_onUpdate",value:function(){var t=this.time,e=this.settings,n=e.fromValue,r=e.toValue,i=e.duration,a=(0,e.easing)(t/i);this._value=Object(jt.l)(n,r,a)}},{key:"value",get:function(){return this._value}}]),e}(pt.a);function Pt(t,e,n,r,i){var a=e-t;return(n-e)*i+-a*r+a+e}function St(t,e){if(Array.isArray(t)){for(var n=0,r=0;r<t.length;r++){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Tt={interpolation:kt,spring:function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(a.a)(e,[{key:"_onUpdate",value:function(){var t=this.settings,e=t.fromValue,n=t.toValue,r=t.damping,i=t.stiffness,a=this._prevValue,o=void 0===a?e:a,s=this._currValue,u=void 0===s?e:s,c=function(t,e,n,r,i){if(Array.isArray(n)){for(var a=[],o=0;o<n.length;o++)a[o]=Pt(t[o],e[o],n[o],r,i);return a}return Pt(t,e,n,r,i)}(o,u,n,r,i),l=St(c,n),h=St(c,u);l<1e-5&&h<1e-5&&(c=n,this.end()),this._prevValue=u,this._currValue=c}},{key:"value",get:function(){return this._currValue}}]),e}(pt.a)},Et=function(){function t(e){Object(i.a)(this,t),this.transitions=new Map,this.timeline=e}return Object(a.a)(t,[{key:"add",value:function(t,e,n,r){var i=this.transitions;i.has(t)&&(e=i.get(t).value,this.remove(t));if(r=I(r)){var a=Tt[r.type];if(a){var o=new a(this.timeline);o.start(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r,{fromValue:e,toValue:n})),i.set(t,o)}else b.a.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(t){var e=this.transitions;e.has(t)&&(e.get(t).cancel(),e.delete(t))}},{key:"update",value:function(){var t={},e=!0,n=!1,i=void 0;try{for(var a,o=this.transitions[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=Object(r.a)(a.value,2),u=s[0],c=s[1];c.update(),t[u]=c.value,c.inProgress||this.remove(u)}}catch(l){n=!0,i=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}return t}},{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.transitions.keys()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this.remove(a)}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"active",get:function(){return this.transitions.size>0}}]),t}(),At=n("U8pU"),Ct=n("I3n7"),Mt=Ct.b.COMPONENT;function It(t,e){var n=Lt({newProps:t,oldProps:e,propTypes:zt(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=null,r=t.dataComparator,i=t._dataDiff;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){if(Ft(t,e,"all"))return{all:!0}}var n={},r=!1;for(var i in t.updateTriggers){if("all"!==i)Ft(t,e,i)&&(n[i]=!0,r=n)}return r}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Nt(t,e),transitionsChanged:Rt(t,e)}}function Rt(t,e){if(!t.transitions)return null;var n={},r=zt(t);for(var i in t.transitions){var a=r[i],o=a&&a.type;("number"===o||"color"===o||"array"===o)&&Dt(t[i],e[i],a)&&(n[i]=!0)}return n}function Lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,a=t.propTypes,o=void 0===a?{}:a,s=t.triggerName,u=void 0===s?"props":s;if(n===e)return null;if("object"!==Object(At.a)(e)||null===e)return"".concat(u," changed shallowly");if("object"!==Object(At.a)(n)||null===n)return"".concat(u," changed shallowly");for(var c=0,l=Object.keys(e);c<l.length;c++){var h=l[c];if(!(h in i)){if(!(h in n))return"".concat(u,".").concat(h," added");var f=Dt(e[h],n[h],o[h]);if(f)return"".concat(u,".").concat(h," ").concat(f)}}for(var d=0,p=Object.keys(n);d<p.length;d++){var v=p[d];if(!(v in i)){if(!(v in e))return"".concat(u,".").concat(v," dropped");if(!Object.hasOwnProperty.call(e,v)){var g=Dt(e[v],n[v],o[v]);if(g)return"".concat(u,".").concat(v," ").concat(g)}}}return null}function Dt(t,e,n){var r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||!(r=t&&e&&t.equals)||r.call(t,e)?r||e===t?null:"changed shallowly":"changed deeply"}function Nt(t,e){if(null===e)return"oldProps is null, initial diff";var n=e.extensions,r=t.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Ft(t,e,n){var r=t.updateTriggers[n];r=null==r?{}:r;var i=e.updateTriggers[n];return Lt({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function zt(t){var e=t[Mt],n=e&&e.constructor;return n?n._propTypes:{}}function Ut(t){if(null===(e=t)||"object"!==Object(At.a)(e))throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===Object(At.a)(t)&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}n("zTTH"),n("wZFJ");function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t,e){if(!e)return t;var n=Object.assign({},t,e);if("defines"in e&&(n.defines=Object.assign({},t.defines,e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((function(t){return"project64"===t.name})))){var r=n.modules.findIndex((function(t){return"project32"===t.name}));r>=0&&n.modules.splice(r,1)}if("inject"in e)if(t.inject){var i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.inject);for(var a in e.inject)i[a]=(i[a]||"")+e.inject[a];n.inject=i}else n.inject=e.inject;return n}var Yt=n("V8ep"),Gt=n("bl9R"),Zt=n("n+fv"),Xt=n("v88f");function Ht(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(r.a)(t,3),a=i[0],o=i[1],s=i[2],u=void 0===s?0:s,c=e.projectFlat(t),l=Object(r.a)(c,2),h=l[0],f=l[1],d=e.getDistanceScales(n&&[a,o]),p=u*d.unitsPerMeter[2];return[h,f,p]}function qt(t,e){var n=e.viewport,i=e.modelMatrix,a=e.coordinateSystem,o=e.coordinateOrigin,s=e.offsetMode,u=Object(r.a)(t,3),l=u[0],h=u[1],f=u[2];if(i){var d=Gt.n([],[l,h,f,1],i),p=Object(r.a)(d,3);l=p[0],h=p[1],f=p[2]}switch(a){case c.a.LNGLAT:return Ht([l,h,f],n,s);case c.a.LNGLAT_OFFSETS:return Ht([l+o[0],h+o[1],f+(o[2]||0)],n,s);case c.a.METER_OFFSETS:return Ht(Object(Xt.b)(o,[l,h,f]),n,s);case c.a.CARTESIAN:default:return n.isGeospatial?[l,h,f]:n.projectPosition([l,h,f])}}function Wt(t,e){var n=function(t){var e=Object.assign({},t),n=t.coordinateSystem,r=t.viewport,i=t.coordinateOrigin,a=t.fromCoordinateSystem,o=t.fromCoordinateOrigin;return n===c.a.DEFAULT&&(n=r.isGeospatial?c.a.LNGLAT:c.a.CARTESIAN),void 0===a&&(e.fromCoordinateSystem=n),void 0===o&&(e.fromCoordinateOrigin=i),e.coordinateSystem=n,e}(e),r=n.viewport,i=n.coordinateSystem,a=n.coordinateOrigin,o=n.modelMatrix,s=n.fromCoordinateSystem,u=n.fromCoordinateOrigin,l=Object(Yt.a)(r,i,a),h=l.geospatialOrigin,f=l.shaderCoordinateOrigin,d=l.offsetMode,p=qt(t,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:d});if(d){var v=r.projectPosition(h||f);Zt.m(p,p,v)}return p}n("6kNP"),n("PZd/");var Jt={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return e.optional&&!t||te(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return Kt(t,e)}},accessor:{validate:function(t,e){var n=ee(t);return"function"===n||n===ee(e.value)},equal:function(t,e,n){return"function"==typeof e||Kt(t,e)}},array:{validate:function(t,e){return e.optional&&!t||te(t)},equal:function(t,e,n){return n.compare?Kt(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"==typeof t},equal:function(t,e,n){return!n.compare||t===e}}};function Kt(t,e){if(t===e)return!0;if(!te(t)||!te(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Qt(t,e){switch(ee(e)){case"object":return $t(t,e);case"array":return $t(t,{type:"array",value:e,compare:!1});case"boolean":return $t(t,{type:"boolean",value:e});case"number":return $t(t,{type:"number",value:e});case"function":return $t(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function $t(t,e){return"type"in e?Object.assign({name:t},Jt[e.type],e):"value"in e?Object.assign({name:t,type:ee(e.value)},e):{name:t,type:"object",value:e}}function te(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ee(t){return te(t)?"array":null===t?"null":Object(At.a)(t)}var ne=Ct.b.COMPONENT,re=Ct.b.ASYNC_ORIGINAL,ie=Ct.b.ASYNC_RESOLVED,ae=Ct.b.ASYNC_DEFAULTS;function oe(){var t=this,e=se(t.constructor),n=Object.create(e);n[ne]=t,n[re]={},n[ie]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var a in i)n[a]=i[a]}return Object.freeze(n),n}function se(t){var e=le(t,"_mergedDefaultProps");return e||(function(t){if(!t.prototype)return;var e=Object.getPrototypeOf(t),n=se(e),i=function(t){for(var e={},n={},i={},a=0,o=Object.entries(t);a<o.length;a++){var s=Object(r.a)(o[a],2),u=s[0],c=s[1];if(c&&c.deprecatedFor)i[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var l=Qt(u,c);e[u]=l,n[u]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(le(t,"defaultProps")||{}),a=function(t,e,n){var r=Object.create(null);Object.assign(r,e,t);var i=function(t){var e=le(t,"layerName")||le(t,"componentName");e||b.a.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(i.defaultProps,n,t),o=Object.assign({},e._propTypes,i.propTypes);!function(t,e){var n={},r={};for(var i in e){var a=e[i],o=a.name,s=a.value;a.async&&(n[o]=s,r[o]=ue(o))}t[ae]=n,t[re]={},Object.defineProperties(t,r)}(a,o);var s=Object.assign({},e._deprecatedProps,i.deprecatedProps);(function(t,e){var n=function(n){Object.defineProperty(t,n,{enumerable:!1,set:function(t){var r="".concat(this.id,": ").concat(n),i=!0,a=!1,o=void 0;try{for(var s,u=e[n][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;ce(this,c)||(this[c]=t)}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}b.a.deprecated(r,e[n].join("/"))()}})};for(var r in e)n(r)})(a,s),t._mergedDefaultProps=a,t._propTypes=o,t._deprecatedProps=s}(t),t._mergedDefaultProps)}function ue(t){return{enumerable:!0,set:function(e){"string"==typeof e||e instanceof Promise||Object(S.c)(e)?this[re][t]=e:this[ie][t]=e},get:function(){if(this[ie]){if(t in this[ie]){var e=this[ie][t];return"data"===t?e||this[ae][t]:e}if(t in this[re]){var n=this[ne]&&this[ne].internalState;if(n&&n.hasAsyncProp(t))return n.getAsyncProp(t)}}return this[ae][t]}}}function ce(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function le(t,e){return ce(t,e)&&t[e]}var he=n("o0o1"),fe=n.n(he),de=n("HaE+");function pe(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}var ve=Ct.b.ASYNC_ORIGINAL,ge=Ct.b.ASYNC_RESOLVED,ye=Ct.b.ASYNC_DEFAULTS,me=Object.freeze({}),be=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i.a)(this,t),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=me,this.oldAsyncProps=null}var e;return Object(a.a)(t,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){if(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"setAsyncProps",value:function(t){var e=t[ge]||{},n=t[ve]||t,r=t[ye]||{};for(var i in e){var a=e[i];this._createAsyncPropData(i,a,r[i]),this._updateAsyncProp(i,a)}for(var o in n){var s=n[o];this._createAsyncPropData(o,s,r[o]),this._updateAsyncProp(o,s)}}},{key:"_updateAsyncProp",value:function(t,e){if(this._didAsyncInputValueChange(t,e)){if("string"==typeof e){var n=this.layer&&this.layer.props.fetch;n&&(e=n(e,{propName:t,layer:this.layer}))}e instanceof Promise?this._watchPromise(t,e):Object(S.c)(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e)}}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){var n=this.asyncProps[t];n.value=e,n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this.freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this,r=this.asyncProps[t];r.pendingLoadCount++;var i=r.pendingLoadCount;e.then((function(e){e=n._postProcessValue(t,e),n._setAsyncPropValue(t,e,i);var r=n.layer&&n.layer.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n.layer})})).catch((function(t){return b.a.error(t)()}))}},{key:"_resolveAsyncIterable",value:(e=Object(de.a)(fe.a.mark((function t(e,n){var r,i,a,o,s,u,c,l,h,f,d,p;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"data"!==e&&this._setPropValue(e,n),(r=this.asyncProps[e]).pendingLoadCount++,i=r.pendingLoadCount,a=[],o=0,s=!0,u=!1,t.prev=8,l=pe(n);case 10:return t.next=12,l.next();case 12:return h=t.sent,s=h.done,t.next=16,h.value;case 16:if(f=t.sent,s){t.next=26;break}d=f,a=this._postProcessValue(e,d,a),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:o,endRow:a.length}]}),o=a.length,this._setAsyncPropValue(e,a,i);case 23:s=!0,t.next=10;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(8),u=!0,c=t.t0;case 32:if(t.prev=32,t.prev=33,s||null==l.return){t.next=37;break}return t.next=37,l.return();case 37:if(t.prev=37,!u){t.next=40;break}throw c;case 40:return t.finish(37);case 41:return t.finish(32);case 42:(p=this.layer&&this.layer.props.onDataLoad)&&p(a,{propName:e,layer:this.layer});case 44:case"end":return t.stop()}}),t,this,[[8,28,32,42],[33,,37,41]])}))),function(t,n){return e.apply(this,arguments)})},{key:"_postProcessValue",value:function(t,e,n){var r=(this.component?this.component.props:{}).dataTransform;return"data"!==t?e:r?r(e,n):n?n.concat(e):e}},{key:"_createAsyncPropData",value:function(t,e,n){this.asyncProps[t]||(this.asyncProps[t]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),t}(),we=Ct.b.ASYNC_ORIGINAL,_e=Ct.b.ASYNC_RESOLVED,Oe=Ct.b.ASYNC_DEFAULTS,je=0,ke=function(){function t(){Object(i.a)(this,t),this.props=oe.apply(this,arguments),this.id=this.props.id,this.count=je++,this.lifecycle=Ct.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(a.a)(t,[{key:"clone",value:function(t){var e=this.props,n={};for(var r in e[Oe])r in e[_e]?n[r]=e[_e][r]:r in e[we]&&(n[r]=e[we][r]);return new this.constructor(Object.assign({},e,n,t))}},{key:"_initState",value:function(){this.internalState=new be({})}},{key:"stats",get:function(){return this.internalState.stats}}]),t}();ke.componentName="Component",ke.defaultProps={};var Pe=function(t){function e(t){var n,r=t.attributeManager,a=t.layer;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,a))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return Object(u.a)(e,t),Object(a.a)(e,[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}}]),e}(be),Se=n("Hv2k"),xe=Object.freeze([]),Te=new Uint8ClampedArray(0),Ee={data:{type:"data",value:xe,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var n=e.layer;return Object(Se.a)(t,n.getLoadOptions())},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:c.a.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Ae=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(a.a)(e,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(t){var e=this.context.viewport,n=qt(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),i=Object(Xt.o)(n,e.pixelProjectionMatrix),a=Object(r.a)(i,3),o=a[0],s=a[1],u=a[2];return 2===t.length?[o,s]:[o,s,u]}},{key:"unproject",value:function(t){return this.context.viewport.unproject(t)}},{key:"projectPosition",value:function(t){return Wt(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var t=this.props.coordinateSystem;return t===c.a.DEFAULT||t===c.a.LNGLAT||t===c.a.CARTESIAN}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(t){Object(P.a)(t instanceof Uint8Array);var e=Object(r.a)(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.props.extensions[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;t=Vt(t,o.getShaders.call(this,o))}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,n=this.getAttributeManager();if(e.dataChanged&&n){var r=e.dataChanged;if(Array.isArray(r)){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;n.invalidateAll(c)}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else n.invalidateAll()}}},{key:"finalizeState",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var a=this.getAttributeManager();a&&a.finalize(),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.draw(t)}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.getAttributeManager());e&&("all"===t?e.invalidateAll():e.invalidate(t))}},{key:"updateAttributes",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this._setModelAttributes(o,t)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t),r=this.getStartIndices(t);e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"_updateUniformTransition",value:function(){var t=this.internalState.uniformTransitions;if(t.active){var e=t.update(),n=Object.create(this.props);for(var r in e)Object.defineProperty(n,r,{value:e[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(t,e){var n=e.numInstances,r=Te.length/3;if(r<n){var i=(Te=y.a.allocate(Te,n,{size:3,copy:!0})).length/3,a=[];Object(P.a)(i<16777215,"index out of picking color range");for(var o=r;o<i;o++)this.encodePickingColor(o,a),Te[3*o+0]=a[0],Te[3*o+1]=a[1],Te[3*o+2]=a[2]}t.value=Te.subarray(0,3*n)}},{key:"_setModelAttributes",value:function(t,e){var n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}},{key:"clearPickingColor",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors,i=n||r,a=this.decodePickingColor(t),o=i.getVertexOffset(a),s=i.getVertexOffset(a+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}},{key:"restorePickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors;(e||n).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Ut(t.data)}},{key:"getStartIndices",value:function(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Object(U.a)("layer.initialize",this),this._initState(),this.initializeState(this.context);var t=!0,e=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.initializeState.call(this,this.context,a)}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var t=this.needsUpdate();Object(U.a)("layer.update",this,t),t&&this._updateState()}},{key:"_updateState",value:function(){var t=this.props,e=this._updateUniformTransition();this.internalState.propsInTransition=e,this.props=e;var n=this._getUpdateParams();if(this.context.gl)this.updateState(n);else try{this.updateState(n)}catch(c){}var r=!0,i=!1,a=void 0;try{for(var o,s=this.props.extensions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.updateState.call(this,n,u)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this._updateModules(n),this.isComposite?this._renderLayers(n):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){Object(U.a)("layer.finalize",this),Object(P.a)(this.internalState&&this.state),this.finalizeState(this.context);var t=!0,e=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.finalizeState.call(this,a)}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"drawLayer",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,a=void 0===i?{}:i,o=t.parameters,s=void 0===o?{}:o;this._updateAttributeTransition();var u=this.props;this.props=this.internalState.propsInTransition||u;var c=this.props.opacity;a.opacity=Math.pow(c,1/2.2),r&&this.setModuleParameters(r);var l=this.props.getPolygonOffset,h=l&&l(a)||[0,0];Object(W.j)(this.context.gl,{polygonOffset:h}),Object(W.k)(this.context.gl,s,(function(){var t={moduleParameters:r,uniforms:a,parameters:s,context:e.context},n=!0,i=!1,o=void 0;try{for(var u,c=e.props.extensions[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var l=u.value;l.draw.call(e,t,l)}}catch(h){i=!0,o=h}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}e.draw(t)})),this.props=u}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this.internalState.changeFlags;for(var n in e)t[n]&&!e[n]&&(e[n]=t[n],Object(U.a)("layer.changeFlag",this,n,t));var r=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=r,e.somethingChanged=r||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(t,e){var n=It(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(t){var e=zt(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}},{key:"setModuleParameters",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.updateModuleSettings(t)}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_updateModules",value:function(t){var e=t.props,n=t.oldProps,r=e.autoHighlight,i=e.highlightedObjectIndex,a=e.highlightColor;if(n.autoHighlight!==r||n.highlightedObjectIndex!==i||n.highlightColor!==a){var o={};r||(o.pickingSelectedColor=null),a[3]=a[3]||255,o.pickingHighlightColor=a,Number.isInteger(i)&&(o.pickingSelectedColor=i>=0?this.encodePickingColor(i):null),this.setModuleParameters(o)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(t);return e=e||r}},{key:"_getAttributeManager",value:function(){return new Ot(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Object(P.a)(!this.internalState&&!this.state),Object(P.a)(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Pe({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return b.a.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t}}),this.internalState.layer=this,this.internalState.uniformTransitions=new Et(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){Object(U.a)("layer.matched",this,this===t);var e=t.state,n=t.internalState;Object(P.a)(e&&n),this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}}]),e}(ke);Ae.layerName="Layer",Ae.defaultProps=Ee},LDVv:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("MIFh");function r(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var n in t){var i=t[n],a=e[n];if(!(i===a||Array.isArray(i)&&Array.isArray(a)&&r(i,a)))return!1}return!0}},OIVS:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("MIFh");function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function i(t){var e,n={};return function(i){for(var a in i)if(!r(i[a],n[a])){e=t(i),n=i;break}return e}}},"PZd/":function(t,e,n){var r=n("P8UN"),i=n("ys0W")(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},RPaY:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("Ji7U"),u=n("wldP"),c=n("c9N0"),l=["longitude","latitude","zoom","bearing","pitch"],h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).call(this,t))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"interpolateProps",value:function(t,e,n){var r={};for(var i in e)r[i]=Object(c.l)(t[i],e[i],n);return r}}]),e}(u.a)},V3d6:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o}));n("R48M");var r=n("Jh/b"),i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(i,"IDENTITY",{get:function(){return r.a.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var a={WEB_MERCATOR:1,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},o={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},V8ep:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return v}));n("AqHK"),n("vJvp");var r=n("ZaHm"),i=n("bl9R"),a=n("V3d6"),o=n("OIVS"),s=n("VMBB"),u=[0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[0,0,0],f=[0,0,0],d=Object(o.a)((function(t){var e=t.viewport,n=t.devicePixelRatio,o=t.coordinateSystem,s=t.coordinateOrigin,l=function(t,e,n){var a=t.viewMatrixUncentered,o=t.projectionMatrix,s=t.viewMatrix,l=t.viewProjectionMatrix,h=u,f=t.cameraPosition,d=p(t,e,n),v=d.geospatialOrigin,g=d.shaderCoordinateOrigin;if(d.offsetMode){var y=t.projectPosition(v||g);f=[f[0]-y[0],f[1]-y[1],f[2]-y[2]],y[3]=1,h=i.n([],y,l),s=a||s,l=r.h([],o,s),l=r.h([],l,c)}return{viewMatrix:s,viewProjectionMatrix:l,projectionCenter:h,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:v}}(e,o,s),f=l.projectionCenter,d=l.viewProjectionMatrix,v=l.cameraPosCommon,g=l.shaderCoordinateOrigin,y=l.geospatialOrigin,m=e.getDistanceScales(),b=[e.width*n,e.height*n],w={project_uCoordinateSystem:o,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:g,project_uCenter:f,project_uAntimeridian:(e.longitude||0)-180,project_uViewportSize:b,project_uDevicePixelRatio:n,project_uFocalDistance:e.focalDistance||1,project_uCommonUnitsPerMeter:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:h,project_uScale:e.scale,project_uViewProjectionMatrix:d,project_uCameraPosition:v};if(y){var _=e.getDistanceScales(y);switch(o){case a.a.METER_OFFSETS:w.project_uCommonUnitsPerWorldUnit=_.unitsPerMeter,w.project_uCommonUnitsPerWorldUnit2=_.unitsPerMeter2;break;case a.a.LNGLAT:case a.a.LNGLAT_OFFSETS:w.project_uCommonUnitsPerWorldUnit=_.unitsPerDegree,w.project_uCommonUnitsPerWorldUnit2=_.unitsPerDegree2;break;case a.a.CARTESIAN:w.project_uCommonUnitsPerWorldUnit=[1,1,_.unitsPerMeter[2]],w.project_uCommonUnitsPerWorldUnit2=[0,0,_.unitsPerMeter2[2]]}}return w}));function p(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,i=r,o=!0;switch(n=e===a.a.LNGLAT_OFFSETS||e===a.a.METER_OFFSETS?r:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case a.c.WEB_MERCATOR:e!==a.a.LNGLAT&&e!==a.a.CARTESIAN||(o=!1);break;case a.c.WEB_MERCATOR_AUTO_OFFSET:e===a.a.LNGLAT?i=n:e===a.a.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(i));break;case a.c.IDENTITY:i=t.position.map(Math.fround);break;default:o=!1}return i[2]=i[2]||0,{geospatialOrigin:n,shaderCoordinateOrigin:i,offsetMode:o}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,u=t.coordinateSystem,c=void 0===u?a.a.DEFAULT:u,h=t.coordinateOrigin,f=t.wrapLongitude,p=void 0!==f&&f;t.projectionMode,t.positionOrigin;Object(s.a)(e),c===a.a.DEFAULT&&(c=e.isGeospatial?a.a.LNGLAT:a.a.CARTESIAN);var v=d({viewport:e,devicePixelRatio:r,coordinateSystem:c,coordinateOrigin:h});return v.project_uWrapLongitude=p,v.project_uModelMatrix=o||l,v}},VMBB:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},Vame:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var r="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:t,a=(void 0!==t||window,"undefined"!=typeof document&&document,!1);try{var o={get passive(){return a=!0,!0}};i.addEventListener("test",o,o),i.removeEventListener("test",o,o)}catch(s){}}).call(this,n("yLpj"))},Zk56:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));n("Kb1d"),n("MIFh");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(t)?i(t,e,[]):e(t)?[t]:[]}function i(t,e,n){for(var r=-1;++r<t.length;){var a=t[r];Array.isArray(a)?i(a,e,n):e(a)&&n.push(a)}return n}function a(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,a=t.count,o=void 0===a?1:a,s=n.length,u=o*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u);return e}},b0ih:function(t,e,n){"use strict";n("zTTH"),n("n0hJ"),n("5irr");var r=n("1OyB"),i=n("vuIU"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.overAlloc,i=void 0===n?2:n,a=e.poolSize,o=void 0===a?100:a;Object(r.a)(this,t),this.overAlloc=i,this.poolSize=o,this._pool=[]}return Object(i.a)(t,[{key:"allocate",value:function(t,e,n){var r=n.size,i=void 0===r?1:r,a=n.type,o=n.padding,s=void 0===o?0:o,u=n.copy,c=void 0!==u&&u,l=a||t&&t.constructor||Float32Array,h=e*i+s;if(ArrayBuffer.isView(t)){if(h<=t.length)return t;if(h*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,h)}var f=this._allocate(l,h);return t&&c?f.set(t):f.fill(0,0,4),this._release(t),f}},{key:"release",value:function(t){this._release(t)}},{key:"_allocate",value:function(t,e){e=Math.max(Math.ceil(e*this.overAlloc),1);var n=this._pool,r=t.BYTES_PER_ELEMENT*e,i=n.findIndex((function(t){return t.byteLength>=r}));return i>=0?new t(n.splice(i,1)[0],0,e):new t(e)}},{key:"_release",value:function(t){if(ArrayBuffer.isView(t)){var e=this._pool,n=t.buffer,r=n.byteLength,i=e.findIndex((function(t){return t.byteLength>=r}));i<0?e.push(n):(i>0||e.length<this.poolSize)&&e.splice(i,0,n),e.length>this.poolSize&&e.shift()}}}]),t}();e.a=new a},c1RO:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Zt})),n.d(e,"renderToDOM",(function(){return Xt}));n("QNMc"),n("E5k/"),n("YBKJ");var r=n("q1tI"),i=n.n(r),a=n("i8i4"),o=n("yYqN"),s=n("RPaY"),u=n("V3d6"),c=n("vuIU"),l=n("1OyB"),h=n("md7G"),f=n("foSv"),d=n("Ji7U"),p=n("nICr"),v=n("e/LK"),g=n("c9N0"),y=(n("9ZhD"),n("sxJW")),m=n("rSc4"),b=n("zheZ"),w=n("F8bt"),_={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},O={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new s.a(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:b.a.BREAK},j=function(t){return Math.pow(2,t)},k=function(t){function e(t){var n,r=t.ViewportType,i=t.width,a=t.height,o=t.orbitAxis,s=void 0===o?_.orbitAxis:o,u=t.rotationX,c=void 0===u?_.rotationX:u,d=t.rotationOrbit,p=void 0===d?_.rotationOrbit:d,v=t.target,g=void 0===v?_.target:v,y=t.zoom,m=void 0===y?_.zoom:y,b=t.minRotationX,w=void 0===b?_.minRotationX:b,O=t.maxRotationX,j=void 0===O?_.maxRotationX:O,k=t.minZoom,P=void 0===k?_.minZoom:k,S=t.maxZoom,x=void 0===S?_.maxZoom:S,T=t.startPanPosition,E=t.startTarget,A=t.startRotationX,C=t.startRotationOrbit,M=t.startZoomPosition,I=t.startZoom;return Object(l.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this,{width:i,height:a,orbitAxis:s,rotationX:c,rotationOrbit:p,target:g,zoom:m,minRotationX:w,maxRotationX:j,minZoom:P,maxZoom:x})))._interactiveState={startPanPosition:T,startTarget:E,startRotationX:A,startRotationOrbit:C,startZoomPosition:M,startZoom:I},n.ViewportType=r,n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:n})}},{key:"pan",value:function(t){var e=t.pos,n=(t.startPos,this._interactiveState),r=n.startPanPosition,i=n.startTarget,a=new g.d(e).subtract(r);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:i,pixelOffset:a})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=this._interactiveState,i=r.startRotationX,a=r.startRotationOrbit;return Number.isFinite(i)&&Number.isFinite(a)?((i<-90||i>90)&&(e*=-1),this._getUpdatedState({rotationX:i+180*n,rotationOrbit:a+180*e,isRotating:!0})):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,a=i.zoom,o=i.width,s=i.height,u=i.target,c=this._interactiveState,l=c.startZoom,h=c.startZoomPosition,f=c.startTarget;Number.isFinite(l)||(l=a,f=u,h=n||e);var d=this._calculateNewZoom({scale:r,startZoom:l}),p=j(l),v=j(d),g=(o/2-h[0])*(v/p-1),y=(s/2-h[1])*(v/p-1);return this._getUpdatedState({zoom:d,target:this._calculateNewTarget({startTarget:f,zoom:d,pixelOffset:[g,y]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var t=[-50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveRight",value:function(){var t=[50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveUp",value:function(){var t=[0,-50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveDown",value:function(){var t=[0,50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom;Number.isFinite(n)||(n=this._viewportProps.zoom);var o=n+Math.log2(e);return Object(g.h)(o,a,i)}},{key:"_calculateNewTarget",value:function(t){var e=t.startTarget,n=t.zoom,r=t.pixelOffset,i=Object.assign({},this._viewportProps);Number.isFinite(n)&&(i.zoom=n),e&&(i.target=e);var a=new this.ViewportType(i),o=a.project(i.target);return a.unproject([o[0]-r[0],o[1]-r[1],o[2]])}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom,i=t.maxRotationX,a=t.minRotationX,o=t.rotationOrbit;return t.zoom=Object(g.h)(r,n,e),t.rotationX=Object(g.h)(t.rotationX,a,i),(o<-180||o>180)&&(t.rotationOrbit=Object(w.d)(o+180,360)-180),t}}]),e}(m.a),P=function(t){function e(t){return Object(l.a)(this,e),Object(h.a)(this,Object(f.a)(e).call(this,k,t))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"_getTransitionProps",value:function(){return O}}]),e}(y.a),S=Math.PI/180;function x(t){var e=t.height,n=t.fovy,r=t.orbitAxis,i=t.rotationX,a=t.rotationOrbit,o=t.zoom,s=.5/Math.tan(n*S/2),u="Z"===r?[0,0,1]:[0,1,0],c="Z"===r?[0,-s,0]:[0,0,s],l=(new g.b).lookAt({eye:c,up:u});l.rotateX(i*S),"Z"===r?l.rotateZ(a*S):l.rotateY(a*S);var h=Math.pow(2,o)/(e||1);return l.scale(h),l}var T=function(t){function e(t){Object(l.a)(this,e);var n=t.id,r=t.x,i=t.y,a=t.width,o=t.height,s=t.fovy,u=void 0===s?50:s,c=t.near,d=t.far,p=t.orbitAxis,v=void 0===p?"Z":p,g=t.target,y=void 0===g?[0,0,0]:g,m=t.rotationX,b=void 0===m?0:m,w=t.rotationOrbit,_=void 0===w?0:w,O=t.zoom,j=void 0===O?0:O;return Object(h.a)(this,Object(f.a)(e).call(this,{id:n,viewMatrix:x({height:o,fovy:u,orbitAxis:v,rotationX:b,rotationOrbit:_,zoom:j}),fovy:u,near:c,far:d,x:r,y:i,position:y,width:a,height:o,zoom:j}))}return Object(d.a)(e,t),e}(v.a),E=function(t){function e(t){return Object(l.a)(this,e),Object(h.a)(this,Object(f.a)(e).call(this,Object.assign({},t,{type:T})))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"controller",get:function(){return this._getControllerProps({type:P,ViewportType:T})}}]),e}(p.a);E.displayName="OrbitView";var A=n("FR1t"),C=n("1Nab"),M=(n("6kNP"),n("8npG"),n("o0o1")),I=n.n(M),R=(n("wcNg"),n("h3Sa"),n("CtJk"),n("5irr"),n("/WnK")),L=(n("88iX"),n("zZTu"),n("SIeT"),n("eQLy")),D=null,N={0:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0)}},1:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0)}},2:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0),color:[t.getUint16(20,!0),t.getUint16(22,!0),t.getUint16(24,!0)]}},3:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0),color:[t.getUint16(28,!0),t.getUint16(30,!0),t.getUint16(32,!0)]}}};function F(t,e,n,r){r=void 0===r||0===r?1:r;var i=new e(t.slice(n,n+e.BYTES_PER_ELEMENT*r));if(1===r)return i[0];for(var a=[],o=0;o<r;o++)a.push(i[o]);return a}function z(t){var e={};e.pointsOffset=F(t,Uint32Array,96),e.pointsFormatId=F(t,Uint8Array,104),e.pointsStructSize=F(t,Uint16Array,105),e.pointsCount=F(t,Uint32Array,107);var n=131;e.scale=F(t,Float64Array,n,3),n+=24,e.offset=F(t,Float64Array,n,3),n+=24;var r=F(t,Float64Array,n,6);return n+=48,e.maxs=[r[0],r[2],r[4]],e.mins=[r[1],r[3],r[5]],e}var U=function(){function t(t){this.arraybuffer=t}var e=t.prototype;return e.open=function(){return this.readOffset=0,!0},e.getHeader=function(){return this.header=z(this.arraybuffer),this.header},e.readData=function(t,e,n){var r=this.header,i=this.arraybuffer;if(!r)throw new Error("Cannot start reading data till a header request is issued");var a,o=this.readOffset;if(n<=1){t=Math.min(t,r.pointsCount-o);var s=(a=r.pointsOffset+o*r.pointsStructSize)+t*r.pointsStructSize;return o+=t,this.readOffset=o,{buffer:i.slice(a,s),count:t,hasMoreData:o<r.pointsCount}}for(var u=Math.min(t*n,r.pointsCount-o),c=Math.ceil(u/n),l=0,h=new Uint8Array(c*r.pointsStructSize),f=0;f<u;f++){if(f%n==0){a=r.pointsOffset+o*r.pointsStructSize;var d=new Uint8Array(i,a,r.pointsStructSize);h.set(d,l*r.pointsStructSize),l++}o++}return this.readOffset=o,{buffer:h.buffer,count:l,hasMoreData:o<r.pointsCount}},e.close=function(){return this.arraybuffer=null,!0},t}(),B=function(){function t(t){this.arraybuffer=t,this.instance=null,D||(D=L())}var e=t.prototype;return e.open=function(){try{var t=this.arraybuffer;this.instance=new D.LASZip;var e=new Uint8Array(t),n=D._malloc(t.byteLength);return this.instance.arraybuffer=t,this.instance.buf=n,D.HEAPU8.set(e,n),this.instance.open(n,t.byteLength),this.instance.readOffset=0,!0}catch(r){throw new Error("Failed to open file: "+r.message)}},e.getHeader=function(){if(!this.instance)throw new Error("You need to open the file before trying to read header");try{var t=z(this.instance.arraybuffer);return t.pointsFormatId&=63,this.header=t,t}catch(e){throw new Error("Failed to get header: "+e.message)}},e.readData=function(t,e,n){if(!this.instance)throw new Error("You need to open the file before trying to read stuff");var r=this.header,i=this.instance;if(!r)throw new Error("You need to query header before reading, I maintain state that way, sorry :(");try{for(var a=Math.min(t*n,r.pointsCount-i.readOffset),o=Math.ceil(a/n),s=0,u=new Uint8Array(o*r.pointsStructSize),c=D._malloc(r.pointsStructSize),l=0;l<a;l++){if(i.getPoint(c),l%n==0){var h=new Uint8Array(D.HEAPU8.buffer,c,r.pointsStructSize);u.set(h,s*r.pointsStructSize),s++}i.readOffset++}return{buffer:u.buffer,count:s,hasMoreData:i.readOffset<r.pointsCount}}catch(f){throw new Error("Failed to read data: "+f.message)}},e.close=function(){try{return null!==this.instance&&(this.instance.delete(),this.instance=null),!0}catch(t){throw new Error("Failed to close file: "+t.message)}},t}(),V=function(){function t(t,e,n){this.arrayb=t,this.decoder=N[n.pointsFormatId],this.pointsCount=e,this.pointSize=n.pointsStructSize,this.scale=n.scale,this.offset=n.offset,this.mins=n.mins,this.maxs=n.maxs}return t.prototype.getPoint=function(t){if(t<0||t>=this.pointsCount)throw new Error("Point index out of range");var e=new DataView(this.arrayb,t*this.pointSize,this.pointSize);return this.decoder(e)},t}(),Y=function(){function t(t){if(this.arraybuffer=t,this.determineVersion(),this.version>13)throw new Error("Only file versions <= 1.3 are supported at this time");if(this.determineFormat(),void 0===N[this.formatId])throw new Error("The point format ID is not supported");this.loader=this.isCompressed?new B(this.arraybuffer):new U(this.arraybuffer)}var e=t.prototype;return e.determineFormat=function(){var t=F(this.arraybuffer,Uint8Array,104),e=(128&t)>>7,n=(64&t)>>6;if(1===e&&1===n)throw new Error("Old style compression not supported");this.formatId=63&t,this.isCompressed=1===e||1===n},e.determineVersion=function(){var t=new Int8Array(this.arraybuffer,24,2);this.version=10*t[0]+t[1],this.versionAsString=t[0]+"."+t[1]},e.open=function(){this.loader.open()&&(this.isOpen=!0)},e.getHeader=function(){return this.loader.getHeader()},e.readData=function(t,e,n){return this.loader.readData(t,e,n)},e.close=function(){this.loader.close()&&(this.isOpen=!1)},e.getUnpacker=function(){return V},t}();function G(t,e){void 0===e&&(e={});var n,r,i,a,o,s=0,u={},c=e.onProgress,l=(e.las||{}).skip;return function(t,e,n){var r=new Y(t);try{r.open();var i=r.getHeader(),a=r.getUnpacker(),o=Math.ceil(i.pointsCount/Math.max(1,e));i.totalToRead=o;for(var s=0;;){var u=r.readData(1e5,0,e);s+=u.count,i.totalRead=s,i.versionAsString=u.versionAsString,i.isCompressed=u.isCompressed;var c=new a(u.buffer,u.count,i);if(n(c,i),!u.hasMoreData||s>=o)break}}catch(l){throw l}finally{r.close()}}(t,void 0===l?1:l,(function(t,e){if(!o){o=e;var l=e.totalToRead;n=new Float32Array(3*l),r=e.pointsFormatId>=2?new Uint8Array(4*l):null,i=new Uint16Array(l),a=new Uint8Array(l),Object.assign(u,{loaderData:{header:e},mode:0,attributes:{POSITION:{value:n,size:3},intensity:{value:i,size:1},classification:{value:a,size:1}}}),r&&(u.attributes.COLOR_0={value:r,size:4})}for(var h=t.pointsCount,f=e.scale,d=f[0],p=f[1],v=f[2],g=e.offset,y=g[0],m=g[1],b=g[2],w=0;w<h;w++){var _=t.getPoint(w),O=_.position,j=_.color,k=_.intensity,P=_.classification;n[3*s]=O[0]*d+y,n[3*s+1]=O[1]*p+m,n[3*s+2]=O[2]*v+b,j&&(r[4*s]=j[0],r[4*s+1]=j[1],r[4*s+2]=j[2],r[4*s+3]=255),i[s]=k,a[s]=P,s++}c&&c(Object.assign({header:{vertexCount:e.totalRead},progress:e.totalRead/e.totalToRead},u))})),u.header={vertexCount:o.totalToRead,boundingBox:Object(R.a)(u.attributes)},u}function Z(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var X,H,q="undefined"!=typeof __VERSION__?__VERSION__:"latest",W={id:"las",name:"LAS",version:q,extensions:["las","laz"],mimeType:"application/octet-stream",text:!0,binary:!0,test:"LAS",options:{las:{workerUrl:"https://unpkg.com/@loaders.gl/las@"+q+"/dist/las-loader.worker.js"}}},J=Object.assign({},W,{parse:(X=I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G(e,n));case 1:case"end":return t.stop()}}),t)})),H=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=X.apply(t,e);function a(t){Z(i,n,r,a,o,"next",t)}function o(t){Z(i,n,r,a,o,"throw",t)}a(void 0)}))},function(t,e){return H.apply(this,arguments)}),parseSync:G});n("pJf4"),n("HQhv");function K(t,e,n){var r=function(t){var e={};e.POSITION={value:new Float32Array(t.vertices),size:3},t.normals.length>0&&(e.NORMAL={value:new Float32Array(t.normals),size:3});t.uvs.length>0&&(e.TEXCOORD_0={value:new Float32Array(t.uvs),size:2});t.colors.length>0&&(e.COLOR_0={value:new Uint8Array(t.colors),size:3,normalized:!0});return e}(e),i={loaderData:{header:t},header:{vertexCount:e.indices.length||e.vertices.length/3,boundingBox:Object(R.a)(r)},mode:e.indices&&e.indices.length>0?4:0,attributes:r};return e.indices&&e.indices.length>0&&(i.indices={value:new Uint32Array(e.indices),size:1}),i}function Q(t,e){var n,r;if(void 0===e&&(e={}),t instanceof ArrayBuffer){var i=(new TextDecoder).decode(t);r="ascii"===(n=$(i,e)).format?rt(i,n):function(t,e){for(var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},i="binary_little_endian"===e.format,a=new DataView(t,e.headerLength),o=0,s=0;s<e.elements.length;s++)for(var u=e.elements[s].count,c=0;c<u;c++){n=ot(a,o,e.elements[s].properties,i),o+=n[1];var l=n[0];it(r,e.elements[s].name,l)}return r}(t,n)}else r=rt(t,n=$(t,e));return K(n,r)}function $(t,e){var n="",r=0,i=/ply([\s\S]*)end_header\s/.exec(t);null!==i&&(n=i[1],r=i[0].length);for(var a,o,s,u={comments:[],elements:[],headerLength:r},c=n.split("\n"),l=0;l<c.length;l++){var h=c[l];if(""!==(h=h.trim()))switch(o=(s=h.split(/\s+/)).shift(),h=s.join(" "),o){case"format":u.format=s[0],u.version=s[1];break;case"comment":u.comments.push(h);break;case"element":void 0!==a&&u.elements.push(a),a={name:s[0],count:parseInt(s[1],10),properties:[]};break;case"property":a.properties.push(tt(s,e.propertyNameMapping));break;default:console.log("unhandled",o,s)}}return void 0!==a&&u.elements.push(a),u}function tt(t,e){var n={type:t[0]};return"list"===n.type?(n.name=t[3],n.countType=t[1],n.itemType=t[2]):n.name=t[1],e&&n.name in e&&(n.name=e[n.name]),n}function et(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function nt(t,e){for(var n=e.split(/\s+/),r={},i=0;i<t.length;i++)if("list"===t[i].type){for(var a=[],o=et(n.shift(),t[i].countType),s=0;s<o;s++)a.push(et(n.shift(),t[i].itemType));r[t[i].name]=a}else r[t[i].name]=et(n.shift(),t[i].type);return r}function rt(t,e){var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},i="";null!==(n=/end_header\s([\s\S]*)$/.exec(t))&&(i=n[1]);for(var a=i.split("\n"),o=0,s=0,u=0;u<a.length;u++){var c=a[u];if(""!==(c=c.trim())){s>=e.elements[o].count&&(o++,s=0);var l=nt(e.elements[o].properties,c);it(r,e.elements[o].name,l),s++}}return r}function it(t,e,n){if("vertex"===e)t.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&t.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&t.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&t.colors.push(n.red,n.green,n.blue);else if("face"===e){var r=n.vertex_indices||n.vertex_index;3===r.length?t.indices.push(r[0],r[1],r[2]):4===r.length&&(t.indices.push(r[0],r[1],r[3]),t.indices.push(r[1],r[2],r[3]))}}function at(t,e,n,r){switch(n){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,r),2];case"uint16":case"ushort":return[t.getUint16(e,r),2];case"int32":case"int":return[t.getInt32(e,r),4];case"uint32":case"uint":return[t.getUint32(e,r),4];case"float32":case"float":return[t.getFloat32(e,r),4];case"float64":case"double":return[t.getFloat64(e,r),8];default:throw new Error(n)}}function ot(t,e,n,r){for(var i,a={},o=0,s=0;s<n.length;s++)if("list"===n[s].type){var u=[],c=(i=at(t,e+o,n[s].countType,r))[0];o+=i[1];for(var l=0;l<c;l++)i=at(t,e+o,n[s].itemType,r),u.push(i[0]),o+=i[1];a[n[s].name]=u}else i=at(t,e+o,n[s].type,r),a[n[s].name]=i[0],o+=i[1];return[a,o]}function st(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var ut="undefined"!=typeof __VERSION__?__VERSION__:"latest",ct={id:"ply",name:"PLY",version:ut,extensions:["ply"],mimeType:"text/plain",text:!0,binary:!0,test:"ply",options:{ply:{workerUrl:"https://unpkg.com/@loaders.gl/ply@"+ut+"/dist/ply-loader.worker.js"}}},lt=Object.assign({},ct,{parse:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){st(a,r,i,o,s,"next",t)}function s(t){st(a,r,i,o,s,"throw",t)}o(void 0)}))}}(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q(e,n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseTextSync:Q,parseSync:Q});n("sC2a"),n("sPse");function ht(t,e,n){var r,i=(new TextDecoder).decode(t),a=function(t){var e={},n=t.search(/[\r\n]DATA\s(\S*)\s/i),r=/[\r\n]DATA\s(\S*)\s/i.exec(t.substr(n-1));e.data=r[1],e.headerLen=r[0].length+n,e.str=t.substr(0,e.headerLen),e.str=e.str.replace(/\#.*/gi,""),e.version=/VERSION (.*)/i.exec(e.str),e.fields=/FIELDS (.*)/i.exec(e.str),e.size=/SIZE (.*)/i.exec(e.str),e.type=/TYPE (.*)/i.exec(e.str),e.count=/COUNT (.*)/i.exec(e.str),e.width=/WIDTH (.*)/i.exec(e.str),e.height=/HEIGHT (.*)/i.exec(e.str),e.viewpoint=/VIEWPOINT (.*)/i.exec(e.str),e.points=/POINTS (.*)/i.exec(e.str),null!==e.version&&(e.version=parseFloat(e.version[1]));null!==e.fields&&(e.fields=e.fields[1].split(" "));null!==e.type&&(e.type=e.type[1].split(" "));null!==e.width&&(e.width=parseInt(e.width[1],10));null!==e.height&&(e.height=parseInt(e.height[1],10));null!==e.viewpoint&&(e.viewpoint=e.viewpoint[1]);null!==e.points&&(e.points=parseInt(e.points[1],10));null===e.points&&(e.points=e.width*e.height);null!==e.size&&(e.size=e.size[1].split(" ").map((function(t){return parseInt(t,10)})));if(null!==e.count)e.count=e.count[1].split(" ").map((function(t){return parseInt(t,10)}));else{e.count=[];for(var i=0;i<e.fields.length;i++)e.count.push(1)}e.offset={};for(var a=0,o=0;o<e.fields.length;o++)"ascii"===e.data?e.offset[e.fields[o]]=o:(e.offset[e.fields[o]]=a,a+=e.size[o]);return e.rowSize=a,e}(i);switch(a.data){case"ascii":r=function(t,e){for(var n=[],r=[],i=[],a=t.offset,o=e.substr(t.headerLen).split("\n"),s=0;s<o.length;s++)if(""!==o[s]){var u=o[s].split(" ");if(void 0!==a.x&&(n.push(parseFloat(u[a.x])),n.push(parseFloat(u[a.y])),n.push(parseFloat(u[a.z]))),void 0!==a.rgb){var c=new Float32Array([parseFloat(u[a.rgb])]),l=new DataView(c.buffer,0);i.push(l.getUint8(0)/255),i.push(l.getUint8(1)/255),i.push(l.getUint8(2)/255)}void 0!==a.normal_x&&(r.push(parseFloat(u[a.normal_x])),r.push(parseFloat(u[a.normal_y])),r.push(parseFloat(u[a.normal_z])))}return{position:n,normal:r,color:i}}(a,i);break;case"binary":r=function(t,e){for(var n=[],r=[],i=[],a=new DataView(e,t.headerLen),o=t.offset,s=0,u=0;s<t.points;s++,u+=t.rowSize)void 0!==o.x&&(n.push(a.getFloat32(u+o.x,!0)),n.push(a.getFloat32(u+o.y,!0)),n.push(a.getFloat32(u+o.z,!0))),void 0!==o.rgb&&(i.push(a.getUint8(u+o.rgb+0)/255),i.push(a.getUint8(u+o.rgb+1)/255),i.push(a.getUint8(u+o.rgb+2)/255)),void 0!==o.normal_x&&(r.push(a.getFloat32(u+o.normal_x,!0)),r.push(a.getFloat32(u+o.normal_y,!0)),r.push(a.getFloat32(u+o.normal_z,!0)));return{position:n,normal:r,color:i}}(a,t);break;case"binary_compressed":default:throw new Error("PCD: "+a.data+" files are not supported")}return{loaderData:{header:a},header:ft(a,r=function(t){return{POSITION:{value:new Float32Array(t.position),size:3},NORMAL:{value:new Float32Array(t.normal),size:3},COLOR_0:{value:new Uint8Array(t.color),size:3}}}(r)),mode:0,indices:null,attributes:r}}function ft(t,e){return{vertexCount:t.width*t.height,boundingBox:Object(R.a)(e)}}function dt(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var pt="undefined"!=typeof __VERSION__?__VERSION__:"latest",vt={id:"pcd",name:"PCD",version:pt,extensions:["pcd"],mimeType:"text/plain",options:{pcd:{workerUrl:"https://unpkg.com/@loaders.gl/pcd@"+pt+"/dist/pcd-loader.worker.js"}}},gt=Object.assign({},vt,{parse:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){dt(a,r,i,o,s,"next",t)}function s(t){dt(a,r,i,o,s,"throw",t)}o(void 0)}))}}(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseSync:ht});n("rzGZ"),n("m210"),n("4DPX"),n("YbXK"),n("cFtU"),n("q8oJ"),n("1/Ks");function yt(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bt=/^[og]\s*(.+)?/,wt=/^mtllib /,_t=/^usemtl /,Ot=function(){function t(t){var e=t.index,n=t.name,r=void 0===n?"":n,i=t.mtllib,a=t.smooth,o=t.groupStart;this.index=e,this.name=r,this.mtllib=i,this.smooth=a,this.groupStart=o,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return t.prototype.clone=function(e){return void 0===e&&(e=this.index),new t({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})},t}(),jt=function(){function t(t){void 0===t&&(t=""),this.name=t,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}var e=t.prototype;return e.startMaterial=function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r=new Ot({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(r),r},e.currentMaterial=function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},e._finalize=function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e},t}(),kt=function(){function t(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}var e=t.prototype;return e.startObject=function(t,e){if(void 0===e&&(e=!0),this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new jt(t),this.object.fromDeclaration=e,n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},e.finalize=function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},e.parseVertexIndex=function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},e.parseNormalIndex=function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},e.parseUVIndex=function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},e.addVertex=function(t,e,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},e.addVertexPoint=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addVertexLine=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addNormal=function(t,e,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},e.addColor=function(t,e,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},e.addUV=function(t,e,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[e+0],r[e+1]),i.push(r[n+0],r[n+1])},e.addUVLine=function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},e.addFace=function(t,e,n,r,i,a,o,s,u){var c=this.vertices.length,l=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),f=this.parseVertexIndex(n,c);if(this.addVertex(l,h,f),void 0!==r&&""!==r){var d=this.uvs.length;l=this.parseUVIndex(r,d),h=this.parseUVIndex(i,d),f=this.parseUVIndex(a,d),this.addUV(l,h,f)}if(void 0!==o&&""!==o){var p=this.normals.length;l=this.parseNormalIndex(o,p),h=o===s?l:this.parseNormalIndex(s,p),f=o===u?l:this.parseNormalIndex(u,p),this.addNormal(l,h,f)}this.colors.length>0&&this.addColor(l,h,f)},e.addPointGeometry=function(t){this.object.geometry.type="Points";for(var e,n=this.vertices.length,r=yt(t);!(e=r()).done;){var i=e.value;this.addVertexPoint(this.parseVertexIndex(i,n))}},e.addLineGeometry=function(t,e){this.object.geometry.type="Line";for(var n,r=this.vertices.length,i=this.uvs.length,a=yt(t);!(n=a()).done;){var o=n.value;this.addVertexLine(this.parseVertexIndex(o,r))}for(var s,u=yt(e);!(s=u()).done;){var c=s.value;this.addUVLine(this.parseUVIndex(c,i))}},t}();function Pt(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xt(t,e){var n=function(t){var e=new kt;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),r="",i="",a=[],o="function"==typeof"".trimLeft,s=0,u=n.length;s<u;s++)if(r=n[s],0!==(r=o?r.trimLeft():r.trim()).length&&"#"!==(i=r.charAt(0)))if("v"===i){var c=r.split(/\s+/);switch(c[0]){case"v":e.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),8===c.length&&e.colors.push(parseFloat(c[4]),parseFloat(c[5]),parseFloat(c[6]));break;case"vn":e.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));break;case"vt":e.uvs.push(parseFloat(c[1]),parseFloat(c[2]))}}else if("f"===i){for(var l=r.substr(1).trim().split(/\s+/),h=[],f=0,d=l.length;f<d;f++){var p=l[f];if(p.length>0){var v=p.split("/");h.push(v)}}for(var g=h[0],y=1,m=h.length-1;y<m;y++){var b=h[y],w=h[y+1];e.addFace(g[0],b[0],w[0],g[1],b[1],w[1],g[2],b[2],w[2])}}else if("l"===i){var _=r.substring(1).trim().split(" "),O=void 0,j=[];if(-1===r.indexOf("/"))O=_;else{O=[];for(var k=0,P=_.length;k<P;k++){var S=_[k].split("/");""!==S[0]&&O.push(S[0]),""!==S[1]&&j.push(S[1])}}e.addLineGeometry(O,j)}else if("p"===i){var x=r.substr(1).trim().split(" ");e.addPointGeometry(x)}else if(null!==(a=bt.exec(r))){var T=(" "+a[0].substr(1).trim()).substr(1);e.startObject(T)}else if(_t.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(wt.test(r))e.materialLibraries.push(r.substring(7).trim());else{if("s"!==i){if("\0"===r)continue;throw new Error('Unexpected line: "'+r+'"')}if((a=r.split(" ")).length>1){var E=a[1].trim().toLowerCase();e.object.smooth="0"!==E&&"off"!==E}else e.object.smooth=!0;var A=e.object.currentMaterial();A&&(A.smooth=e.object.smooth)}e.finalize();for(var C,M=[],I=[],R=yt(e.objects);!(C=R()).done;){var L=C.value,D=L.geometry;if(0!==D.vertices.length){var N={header:{vertexCount:D.vertices.length/3},attributes:{}};switch(D.type){case"Points":N.mode=0;break;case"Line":N.mode=1;break;default:N.mode=4}N.attributes.POSITION={value:new Float32Array(D.vertices),size:3},D.normals.length>0&&(N.attributes.NORMAL={value:new Float32Array(D.normals),size:3}),D.colors.length>0&&(N.attributes.COLOR_0={value:new Float32Array(D.colors),size:3}),D.uvs.length>0&&(N.attributes.TEXCOORD_0={value:new Float32Array(D.uvs),size:2}),N.materials=[];for(var F,z=yt(L.materials);!(F=z()).done;){var U=F.value,B={name:U.name,flatShading:!U.smooth};N.materials.push(B),I.push(B)}N.name=L.name,M.push(N)}}return{meshes:M,materials:I}}(t).meshes,r=n.reduce((function(t,e){return t+e.header.vertexCount}),0),i=function(t,e){for(var n,r,i,a,o=new Float32Array(3*e),s=0,u=Pt(t);!(a=u()).done;){var c=a.value.attributes,l=c.POSITION,h=c.NORMAL,f=c.COLOR_0,d=c.TEXCOORD_0;o.set(l.value,3*s),h&&(n=n||new Float32Array(3*e)).set(h.value,3*s),f&&(r=r||new Float32Array(3*e)).set(f.value,3*s),d&&(i=i||new Float32Array(2*e)).set(d.value,2*s),s+=l.value.length/3}var p={};p.POSITION={value:o,size:3},n&&(p.NORMAL={value:n,size:3});r&&(p.COLOR_0={value:r,size:3});i&&(p.TEXCOORD_0={value:i,size:2});return p}(n,r);return{loaderData:{header:{}},header:{vertexCount:r,boundingBox:Object(R.a)(i)},mode:4,attributes:i}}function Tt(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var Et="undefined"!=typeof __VERSION__?__VERSION__:"latest",At={id:"obj",name:"OBJ",version:Et,extensions:["obj"],mimeType:"text/plain",testText:function(t){return"v"===t[0]},options:{obj:{workerUrl:"https://unpkg.com/@loaders.gl/obj@"+Et+"/dist/obj-loader.worker.js"}}},Ct=Object.assign({},At,{parse:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Tt(a,r,i,o,s,"next",t)}function s(t){Tt(a,r,i,o,s,"throw",t)}o(void 0)}))}}(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",xt((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseTextSync:xt});var Mt=n("sF27"),It=n("Hv2k"),Rt=(n("Dq+y"),n("Ggvi"),n("vOnD"));var Lt=Rt.c.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),Dt=Rt.c.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),Nt=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var t=this.props,e=t.examples,n=void 0===e?{}:e,r=t.onExampleChange,i=this.props.selectedCategory,a=this.props.selectedExample;(i&&a||this._autoSelected||(i=Object.keys(n)[0],a=Object.keys(n[i])[0],this._autoSelected=!0),i&&a)&&r({selectedCategory:i,selectedExample:a,example:n[i][a]})},a._renderDropDown=function(){var t=this.props,e=t.examples,n=void 0===e?{}:e,r=t.selectedCategory,a=t.selectedExample,o=t.onExampleChange;if(!r||!a)return!1;var s=r+"."+a;return i.a.createElement(Dt,{value:s,onChange:function(t){var e=t.target.value.split("."),r=e[0],i=e[1],a=n[r][i];o({selectedCategory:r,selectedExample:i,example:a})}},Object.keys(n).map((function(t,e){var r=n[t];return i.a.createElement("optgroup",{key:e,label:t},Object.keys(r).map((function(e,n){var r=t+"."+e;return i.a.createElement("option",{key:n,value:r},e+" ("+t+")")})))})))},a._renderHeader=function(){var t=this.props,e=t.selectedCategory,n=t.selectedExample;return e&&n?i.a.createElement("div",null,i.a.createElement("h3",null,n," ",i.a.createElement("b",null,e)," ")):null},a._renderDropped=function(){var t=this.props.droppedFile;return t?i.a.createElement("div",null,"Dropped file: ",JSON.stringify(t.name)):null},a._renderStats=function(){var t,e=this.props,n=e.vertexCount,r=e.loadTimeMs;return t=n>=1e7?(n/1e6).toFixed(0)+"M":n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e4?(n/1e3).toFixed(0)+"K":n>=1e3?(n/1e3).toFixed(1)+"K":""+n,i.a.createElement("div",null,i.a.createElement("div",null,Number.isFinite(n)?"Points: "+t:null),i.a.createElement("div",null,Number.isFinite(r)?"Load time: "+(r/1e3).toFixed(1)+"s":null))},a.render=function(){return i.a.createElement(Lt,null,this._renderHeader(),this._renderDropDown(),this._renderDropped(),this._renderStats())},r}(r.PureComponent);Nt.defaultProps={examples:{},selectedCategory:null,selectedExample:null,onExampleChange:function(){}};var Ft="https://raw.githubusercontent.com/uber-common/deck.gl-data/master",zt="https://raw.githubusercontent.com/uber-web/loaders.gl/master",Ut={PLY:{"Lucy 800K":{uri:Ft+"/examples/point-cloud-ply/lucy800k.ply"},"Lucy 100K":{uri:Ft+"/examples/point-cloud-ply/lucy100k.ply"},Bunny:{uri:zt+"/modules/ply/test/data/bunny.ply"},"Bun Zipper (Text)":{uri:zt+"/modules/ply/test/data/bun_zipper.ply"},"Richmond Azaelias":{uri:zt+"/modules/ply/test/data/richmond-azaelias.ply"}},LAZ:{"Indoor Scan 800K":{uri:Ft+"/examples/point-cloud-laz/indoor.0.1.laz"}},Draco:{Bunny:{uri:zt+"/modules/draco/test/data/bunny.drc"}},OBJ:{Magnolia:{uri:zt+"/modules/obj/test/data/magnolia.obj"},Bunny:{uri:zt+"/modules/obj/test/data/bunny.obj"}}};function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Object(Mt.b)([C.b,J,lt,gt,Ct]);var Vt={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},Yt=new s.a(["rotationOrbit"]);function Gt(t){var e={getPosition:t.POSITION};return t.COLOR_0&&(e.getColor=t.COLOR_0),{length:t.POSITION.value.length/t.POSITION.size,attributes:e}}var Zt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).state={viewState:Vt,pointData:null,selectedExample:"Richmond Azaelias",selectedCategory:"PLY"},n._onLoad=n._onLoad.bind(Bt(n)),n._rotateCamera=n._rotateCamera.bind(Bt(n)),n._onViewStateChange=n._onViewStateChange.bind(Bt(n)),n._onExampleChange=n._onExampleChange.bind(Bt(n)),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var a=r.prototype;return a._onViewStateChange=function(t){var e=t.viewState;this.setState({viewState:e})},a._rotateCamera=function(){var t=this.state.viewState;this.setState({viewState:Object.assign({},t,{rotationOrbit:t.rotationOrbit+10,transitionDuration:600,transitionInterpolator:Yt,onTransitionEnd:this._rotateCamera})})},a._onExampleChange=function(t){var e=t.selectedCategory,n=t.selectedExample,r=t.example.uri;this._loadStartMs=Date.now(),this.setState({selectedCategory:e,selectedExample:n,pointData:null,loadTimeMs:void 0}),Object(It.a)(r).then(this._onLoad.bind(this))},a._onLoad=function(t){t.header;var e=t.loaderData,n=t.attributes,r=(t.progress,e.header.mins&&e.header.maxs?e.header:function(t){for(var e=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],n=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],r=t.POSITION.size,i=t.POSITION.value.length/r,a=0;a<i;a+=r){var o=t.POSITION.value[a],s=t.POSITION.value[a+1],u=t.POSITION.value[a+2];o<e[0]?e[0]=o:o>n[0]&&(n[0]=o),s<e[1]?e[1]=s:s>n[1]&&(n[1]=s),u<e[2]?e[2]=u:u>n[2]&&(n[2]=u)}return{mins:e,maxs:n}}(n)),i=r.maxs,a=r.mins,o=this.state.viewState;o=Object.assign({},Vt,{target:[(a[0]+i[0])/2,(a[1]+i[1])/2,(a[2]+i[2])/2],zoom:Math.log2(window.innerWidth/(i[0]-a[0]))-1}),this.setState({loadTimeMs:Date.now()-this._loadStartMs,pointData:Gt(n),viewState:o},this._rotateCamera)},a._renderLayers=function(){var t=this.state,e=t.pointData,n=t.selectedExample;return[e&&new A.a({id:"point-cloud-layer-"+n,coordinateSystem:u.a.CARTESIAN,data:e,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]},a._renderControlPanel=function(){var t=this.state,e=t.selectedExample,n=t.pointData,r=t.selectedCategory,a=t.loadTimeMs;return i.a.createElement(Nt,{examples:Ut,selectedCategory:r,selectedExample:e,onExampleChange:this._onExampleChange,vertexCount:n&&n.length,loadTimeMs:a})},a.render=function(){var t=this.state.viewState;return i.a.createElement("div",{style:{position:"relative",height:"100%"}},this._renderControlPanel(),i.a.createElement(o.a,{views:new E,viewState:t,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}}))},r}(r.PureComponent);function Xt(t){Object(a.render)(i.a.createElement(Zt,null),t)}},"e/LK":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));n("QNMc"),n("E5k/"),n("YBKJ"),n("9ZhD"),n("n7j8");var r=n("ODXe"),i=n("1OyB"),a=n("vuIU"),o=n("Jh/b"),s=n("F8bt"),u=n("c9N0"),c=n("ZaHm"),l=n("v88f"),h=n("V3d6"),f=Math.PI/180,d=Object(s.a)(),p=[0,0,0],v={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?null:n,a=e.x,o=void 0===a?0:a,s=e.y,u=void 0===s?0:s,c=e.width,l=void 0===c?1:c,h=e.height,f=void 0===h?1:h;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=u,this.width=l||1,this.height=f||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(a.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Object(u.j)(e.projectionMatrix,this.projectionMatrix)&&Object(u.j)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,a=this.projectPosition(t),o=Object(l.o)(a,this.pixelProjectionMatrix),s=Object(r.a)(o,2),u=s[0],c=s[1],h=i?c:this.height-c;return 2===t.length?[u,h]:[u,h,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,a=e.targetZ,o=Object(r.a)(t,3),s=o[0],u=o[1],c=o[2],h=i?u:this.height-u,f=a&&a*this.distanceScales.unitsPerMeter[2],d=Object(l.m)([s,h,c],this.pixelUnprojectionMatrix,f),p=this.unprojectPosition(d),v=Object(r.a)(p,3),g=v[0],y=v[1],m=v[2];return Number.isFinite(c)?[g,y,m]:Number.isFinite(a)?[g,y,a]:[g,y]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return this.isGeospatial?Object(l.k)(t):t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?Object(l.n)(t):t}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Object(l.f)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,a=t.height,o=void 0===a?1:a;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+o}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var t=this.projectionProps,e=t.near,n=t.far,r=t.fovyRadians,i=t.aspect;return Object.assign(this._frustumPlanes,Object(s.c)({aspect:i,near:e,far:n,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,a=t.near,o=t.far;return e?(new u.b).orthographic({fovy:n,aspect:r,focalDistance:i,near:a,far:o}):(new u.b).perspective({fovy:n,aspect:r,near:a,far:o})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?d:e,r=t.longitude,i=void 0===r?null:r,a=t.latitude,o=void 0===a?null:a,s=t.zoom,c=void 0===s?null:s,h=t.position,f=void 0===h?null:h,g=t.modelMatrix,y=void 0===g?null:g,m=t.focalDistance,b=void 0===m?1:m,w=t.distanceScales,_=void 0===w?null:w;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(i),this.zoom=c,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(l.h)({latitude:o})+Math.log2(b):0);var O=Math.pow(2,this.zoom);this.scale=O,this.distanceScales=this.isGeospatial?Object(l.f)({latitude:o,longitude:i}):_||v,this.focalDistance=b,this.distanceScales.metersPerUnit=new u.e(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new u.e(this.distanceScales.unitsPerMeter),this.position=p,this.meterOffset=p,f&&(this.position=f,this.modelMatrix=y,this.meterOffset=y?y.transformVector(f):f),this.isGeospatial?(this.longitude=i,this.latitude=o,this.center=this._getCenterInWorld({longitude:i,latitude:o})):this.center=f?this.projectPosition(f):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new u.b).multiplyRight(this.viewMatrixUncentered).translate(new u.e(this.center||p).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.distanceScales,a=this.projectFlat([e,n]),o=new u.e(a[0],a[1],0);if(r){var s=new u.e(r).scale(i.unitsPerMeter);o.add(s)}return o}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,a=t.fovyRadians,o=t.fovy,s=void 0===o?75:o,u=t.near,c=void 0===u?.1:u,l=t.far,h=void 0===l?1e3:l,d=t.focalDistance,p=void 0===d?1:d;this.projectionProps={orthographic:i,fovyRadians:a||s*f,aspect:this.width/this.height,focalDistance:p,near:c,far:h},this.projectionMatrix=n||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var t=Object(s.a)();c.h(t,t,this.projectionMatrix),c.h(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=c.f([],this.viewMatrix)||this.viewMatrix;var e=Object(s.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),n=e.eye,r=e.direction,i=e.up,a=e.right;this.cameraPosition=n,this.cameraDirection=r,this.cameraUp=i,this.cameraRight=a;var u=Object(s.a)(),l=Object(s.a)();c.o(u,u,[this.width/2,-this.height/2,1]),c.p(u,u,[1,-1,0]),c.h(l,u,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=u,this.pixelUnprojectionMatrix=c.f(Object(s.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||o.a.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?h.c.WEB_MERCATOR:h.c.WEB_MERCATOR_AUTO_OFFSET:h.c.IDENTITY}}]),t}();g.displayName="Viewport"},"ei+1":function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));n("m210"),n("4DPX"),n("Ggvi"),n("JHok"),n("n7j8"),n("rzGZ"),n("Dq+y"),n("8npG"),n("YbXK"),n("xJgp"),n("E5k/");var r,i,a=n("ODXe"),o=n("1OyB"),s=n("vuIU"),u=n("yLV6"),c=n.n(u),l={mousedown:1,mousemove:2,mouseup:4};r=c.a.PointerEventInput,i=r.prototype.handler,r.prototype.handler=function(t){var e=this.store;t.button>0&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(e,(function(e){return e.pointerId===t.pointerId}))||e.push(t)),i.call(this,t)},c.a.MouseInput.prototype.handler=function(t){var e=l[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};var h=c.a.Manager,f=c.a,d=(n("sc67"),f?[[f.Rotate,{enable:!1}],[f.Pinch,{enable:!1}],[f.Swipe,{enable:!1}],[f.Pan,{threshold:0,enable:!1}],[f.Press,{enable:!1}],[f.Tap,{event:"doubletap",taps:2,enable:!1}],[f.Tap,{event:"anytap",enable:!1}],[f.Tap,{enable:!1}]]:null),p={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},v={doubletap:["tap"]},g={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},y=["keydown","keyup"],m=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],b=["wheel","mousewheel","DOMMouseScroll"],w={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},_={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},O=n("Vame"),j=-1!==O.b.indexOf("firefox"),k=b,P=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=k.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent,!!O.a&&{passive:!1})}))}return Object(s.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){"wheel"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){var e=t.deltaY;O.c.WheelEvent&&(j&&t.deltaMode===O.c.WheelEvent.DOM_DELTA_PIXEL&&(e/=O.c.devicePixelRatio),t.deltaMode===O.c.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%4.000244140625==0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:"wheel",center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),S=m,x=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=S.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return Object(s.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){"pointermove"===t&&(this.enableMoveEvent=e),"pointerover"===t&&(this.enableOverEvent=e),"pointerout"===t&&(this.enableOutEvent=e),"pointerleave"===t&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}},{key:"handleOverEvent",value:function(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:"pointerover",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleOutEvent",value:function(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:"pointerout",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleLeaveEvent",value:function(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:"pointerleave",srcEvent:t,pointerType:"mouse",target:t.target})}},{key:"handleMoveEvent",value:function(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),T=y,E=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=T.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach((function(t){return e.addEventListener(t,r.handleEvent)}))}return Object(s.a)(t,[{key:"destroy",value:function(){var t=this;this.events.forEach((function(e){return t.element.removeEventListener(e,t.handleEvent)}))}},{key:"enableEventType",value:function(t,e){"keydown"===t&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:"keydown",srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}]),t}(),A=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return Object(s.a)(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(t,e){"contextmenu"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){this.options.enable&&this.callback({type:"contextmenu",center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),C=(n("wZFJ"),n("U8pU")),M=(n("YBKJ"),n("9ZhD"),{pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4});var I={srcElement:"root",priority:0},R=function(){function t(e){Object(o.a)(this,t),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(s.a)(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.handlers,o=this.handlersByElement;n&&("object"!==Object(C.a)(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},I,n):I;var s=o.get(n.srcElement);s||(s=[],o.set(n.srcElement,s));var u={type:t,handler:e,srcElement:n.srcElement,priority:n.priority};r&&(u.once=!0),i&&(u.passive=!0),a.push(u),this._active=this._active||!u.passive;for(var c=s.length-1;c>=0&&!(s[c].priority>=u.priority);)c--;s.splice(c+1,0,u)}},{key:"remove",value:function(t,e){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var a=n[i];if(a.type===t&&a.handler===e){n.splice(i,1);var o=r.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&r.delete(a.srcElement)}}this._active=n.some((function(t){return!t.passive}))}},{key:"handleEvent",value:function(t){if(!this.isEmpty()){for(var e=this._normalizeEvent(t),n=t.srcEvent.target;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")}}},{key:"_emit",value:function(t,e){var n=this.handlersByElement.get(e);if(n){for(var r=!1,i=function(){t.handled=!0},a=function(){t.handled=!0,r=!0},o=[],s=0;s<n.length;s++){var u=n[s],c=u.type,l=u.handler,h=u.once;if(l(Object.assign({},t,{type:c,stopPropagation:i,stopImmediatePropagation:a})),h&&o.push(n[s]),r)break}for(var f=0;f<o.length;f++){var d=o[f];c=d.type,l=d.handler;this.remove(c,l)}}}},{key:"_normalizeEvent",value:function(t){var e=this.eventManager.element;return Object.assign({},t,function(t){var e=M[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,a=n.which,o=!1,s=!1,u=!1;return 4===e||2===e&&!Number.isFinite(r)?(o=1===a,s=2===a,u=3===a):2===e?(o=Boolean(1&r),s=Boolean(4&r),u=Boolean(2&r)):1===e&&(o=0===i,s=1===i,u=2===i),{leftButton:o,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),a=i.width/e.offsetWidth,o=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/a,y:(r.y-i.top-e.clientTop)/o}}}(t,e),{handled:!1,rootElement:e})}}]),t}(),L={events:null,recognizers:null,recognizerOptions:{},Manager:h,touchAction:"none",tabIndex:0},D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t),this.options=Object.assign({},L,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return Object(s.a)(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;for(var i in this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||d}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(p).forEach((function(t){var n=e.manager.get(t);n&&p[t].forEach((function(t){n.recognizeWith(t)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var s=n.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new P(t,this._onOtherEvent,{enable:!1}),this.moveInput=new x(t,this._onOtherEvent,{enable:!1}),this.keyInput=new E(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new A(t,this._onOtherEvent,{enable:!1});var u=!0,c=!1,l=void 0;try{for(var h,f=this.events[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=Object(a.a)(h.value,2),g=v[0],y=v[1];y.isEmpty()||(this._toggleRecognizer(y.recognizerName,!0),this.manager.on(g,y.handleEvent))}}catch(m){c=!0,l=m}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){this._addEventHandler(t,e,n,!1)}},{key:"once",value:function(t,e,n){this._addEventHandler(t,e,n,!0)}},{key:"watch",value:function(t,e,n){this._addEventHandler(t,e,n,!1,!0)}},{key:"off",value:function(t,e){this._removeEventHandler(t,e)}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});var i=v[t];i&&!this.options.recognizers&&i.forEach((function(i){var a=n.get(i);e?(a.requireFailure(t),r.dropRequireFailure(i)):a.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e,n,r,i){if("string"==typeof t){var a=this.manager,o=this.events,s=_[t]||t,u=o.get(s);u||(u=new R(this),o.set(s,u),u.recognizerName=w[s]||s,a&&a.on(s,u.handleEvent)),u.add(t,e,n,r,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var c in n=e,t)this._addEventHandler(c,t[c],n,r,i)}},{key:"_removeEventHandler",value:function(t,e){if("string"==typeof t){var n=this.events,r=_[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){var a=i.recognizerName,o=!1,s=!0,u=!1,c=void 0;try{for(var l,h=n.values()[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if(f.recognizerName===a&&!f.isEmpty()){o=!0;break}}}catch(p){u=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}o||this._toggleRecognizer(a,!1)}}else for(var d in t)this._removeEventHandler(d,t[d])}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=g[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}()},gBT9:function(t,e,n){var r=n("BjK0"),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},gDik:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},hJkN:function(t,e,n){"use strict";var r={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},i=(n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi"),n("AqHK"),n("V3d6")),a=Object.keys(i.a).map((function(t){return"const int COORDINATE_SYSTEM_".concat(t," = ").concat(i.a[t],";")})).join(""),o=Object.keys(i.c).map((function(t){return"const int PROJECTION_MODE_".concat(t," = ").concat(i.c[t],";")})).join(""),s="".concat(a,"\n").concat(o,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),u=n("V8ep"),c={};e.a={name:"project",dependencies:[r],vs:s,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return t.viewport?Object(u.b)(t):{}}}},hZZG:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}));var r=n("Jh/b"),i={};function a(t){i=t}function o(t){var e;r.a.level>0&&i[t]&&(e=i[t]).call.apply(e,arguments)}},kD43:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("WevN");var r=n("o0o1"),i=n.n(r),a=(n("wcNg"),n("6kNP"),n("8npG"),n("TAD1"),n("VLYs")),o=n(4),s=n("P+ME");function u(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}var l="undefined"!=typeof __VERSION__?__VERSION__:"beta",h={};function f(t,e,n){return d.apply(this,arguments)}function d(){return(d=c(i.a.mark((function t(e,n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=null),void 0===r&&(r={}),n&&(e=p(e,n,r)),h[e]=h[e]||v(e),t.next=6,h[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e,n){var r=n.modules||{};return r[t]?r[t]:a.b?n.CDN?(Object(s.a)(n.CDN.startsWith("http")),n.CDN+"/"+e+"@"+l+"/dist/libs/"+t):a.c?"../src/libs/"+t:"modules/"+e+"/src/libs/"+t:"modules/"+e+"/dist/libs/"+t}function v(t){return g.apply(this,arguments)}function g(){return(g=c(i.a.mark((function t(e){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return n=t.sent,t.next=6,n.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(a.b){t.next=9;break}return t.abrupt("return",Object(o.requireFromFile)(e));case 9:if(!a.c){t.next=11;break}return t.abrupt("return",importScripts(e));case 11:return t.next=13,fetch(e);case 13:return r=t.sent,t.next=16,r.text();case 16:return s=t.sent,t.abrupt("return",y(s,e));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t,e){if(!a.b)return Object(o.requireFromString)(t,e);if(a.c)return eval.call(a.a,t),null;var n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(r){n.text=t}return document.body.appendChild(n),null}},"kVK+":function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+t[e+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+d]=255&o,d+=p,o/=256,c-=8);t[n+d-p]|=128*v}},n6ox:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("E5k/");var r=n("1OyB"),i=n("vuIU");function a(){}var o={onStart:a,onUpdate:a,onInterrupt:a,onEnd:a},s=function(){function t(e){Object(r.a)(this,t),this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}return Object(i.a)(t,[{key:"start",value:function(t){this.cancel(),this.settings=Object.assign({},o,t),this._inProgress=!0;var e=this.timeline,n=this.settings;this._handle=e.addChannel({delay:e.getTime(),duration:n.duration}),n.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){return!!this._inProgress&&(this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0)}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),t}()},nICr:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("ofTv"),n("n7j8"),n("E5k/");var r=n("U8pU"),i=n("1OyB"),a=n("vuIU"),o=n("e/LK"),s=(n("Ll4R"),/([0-9]+\.?[0-9]*)(%|px)/);function u(t){switch(Object(r.a)(t)){case"number":return{position:t,relative:!1};case"string":var e=t.match(s);if(e&&e.length>=3){var n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function c(t,e){return t.relative?Math.round(t.position*e):t.position}var l=n("LDVv"),h=n("VMBB"),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?null:n,a=e.x,s=void 0===a?0:a,u=e.y,c=void 0===u?0:u,l=e.width,f=void 0===l?"100%":l,d=e.height,p=void 0===d?"100%":d,v=e.projectionMatrix,g=void 0===v?null:v,y=e.fovy,m=void 0===y?50:y,b=e.near,w=void 0===b?.1:b,_=e.far,O=void 0===_?1e3:_,j=e.modelMatrix,k=void 0===j?null:j,P=e.viewportInstance,S=void 0===P?null:P,x=e.type,T=void 0===x?o.a:x;Object(h.a)(!S||S instanceof o.a),this.viewportInstance=S,this.id=r||this.constructor.displayName||"view",this.type=T,this.props=Object.assign({},e,{id:this.id,projectionMatrix:g,fovy:m,near:w,far:O,modelMatrix:k}),this._parseDimensions({x:s,y:c,width:f,height:p}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(a.a)(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):Object(l.a)(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n}),a=Object.assign({viewState:r},r,this.props,i);return this._getViewport(a)}},{key:"getViewStateId",value:function(){switch(Object(r.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===Object(r.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var e=Object.assign({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:c(this._x,e),y:c(this._y,n),width:c(this._width,e),height:c(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=u(e),this._y=u(n),this._width=u(r),this._height=u(i)}}]),t}()},nMRu:function(t,e,n){"use strict";var r=n("P8UN"),i=n("DFzH"),a=n("kxs/");r(r.P+r.F*n("96qb")((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},pncC:function(t,e,n){var r=n("P8UN");r(r.S,"Number",{isInteger:n("gBT9")})},rSc4:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("YBKJ"),n("9ZhD");var r=n("1OyB"),i=n("vuIU"),a=n("VMBB"),o=function(){function t(e){Object(r.a)(this,t),Object(a.a)(Number.isFinite(e.width),"`width` must be supplied"),Object(a.a)(Number.isFinite(e.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(e)}return Object(i.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),t}()},rpwb:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s}));n("YbXK"),n("cFtU"),n("MIFh"),n("YBKJ"),n("9ZhD"),n("m210"),n("4DPX");var r=[],i=[];function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=r,o={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?a=t:t.length>0&&(i.length=t.length,a=i):a=r,(e>0||Number.isFinite(n))&&(a=(Array.isArray(a)?a:Array.from(a)).slice(e,n),o.index=e-1),{iterable:a,objectInfo:o}}function o(t){return t&&t[Symbol.asyncIterator]}function s(t,e){var n=e.size,r=e.stride,i=e.offset,a=e.startIndices,o=e.nested,s=t.BYTES_PER_ELEMENT,u=r?r/s:n,c=i?i/s:0,l=Math.floor((t.length-c)/u);return function(e,r){var i=r.index,s=r.target;if(!a){for(var h=i*u+c,f=0;f<n;f++)s[f]=t[h+f];return s}var d,p=a[i],v=a[i+1]||l;if(o){d=new Array(v-p);for(var g=p;g<v;g++){var y=g*u+c;s=new Array(n);for(var m=0;m<n;m++)s[m]=t[y+m];d[g-p]=s}}else if(u===n)d=t.subarray(p*n+c,v*n+c);else{d=new t.constructor((v-p)*n);for(var b=0,w=p;w<v;w++)for(var _=w*u+c,O=0;O<n;O++)d[b++]=t[_+O]}return d}}},sxJW:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("JHok"),n("E5k/"),n("n7j8");var r=n("1OyB"),i=n("vuIU"),a=n("zheZ"),o=n("Jh/b"),s=n("VMBB"),u={transitionDuration:0},c=["wheel"],l=["panstart","panmove","panend"],h=["pinchstart","pinchmove","pinchend"],f=["doubletap"],d=["keydown"],p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(s.a)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new a.b(e,n),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(i.a)(t,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(Object.assign({},this.controllerStateProps,this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,r=n.width,i=n.height;if(e&&e.handled)return!1;var a=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return a&&e&&e.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewportChange"in t&&o.a.removed("onViewportChange")(),"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,r=t.dragPan,i=void 0===r||r,a=t.dragRotate,s=void 0===a||a,u=t.doubleClickZoom,p=void 0===u||u,v=t.touchZoom,g=void 0===v||v,y=t.touchRotate,m=void 0!==y&&y,b=t.keyboard,w=void 0===b||b,_=Boolean(this.onViewStateChange);this.toggleEvents(c,_&&n),this.toggleEvents(l,_&&(i||s)),this.toggleEvents(h,_&&(g||m)),this.toggleEvents(f,_&&p),this.toggleEvents(d,_&&w),this.scrollZoom=n,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=p,this.touchZoom=g,this.touchRotate=m,this.keyboard=w}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t.getViewportProps(),e),i=this.controllerState!==t;if(i){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:a})}Object.assign(this._state,t.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,u,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){if(!this.isDragging())return!1;var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,u,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,r=this.controllerState.getViewportProps(),i=e/r.width,a=n/r.height,o=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:a});return this.updateViewport(o,u,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=t.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:e,scale:r});return this.updateViewport(i,u,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,u,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,a=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(e,u,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.controllerState,i={};switch(t.srcEvent.keyCode){case 189:e=n?r.zoomOut().zoomOut():r.zoomOut(),i.isZooming=!0;break;case 187:e=n?r.zoomIn().zoomIn():r.zoomIn(),i.isZooming=!0;break;case 37:n?(e=r.rotateLeft(),i.isRotating=!0):(e=r.moveLeft(),i.isPanning=!0);break;case 39:n?(e=r.rotateRight(),i.isRotating=!0):(e=r.moveRight(),i.isPanning=!0);break;case 38:n?(e=r.rotateUp(),i.isRotating=!0):(e=r.moveUp(),i.isPanning=!0);break;case 40:n?(e=r.rotateDown(),i.isRotating=!0):(e=r.moveDown(),i.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),i),!0}},{key:"_getTransitionProps",value:function(){return u}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}}]),t}()},"t+fG":function(t,e,n){var r=n("P8UN"),i=n("96qb"),a=n("ap2Z"),o=/"/g,s=function(t,e,n,r){var i=String(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},uSBc:function(t,e,n){var r=n("chL8"),i=n("lHo0"),a=n("1a8y"),o=n("emib").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},v88f:function(t,e,n){"use strict";n.d(e,"c",(function(){return D})),n.d(e,"a",(function(){return D})),n.d(e,"d",(function(){return L})),n.d(e,"l",(function(){return N})),n.d(e,"e",(function(){return U})),n.d(e,"g",(function(){return B})),n.d(e,"k",(function(){return k})),n.d(e,"n",(function(){return P})),n.d(e,"o",(function(){return M})),n.d(e,"m",(function(){return I})),n.d(e,"h",(function(){return S})),n.d(e,"f",(function(){return x})),n.d(e,"b",(function(){return T})),n.d(e,"j",(function(){return E})),n.d(e,"i",(function(){return A}));n("E5k/"),n("DrhF");var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("JX7q"),u=n("Ji7U"),c=(n("YBKJ"),n("9ZhD"),n("n7j8"),n("ODXe")),l=n("bl9R");function h(t,e){var n=l.n([],e,t);return l.k(n,n,1/n[3]),n}function f(t,e){var n=t%e;return n<0?e+n:n}function d(t,e,n){return n*e+(1-n)*t}n("QNMc");var p=n("ZaHm"),v=n("ZxFD"),g=n("n+fv");function y(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var m=Math.PI,b=m/4,w=m/180,_=180/m;function O(t){return Math.pow(2,t)}function j(t){return Math.log2(t)}function k(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];y(Number.isFinite(n)),y(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*w;return[512*(n*w+m)/(2*m),512*(m+Math.log(Math.tan(b+.5*i)))/(2*m)]}function P(t){var e=Object(c.a)(t,2),n=e[0],r=e[1],i=n/512*(2*m)-m,a=2*(Math.atan(Math.exp(r/512*(2*m)-m))-b);return[i*_,a*_]}function S(t){var e=t.latitude;return y(Number.isFinite(e)),j(4003e4*Math.cos(e*w))-9}function x(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;y(Number.isFinite(e)&&Number.isFinite(n));var a={},o=Math.cos(e*w),s=512/360/o,u=512/4003e4/o;if(a.unitsPerMeter=[u,u,u],a.metersPerUnit=[1/u,1/u,1/u],a.unitsPerDegree=[512/360,s,u],a.degreesPerUnit=[.703125,1/s,1/u],i){var c=w*Math.tan(e*w)/o,l=512/360*c/2,h=512/4003e4*c,f=h/s*u;a.unitsPerDegree2=[0,l,h],a.unitsPerMeter2=[f,0,f]}return a}function T(t,e){var n=Object(c.a)(t,3),r=n[0],i=n[1],a=n[2],o=Object(c.a)(e,3),s=o[0],u=o[1],l=o[2],h=x({longitude:r,latitude:i,highPrecision:!0}),f=h.unitsPerMeter,d=h.unitsPerMeter2,p=k(t);p[0]+=s*(f[0]+d[0]*u),p[1]+=u*(f[1]+d[1]*u);var v=P(p),g=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[v[0],v[1],g]:v}function E(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,a=t.scale,o=t.center,s=void 0===o?null:o,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return p.p(u,u,[0,0,-i]),p.l(u,u,-n*w),p.n(u,u,r*w),a/=e,p.o(u,u,[a,a,a]),s&&p.p(u,u,g.h([],s)),u}function A(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?1.5:r,a=t.pitch,o=void 0===a?0:a,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,h=o*w,f=Math.atan(.5/i),d=Math.sin(f)*i/Math.sin(Math.PI/2-h-f);return{fov:2*f,aspect:e/n,focalDistance:i,near:u,far:(Math.cos(Math.PI/2-h)*d+i)*l}}function C(t){var e=t.width,n=t.height,r=t.pitch,i=A({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,u=i.far;return p.j([],a,o,s,u)}function M(t,e){var n=Object(c.a)(t,3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a;return y(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),h(e,[r,i,o,1])}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(c.a)(t,3),i=r[0],a=r[1],o=r[2];if(y(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=h(e,[i,a,o,1]);return s}var u=h(e,[i,a,0,1]),l=h(e,[i,a,1,1]),f=u[2],d=l[2],p=f===d?0:((n||0)-f)/(d-f);return v.c([],u,l,p)}var R=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,a=void 0===i?0:i,o=t.maxZoom,s=void 0===o?24:o,u=t.padding,l=void 0===u?0:u,h=t.offset,f=void 0===h?[0,0]:h,d=Object(c.a)(r,2),p=Object(c.a)(d[0],2),v=p[0],g=p[1],m=Object(c.a)(d[1],2),b=m[0],w=m[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else y(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var _=new D({width:e,height:n,longitude:0,latitude:0,zoom:0}),O=_.project([v,w]),j=_.project([b,g]),k=[Math.max(Math.abs(j[0]-O[0]),a),Math.max(Math.abs(j[1]-O[1]),a)],P=[e-l.left-l.right-2*Math.abs(f[0]),n-l.top-l.bottom-2*Math.abs(f[1])];y(P[0]>0&&P[1]>0);var S=P[0]/k[0],x=P[1]/k[1],T=(l.right-l.left)/2/S,E=(l.bottom-l.top)/2/x,A=[(j[0]+O[0])/2+T,(j[1]+O[1])/2+E],C=_.unproject(A),M=Math.min(s,_.zoom+Math.log2(Math.abs(Math.min(S,x))));return y(Number.isFinite(M)),{longitude:C[0],latitude:C[1],zoom:M}}var D=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,u=n.height,c=n.latitude,l=void 0===c?0:c,h=n.longitude,f=void 0===h?0:h,d=n.zoom,p=void 0===d?0:d,v=n.pitch,g=void 0===v?0:v,y=n.bearing,m=void 0===y?0:y,b=n.altitude,w=void 0===b?1.5:b,_=n.nearZMultiplier,j=void 0===_?.02:_,P=n.farZMultiplier,S=void 0===P?1.01:P;Object(r.a)(this,e),i=i||1,u=u||1;var T=O(p);w=Math.max(.75,w);var A=k([f,l]);A[2]=0;var M=C({width:i,height:u,pitch:g,bearing:m,altitude:w,nearZMultiplier:j,farZMultiplier:S}),I=E({height:u,scale:T,center:A,pitch:g,bearing:m,altitude:w});return(t=Object(a.a)(this,Object(o.a)(e).call(this,{width:i,height:u,scale:T,viewMatrix:I,projectionMatrix:M}))).latitude=l,t.longitude=f,t.zoom=p,t.pitch=g,t.bearing=m,t.altitude=w,t.center=A,t.unitsPerMeter=x(Object(s.a)(t)).unitsPerMeter[2],Object.freeze(Object(s.a)(t)),t}return Object(u.a)(e,t),Object(i.a)(e,[{key:"projectFlat",value:function(t){return k(t)}},{key:"unprojectFlat",value:function(t){return P(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=I(t.pos,this.pixelUnprojectionMatrix),r=k(e),i=v.a([],r,v.d([],n));return P(v.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=L(Object.assign({width:r,height:i,bounds:t},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new e({width:r,height:i,longitude:o,latitude:s,zoom:u})}}]),e}(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=e.height,a=e.scale,o=e.viewMatrix,s=void 0===o?R:o,u=e.projectionMatrix,c=void 0===u?R:u;Object(r.a)(this,t),this.width=n||1,this.height=i||1,this.scale=a,this.unitsPerMeter=1,this.viewMatrix=s,this.projectionMatrix=c;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.h(l,l,this.projectionMatrix),p.h(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.o(h,h,[this.width/2,-this.height/2,1]),p.p(h,h,[1,-1,0]),p.h(h,h,this.viewProjectionMatrix);var f=p.f([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h);if(!f)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=f,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(i.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&p.b(e.projectionMatrix,this.projectionMatrix)&&p.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),a=M(i,this.pixelProjectionMatrix),o=Object(c.a)(a,2),s=o[0],u=o[1],l=r?u:this.height-u;return 2===t.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,a=Object(c.a)(t,3),o=a[0],s=a[1],u=a[2],l=r?s:this.height-s,h=i&&i*this.unitsPerMeter,f=I([o,l,u],this.pixelUnprojectionMatrix,h),d=this.unprojectPosition(f),p=Object(c.a)(d,3),v=p[0],g=p[1],y=p[2];return Number.isFinite(u)?[v,g,y]:Number.isFinite(i)?[v,g,i]:[v,g]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(c.a)(e,2);return[n[0],n[1],(t[2]||0)*this.unitsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(c.a)(e,2);return[n[0],n[1],(t[2]||0)/this.unitsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),t}());function N(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,a=t.zoom,o=t.pitch,s=void 0===o?0:o,u=t.bearing,c=void 0===u?0:u;(r<-180||r>180)&&(r=f(r+180,360)-180),(c<-180||c>180)&&(c=f(c+180,360)-180);var l=new D({width:e,height:n,longitude:r,latitude:i,zoom:a}),h=l.project([r,85.05113])[1],d=l.project([r,-85.05113])[1],p=0;return d-h<n&&(a+=Math.log2(n/(d-h)),h=(l=new D({width:e,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],d=l.project([r,-85.05113])[1]),h>0?p=h:d<n&&(p=d-n),p&&(i=l.unproject([e/2,n/2+p])[1]),{width:e,height:n,longitude:r,latitude:i,zoom:a,pitch:s,bearing:c}}n("xclO"),n("BK7i"),n("1RH0"),n("m210"),n("4DPX"),n("rzGZ");var F=["longitude","latitude","zoom"],z={curve:1.414,speed:1.2};function U(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},a=V(t,e,r),o=a.startZoom,s=a.startCenterXY,u=a.uDelta,c=a.w0,l=a.u1,h=a.S,f=a.rho,p=a.rho2,g=a.r0;if(l<.01){var y=!0,m=!1,b=void 0;try{for(var w,_=F[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var O=w.value,k=t[O],S=e[O];i[O]=d(k,S,n)}}catch(R){m=!0,b=R}finally{try{y||null==_.return||_.return()}finally{if(m)throw b}}return i}var x=n*h,T=Math.cosh(g)/Math.cosh(g+f*x),E=c*((Math.cosh(g)*Math.tanh(g+f*x)-Math.sinh(g))/p)/l,A=1/T,C=o+j(A),M=v.e([],u,E);v.a(M,M,s);var I=P(M);return i.longitude=I[0],i.latitude=I[1],i.zoom=C,i}function B(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},z,r),a=i.screenSpeed,o=i.speed,s=i.maxDuration,u=V(t,e,r),c=u.S,l=u.rho,h=1e3*c;return n=Number.isFinite(a)?h/(a/l):h/o,Number.isFinite(s)&&n>s?0:n}function V(t,e,n){var r=(n=Object.assign({},z,n)).curve,i=t.zoom,a=[t.longitude,t.latitude],o=O(i),s=e.zoom,u=[e.longitude,e.latitude],c=O(s-i),l=k(a),h=k(u),f=v.f([],h,l),d=Math.max(t.width,t.height),p=d/c,g=v.b(f)*o,y=Math.max(g,.01),m=r*r,b=(p*p-d*d+m*m*y*y)/(2*d*m*y),w=(p*p-d*d-m*m*y*y)/(2*p*m*y),_=Math.log(Math.sqrt(b*b+1)-b),j=Math.log(Math.sqrt(w*w+1)-w);return{startZoom:i,startCenterXY:l,uDelta:f,w0:d,u1:g,S:(j-_)/r,rho:r,rho2:m,r0:_,r1:j}}},vJvp:function(t,e,n){var r=n("P8UN");r(r.S,"Math",{fround:n("vRRU")})},vRRU:function(t,e,n){var r=n("gDik"),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/o+1/a-1/a)*u*o:(n=(e=(1+o/a)*i)-(e-i))>s||n!=n?c*(1/0):c*n}},wldP:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("YBKJ"),n("9ZhD"),n("JHok"),n("m210"),n("4DPX"),n("Dq+y"),n("8npG"),n("Ggvi"),n("rzGZ"),n("MIFh");var r=n("1OyB"),i=n("vuIU"),a=n("c9N0"),o=n("VMBB"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,i=n.compare,a=n.extract,o=n.required;this._propsToCompare=i,this._propsToExtract=a,this._requiredProps=o}return Object(i.a)(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;if(!(u in t)||!(u in e)||!Object(a.j)(t[u],e[u]))return!1}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r={},i={},a=!0,o=!1,s=void 0;try{for(var u,c=this._propsToExtract[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r[l]=t[l],i[l]=e[l]}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}n={start:r,end:i}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){return e}},{key:"getDuration",value:function(t,e){return e.transitionDuration}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach((function(e){var n=t[e];Object(o.a)(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}]),t}()},xclO:function(t,e,n){var r=n("P8UN"),i=n("+Gmq"),a=Math.exp;r(r.S+r.F*n("96qb")((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},xtjI:function(t,e,n){var r=n("P8UN"),i=n("uSBc"),a=n("5SQf"),o=n("Drra"),s=n("Fgx0");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),u=o.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&s(l,e,n);return l}})},y7hu:function(t,e,n){"use strict";n("t+fG")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},yLV6:function(t,e,n){var r;n("OeI1"),n("zGcK"),n("HXzo"),n("HQhv"),n("sc67"),n("pS08"),n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi"),n("E5k/"),n("sC2a"),n("JHok"),n("MIFh"),n("1dPr"),function(i,a,o,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=a.createElement("div"),h=Math.round,f=Math.abs,d=Date.now;function p(t,e,n){return setTimeout(_(t,n),e)}function v(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var m=y((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),b=y((function(t,e){return m(t,e,!0)}),"merge","Use `assign`.");function w(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function O(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function j(t,e){return void 0===t?e:t}function k(t,e,n){g(T(e),(function(e){t.addEventListener(e,n,!1)}))}function P(t,e,n){g(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function C(t,e,n){for(var r=[],i=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];E(i,o)<0&&r.push(t[a]),i[a]=o,a++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function M(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),a=0;a<c.length;){if((r=(n=c[a])?n+i:e)in t)return r;a++}}var I=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var L="ontouchstart"in i,D=void 0!==M(i,"PointerEvent"),N=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],z=["clientX","clientY"];function U(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){O(t.options.enable,[t])&&n.handler(e)},this.init()}function B(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,a=1&e&&r-i==0,o=12&e&&r-i==0;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=V(e));i>1&&!n.firstMultiple?n.firstMultiple=V(e):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,u=e.center=Y(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=H(s,u),e.distance=X(s,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},a=t.prevInput||{};1!==e.eventType&&4!==a.eventType||(i=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=Z(e.deltaX,e.deltaY);var c=G(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=f(c.x)>f(c.y)?c.x:c.y,e.scale=o?(l=o.pointers,h=r,X(h[0],h[1],z)/X(l[0],l[1],z)):1,e.rotation=o?function(t,e){return H(e[1],e[0],z)+H(t[1],t[0],z)}(o.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,a,o=t.lastInterval||e,s=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(s>25||void 0===o.velocity)){var u=e.deltaX-o.deltaX,c=e.deltaY-o.deltaY,l=G(s,u,c);r=l.x,i=l.y,n=f(l.x)>f(l.y)?l.x:l.y,a=Z(u,c),t.lastInterval=e}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=a}(n,e);var l,h;var p=t.element;S(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function V(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:Y(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Y(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function G(t,e,n){return{x:e/t||0,y:n/t||0}}function Z(t,e){return t===e?1:f(t)>=f(e)?t<0?2:4:e<0?8:16}function X(t,e,n){n||(n=F);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function H(t,e,n){n||(n=F);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}U.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(R(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4};function W(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,U.apply(this,arguments)}w(W,U,{handler:function(t){var e=q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",$="pointermove pointerup pointercancel";function tt(){this.evEl=Q,this.evWin=$,U.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(Q="MSPointerDown",$="MSPointerMove MSPointerUp MSPointerCancel"),w(tt,U,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=J[r],a=K[t.pointerType]||t.pointerType,o="touch"==a,s=E(e,t.pointerId,"pointerId");1&i&&(0===t.button||o)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(s,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function nt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,U.apply(this,arguments)}function rt(t,e){var n=A(t.touches),r=A(t.changedTouches);return 12&e&&(n=C(n.concat(r),"identifier",!0)),[n,r]}w(nt,U,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var n=rt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var it={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function at(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},U.apply(this,arguments)}function ot(t,e){var n=A(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=A(t.changedTouches),s=[],u=this.target;if(a=n.filter((function(t){return S(t.target,u)})),1===e)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&e&&delete r[o[i].identifier],i++;return s.length?[C(a.concat(s),"identifier",!0),s]:void 0}w(at,U,{handler:function(t){var e=it[t.type],n=ot.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});function st(){U.apply(this,arguments);var t=_(this.handler,this);this.touch=new at(this.manager,t),this.mouse=new W(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ut(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ct.call(this,e)):12&t&&ct.call(this,e)}function ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function lt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(e-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}w(st,U,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ut.call(this,e,n);else if(i&&lt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ht=M(l.style,"touchAction"),ft=void 0!==ht,dt=function(){if(!ft)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function pt(t,e){this.manager=t,this.set(e)}pt.prototype={set:function(t){"compute"==t&&(t=this.compute()),ft&&this.manager.element.style&&dt[t]&&(this.manager.element.style[ht]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){O(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(x(t,"none"))return"none";var e=x(t,"pan-x"),n=x(t,"pan-y");if(e&&n)return"none";if(e||n)return e?"pan-x":"pan-y";if(x(t,"manipulation"))return"manipulation";return"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=x(r,"none")&&!dt.none,a=x(r,"pan-y")&&!dt["pan-y"],o=x(r,"pan-x")&&!dt["pan-x"];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!o||!a)return i||a&&6&n||o&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function vt(t){this.options=u({},this.defaults,t||{}),this.id=I++,this.manager=null,this.options.enable=j(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function gt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function yt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function mt(t,e){var n=e.manager;return n?n.get(t):t}function bt(){vt.apply(this,arguments)}function wt(){bt.apply(this,arguments),this.pX=null,this.pY=null}function _t(){bt.apply(this,arguments)}function Ot(){vt.apply(this,arguments),this._timer=null,this._input=null}function jt(){bt.apply(this,arguments)}function kt(){bt.apply(this,arguments)}function Pt(){vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function St(t,e){return(e=e||{}).recognizers=j(e.recognizers,St.defaults.preset),new xt(t,e)}vt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=mt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)||(t=mt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=mt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=mt(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+gt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+gt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!O(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(bt,vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32}}),w(wt,bt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,a=t.deltaX,o=t.deltaY;return i&e.direction||(6&e.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(t.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return bt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=yt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(_t,bt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Ot,vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),w(jt,bt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(kt,bt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return wt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=yt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Pt,vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||X(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),St.VERSION="2.0.7",St.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[jt,{enable:!1}],[_t,{enable:!1},["rotate"]],[kt,{direction:6}],[wt,{direction:6},["swipe"]],[Pt],[Pt,{event:"doubletap",taps:2},["tap"]],[Ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function xt(t,e){var n;this.options=u({},St.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(D?tt:N?at:L?st:W))(n,B),this.touchAction=new pt(this,this.options.touchAction),Tt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Tt(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,a){n=M(r.style,a),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}xt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),a++}},get:function(t){if(t instanceof vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return g(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return g(T(t),(function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=a.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(St,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:xt,Input:U,TouchAction:pt,TouchInput:at,MouseInput:W,PointerEventInput:tt,TouchMouseInput:st,SingleTouchInput:nt,Recognizer:vt,AttrRecognizer:bt,Tap:Pt,Pan:wt,Swipe:kt,Pinch:_t,Rotate:jt,Press:Ot,on:k,off:P,each:g,merge:b,extend:m,assign:u,inherit:w,bindFn:_,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=St,void 0===(r=function(){return St}.call(e,n,e,t))||(t.exports=r)}(window,document)},yYqN:function(t,e,n){"use strict";n.d(e,"a",(function(){return ce}));n("E5k/"),n("n7j8");var r=n("1OyB"),i=n("vuIU"),a=n("md7G"),o=n("foSv"),s=n("JX7q"),u=n("Ji7U"),c=n("q1tI"),l=n.n(c),h=n("17x9"),f=n.n(h),d=(n("MIFh"),n("YBKJ"),n("9ZhD"),n("pS08"),n("R48M"),n("+ar0"),n("xtjI"),n("JHok"),n("OeI1"),n("4DPX"),n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi"),n("rePB")),p=(n("sc67"),n("v9g0"),n("m210"),n("ofTv"),n("VMBB")),v=(n("ZiRl"),n("YbXK"),n("xJgp"),n("ODXe")),g=1,y=1,m=function(){function t(){Object(r.a)(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(i.a)(t,[{key:"addChannel",value:function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,a=t.rate,o=void 0===a?1:a,s=t.repeat,u=g++,c={time:0,delay:n,duration:i,rate:o,repeat:void 0===s?1:s};return this._setChannelTime(c,this.time),this.channels.set(u,c),u}},{key:"removeChannel",value:function(t){this.channels.delete(t);var e=!0,n=!1,r=void 0;try{for(var i,a=this.animations[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=Object(v.a)(i.value,2),s=o[0];o[1].channel===t&&this.detachAnimation(s)}}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e=this.channels.values(),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this._setChannelTime(s,this.time)}}catch(y){r=!0,i=y}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=this.animations.values(),c=!0,l=!1,h=void 0;try{for(var f,d=u[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var p=f.value,v=p.animation,g=p.channel;v.setTime(this.getTime(g))}}catch(y){l=!0,h=y}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var n=y++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}},{key:"detachAnimation",value:function(t){this.animations.delete(t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}]),t}(),b=n("K7jV"),w=n("I3n7"),_=n("Jh/b"),O=n("hZZG"),j=n("Zk56"),k=n("laie"),P=n("e/LK"),S=n("haqy"),x={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},T=n("hJkN"),E=[x,T.a],A=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function C(t){var e=S.a.getDefaultProgramManager(t),n=!0,r=!1,i=void 0;try{for(var a,o=E[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.addDefaultModule(s)}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var h,f=A[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;e.addShaderHook(d)}}catch(p){c=!0,l=p}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}return e}var M=Object.seal({layerManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),I=function(t){return t instanceof b.a?"".concat(t):t?"invalid":"null"},R=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.deck,a=n.stats,o=n.viewport,s=void 0===o?null:o,u=n.timeline,c=void 0===u?null:u;Object(r.a)(this,t),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},M,{layerManager:this,deck:i,gl:e,programManager:e&&C(e),stats:a||new k.b({id:"deck.gl"}),viewport:s||new P.a({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:c||new m}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"finalize",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this._finalizeLayer(a)}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.getNeedsRedraw(t);e=e||u}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.layerIds,n=void 0===e?null:e;return n?this.layers.filter((function(t){return n.find((function(e){return 0===t.id.indexOf(e)}))})):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&this.setLayers(t.layers),"onError"in t&&(this._onError=t.onError)}},{key:"setLayers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||t!==this.lastRenderedLayers;if(Object(O.a)("layerManager.setLayers",this,n,t),!n)return this;this.lastRenderedLayers=t,t=Object(j.b)(t,Boolean);var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.context=this.context}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this._updateLayers(this.layers,t),this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();if(t){this.setNeedsRedraw("updating layers: ".concat(t));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(t){Object(p.a)(t,"LayerManager: viewport not set");var e=this.context.viewport;if(!e||!t.equals(e)){Object(O.a)("layerManager.activateViewport",this,t),this.context.viewport=t;var n={viewportChanged:!0},r=!0,i=!1,a=void 0;try{for(var o,s=this.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.setChangeFlags(n),this._updateLayer(u)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return this}},{key:"_handleError",value:function(t,e,n){this._onError?this._onError(e,n):_.a.error("error during ".concat(t," of ").concat(I(n)),e)()}},{key:"_updateLayers",value:function(t,e){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n[u.id]?_.a.warn("Multiple old layers with same id ".concat(I(u)))():n[u.id]=u}}catch(d){i=!0,a=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=[];this._updateSublayersRecursively(e,n,c),this._finalizeOldLayers(n);for(var l=!1,h=0,f=c;h<f.length;h++){if(f[h].hasUniformTransition()){l=!0;break}}this._needsUpdate=l,this.layers=c}},{key:"_updateSublayersRecursively",value:function(t,e,n){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.context=this.context;var c=e[u.id];null===c&&_.a.warn("Multiple new layers with same id ".concat(I(u)))(),e[u.id]=null;var l=null;try{this._debug&&c!==u&&u.validateProps(),c?(this._transferLayerState(c,u),this._updateLayer(u)):this._initializeLayer(u),n.push(u),l=u.isComposite&&u.getSubLayers()}catch(h){this._handleError("matching",h,u)}l&&this._updateSublayersRecursively(l,e,n)}}catch(h){i=!0,a=h}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"_finalizeOldLayers",value:function(t){for(var e in t){var n=t[e];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(t){try{t._initialize(),t.lifecycle=w.a.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=w.a.MATCHED,e!==t&&(t.lifecycle=w.a.AWAITING_GC)}},{key:"_updateLayer",value:function(t){try{t._update()}catch(e){this._handleError("update",e,t)}}},{key:"_finalizeLayer",value:function(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(I(t)),t.lifecycle=w.a.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=w.a.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}]),t}(),L=(n("wZFJ"),n("LDVv")),D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}return Object(i.a)(t,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"updateViewStates",value:function(){for(var t in this.controllers){var e=this.controllers[t];e&&e.updateTransition()}}},{key:"getViewports",value:function(t){return t?this._viewports.filter((function(e){return e.containsPixel(t)})):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach((function(e){t[e.id]=e})),t}},{key:"getView",value:function(t){return"string"==typeof t?this.views.find((function(e){return e.id===t})):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r={x:t[0],y:t[1]},i=n.length-1;i>=0;--i){var a=n[i];if(a.containsPixel(r)){var o=t.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,e)}}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){Object(p.a)(Number.isFinite(t)&&Number.isFinite(e)),t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=Object(j.b)(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!Object(L.a)(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):_.a.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t){return new(0,t.type)(Object.assign({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},t))}},{key:"_updateController",value:function(t,e,n,r){if(t.controller){var i=Object.assign({},t.controller,e,{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function(){var t=this.width,e=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var a=n[i],o=this.getViewState(a),s=a.makeViewport({width:t,height:e,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,r[a.id]),this._viewports.unshift(s)}for(var u in r)r[u]&&!this.controllers[u]&&r[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach((function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)}))}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some((function(n,r){return!t[r].equals(e[r])}))}}]),t}(),N=n("nICr"),F=(n("DrhF"),n("v88f")),z=n("ZxFD"),U=n("c9N0");function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e);var i=n.latitude,u=void 0===i?0:i,c=n.longitude,l=void 0===c?0:c,h=n.zoom,f=void 0===h?11:h,d=n.pitch,p=void 0===d?0:d,v=n.bearing,g=void 0===v?0:v,y=n.nearZMultiplier,m=void 0===y?.1:y,b=n.farZMultiplier,w=void 0===b?1.01:b,_=n.orthographic,O=void 0!==_&&_,j=n.repeat,k=void 0!==j&&j,P=n.worldOffset,S=void 0===P?0:P,x=n.width,T=n.height,E=n.altitude,A=void 0===E?1.5:E,C=Math.pow(2,f);x=x||1,T=T||1,A=Math.max(.75,A);var M=Object(F.i)({width:x,height:T,pitch:p,altitude:A,nearZMultiplier:m,farZMultiplier:w}),I=M.fov,R=M.aspect,L=M.focalDistance,D=M.near,N=M.far,z=Object(F.j)({height:T,pitch:p,bearing:g,scale:C,altitude:A});if(S){var B=(new U.b).translate([512*S,0,0]);z=B.multiplyLeft(z)}var V=Object.assign({},n,{width:x,height:T,viewMatrix:z,longitude:l,latitude:u,zoom:f,orthographic:O,fovyRadians:I,aspect:R,focalDistance:O?L:1,near:D,far:N});return(t=Object(a.a)(this,Object(o.a)(e).call(this,V))).latitude=u,t.longitude=l,t.zoom=f,t.pitch=p,t.bearing=g,t.altitude=A,t.orthographic=O,t._subViewports=k?[]:null,Object.freeze(Object(s.a)(t)),t}return Object(u.a)(e,t),Object(i.a)(e,[{key:"addMetersToLngLat",value:function(t,e){return Object(F.b)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(F.m)(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),a=z.a([],i,z.d([],r)),o=z.a([],this.center,a);return this.unprojectFlat(o)}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=Object(F.d)(Object.assign({width:r,height:i,bounds:t},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new e({width:r,height:i,longitude:o,latitude:s,zoom:u})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var t=this.unproject([0,0]),n=this.unproject([this.width,0]),r=this.unproject([0,this.height]),i=this.unproject([this.width,this.height]),a=Math.min(t[0],n[0],r[0],i[0]),o=Math.max(t[0],n[0],r[0],i[0]),s=Math.floor((a+180)/360),u=Math.ceil((o-180)/360),c=s;c<=u;c++){var l=c?new e(V({},this,{worldOffset:c})):this;this._subViewports.push(l)}return this._subViewports}}]),e}(P.a);Y.displayName="WebMercatorViewport";var G=n("BENj"),Z=function(t){function e(t){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).call(this,Object.assign({},t,{type:Y})))}return Object(u.a)(e,t),Object(i.a)(e,[{key:"controller",get:function(){return this._getControllerProps({type:G.a})}}]),e}(N.a);Z.displayName="MapView";n("AqHK");var X=n("f5Sf"),H=[255,255,255],q=0,W=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.color,i=void 0===n?H:n,a=e.intensity,o=void 0===a?1:a;this.id=e.id||"ambient-".concat(q++),this.color=i,this.intensity=o,this.type="ambient"},J=[255,255,255],K=[0,0,-1],Q=0,$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.color,i=void 0===n?J:n,a=e.intensity,o=void 0===a?1:a,s=e.direction,u=void 0===s?K:s,c=e._shadow,l=void 0!==c&&c;this.id=e.id||"directional-".concat(Q++),this.color=i,this.intensity=o,this.type="directional",this.direction=new U.e(u).normalize().toArray(),this.shadow=l}return Object(i.a)(t,[{key:"getProjectedLight",value:function(){return this}}]),t}(),tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.id,i=void 0===n?"effect":n;this.id=i,this.props={},Object.assign(this.props,e)}return Object(i.a)(t,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),t}(),et=n("ReuC"),nt=(n("TAD1"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t);var i=n.id,a=void 0===i?"pass":i;this.id=a,this.gl=e,this.props={},Object.assign(this.props,n)}return Object(i.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),t}()),rt=n("iein"),it=n("pRFE"),at=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(i.a)(e,[{key:"render",value:function(t){var e=this.gl;return Object(rt.j)(e,{framebuffer:t.target}),this._drawLayers(t)}},{key:"_drawLayers",value:function(t){var e=t.viewports,n=t.views,r=t.onViewportActive,i=t.clearCanvas,a=void 0===i||i,o=this.gl;a&&function(t){var e=t.drawingBufferWidth,n=t.drawingBufferHeight;Object(rt.j)(t,{viewport:[0,0,e,n]}),t.clear(16640)}(o);var s=[],u=!0,c=!1,l=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value,p=d.viewport||d,v=n&&n[p.id];r(p),t.view=v;var g=p.subViewports||[p],y=!0,m=!1,b=void 0;try{for(var w,_=g[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var O=w.value;t.viewport=O;var j=this._drawLayersInViewport(o,t);s.push(j)}}catch(k){m=!0,b=k}finally{try{y||null==_.return||_.return()}finally{if(m)throw b}}}}catch(k){c=!0,l=k}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}return s}},{key:"_drawLayersInViewport",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.onError,a=e.viewport,o=e.view,s=e.pass,u=void 0===s?"unknown":s,c=e.effects,l=e.moduleParameters,h=function(t,e){var n=e.viewport,r=t.canvas?t.canvas.clientHeight||t.canvas.height:100,i=n,a=Object(rt.c)(t);return[i.x*a,(r-i.y-i.height)*a,i.width*a,i.height*a]}(t,{viewport:a});if(o&&o.props.clear){var f=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;Object(rt.k)(t,{scissorTest:!0,scissor:h},(function(){return Object(it.a)(t,f)}))}var d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(rt.j)(t,{viewport:h});for(var p=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return function(i,a){var o,s=i.props._offset,u=i.id,c=i.parent&&i.parent.id;if(c in r){var l=r[c]=r[c]||t(n[c],n);o=l(i,a),r[u]=l}else Number.isFinite(s)?(o=s+(n[c]||0),r[u]=null):o=e;return a&&o>=e&&(e=o+1),n[u]=o,o}}(),v=0;v<n.length;v++){var g=n[v],y=this._shouldDrawLayer(g,a,u,r),m=p(g,y);if(y&&g.props.pickable&&d.pickableCount++,g.isComposite&&d.compositeCount++,y){d.visibleCount++;var b=this._getModuleParameters(g,c,u,l),w=this.getLayerParameters(g,v);b.viewport=a;try{g.drawLayer({moduleParameters:b,uniforms:{layerIndex:m},parameters:w})}catch(O){i?i(O,g):_.a.error("error during drawing of ".concat(g),O)()}}}return d}},{key:"shouldDrawLayer",value:function(t){return!0}},{key:"getModuleParameters",value:function(t,e){return null}},{key:"getLayerParameters",value:function(t,e){return t.props.parameters}},{key:"_shouldDrawLayer",value:function(t,e,n,r){var i=this.shouldDrawLayer(t)&&!t.isComposite&&t.props.visible;return i&&r&&(i=r({layer:t,viewport:e,isPicking:n.startsWith("picking"),renderPass:n})),i}},{key:"_getModuleParameters",value:function(t,e,n,r){var i=Object.assign(Object.create(t.props),{viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Object(rt.c)(this.gl)});if(e){var a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;Object.assign(i,l.getModuleParameters(t))}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}return Object.assign(i,this.getModuleParameters(t,e),r)}}]),e}(nt);var ot=n("n4Ve"),st=n("11Ib");function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var ct=function(t){function e(t,n){var i,s,u;return Object(r.a)(this,e),(u=Object(a.a)(this,Object(o.a)(e).call(this,t,n))).shadowMap=new X.a(t,{width:1,height:1,parameters:(i={},Object(d.a)(i,10241,9729),Object(d.a)(i,10240,9729),Object(d.a)(i,10242,33071),Object(d.a)(i,10243,33071),i)}),u.depthBuffer=new ot.a(t,{format:33189,width:1,height:1}),u.fbo=new st.a(t,{id:"shadowmap",width:1,height:1,attachments:(s={},Object(d.a)(s,36064,u.shadowMap),Object(d.a)(s,36096,u.depthBuffer),s)}),u}return Object(u.a)(e,t),Object(i.a)(e,[{key:"render",value:function(t){var n=this,r=this.fbo;Object(rt.k)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=t.viewports[0],a=Object(rt.c)(n.gl),s=i.width*a,u=i.height*a;s===r.width&&u===r.height||r.resize({width:s,height:u}),Object(et.a)(Object(o.a)(e.prototype),"render",n).call(n,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(t){return!1!==t.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),e}(at),lt=n("KQm4"),ht=n("V3d6"),ft=n("OIVS"),dt=Object(ft.a)((function(t){var e=t.viewport,n=t.center;return new U.b(e.viewProjectionMatrix).invert().transform(n)})),pt=Object(ft.a)((function(t){var e=t.viewport,n=t.shadowMatrices,r=[],i=e.pixelUnprojectionMatrix,a=e.isGeospatial?void 0:1,o=[[0,0,a],[e.width,0,a],[0,e.height,a],[e.width,e.height,a],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((function(t){return function(t,e){var n=Object(v.a)(t,3),r=n[0],i=n[1],a=n[2],o=Object(F.m)([r,i,a],e);if(Number.isFinite(a))return o;return[o[0],o[1],0]}(t,i)})),s=!0,u=!1,c=void 0;try{for(var l,h=function(){var t=l.value,n=t.clone().translate(new U.e(e.center).negate()),i=o.map((function(t){return n.transform(t)})),a=(new U.b).ortho({left:Math.min.apply(Math,Object(lt.a)(i.map((function(t){return t[0]})))),right:Math.max.apply(Math,Object(lt.a)(i.map((function(t){return t[0]})))),bottom:Math.min.apply(Math,Object(lt.a)(i.map((function(t){return t[1]})))),top:Math.max.apply(Math,Object(lt.a)(i.map((function(t){return t[1]})))),near:Math.min.apply(Math,Object(lt.a)(i.map((function(t){return-t[2]})))),far:Math.max.apply(Math,Object(lt.a)(i.map((function(t){return-t[2]}))))});r.push(a.multiplyRight(t))},f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0)h()}catch(d){u=!0,c=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return r})),vt=[0,0,0,1],gt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function yt(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||vt,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=dt({viewport:t.viewport,center:e.project_uCenter}),i=[],a=pt({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice(),o=0;o<t.shadowMatrices.length;o++){var s=a[o],u=s.clone().translate(new U.e(t.viewport.center).negate());e.project_uCoordinateSystem===ht.a.LNGLAT&&e.project_uProjectionMode===ht.c.WEB_MERCATOR?(a[o]=u,i[o]=r):(a[o]=s.clone().multiplyRight(gt),i[o]=u.transform(r))}for(var c=0;c<a.length;c++)n["shadow_uViewProjectionMatrices[".concat(c,"]")]=a[c],n["shadow_uProjectCenters[".concat(c,"]")]=i[c],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(c)]=t.shadowMaps[c]:n["shadow_uShadowMap".concat(c)]=t.dummyShadowMap;return n}var mt={name:"shadow",dependencies:[T.a],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){var n={},r=t.shadowEnabled,i=void 0===r||r;return i&&t.shadowMatrices&&t.shadowMatrices.length>0?Object.assign(n,yt(t,e)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}},bt={color:[255,255,255],intensity:1},wt=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],_t=[0,0,0,200/255],Ot=function(t){function e(t){var n;for(var i in Object(r.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,t))).ambientLight=null,n.directionalLights=[],n.pointLights=[],n.shadowColor=_t,n.shadowPasses=[],n.shadowMaps=[],n.dummyShadowMap=null,n.shadow=!1,n.programManager=null,t){var s=t[i];switch(s.type){case"ambient":n.ambientLight=s;break;case"directional":n.directionalLights.push(s);break;case"point":n.pointLights.push(s)}}return n._applyDefaultLights(),n.shadow=n.directionalLights.some((function(t){return t.shadow})),n}return Object(u.a)(e,t),Object(i.a)(e,[{key:"preRender",value:function(t,e){var n=e.layers,r=e.layerFilter,i=e.viewports,a=e.onViewportActive,o=e.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=S.a.getDefaultProgramManager(t),mt&&this.programManager.addDefaultModule(mt)),this.dummyShadowMap||(this.dummyShadowMap=new X.a(t,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:a,views:o,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(t){var e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(e){return e.getProjectedLight({layer:t})})),pointLights:this.pointLights.map((function(e){return e.getProjectedLight({layer:t})}))},e}},{key:"cleanup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.shadowPasses[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(a){e=!0,n=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(mt),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,a=this.directionalLights[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=(new U.b).lookAt({eye:new U.e(o.direction).negate()});t.push(s)}}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"_createShadowPasses",value:function(t){for(var e=0;e<this.directionalLights.length;e++){var n=new ct(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var t=this.ambientLight,e=this.pointLights,n=this.directionalLights;t||0!==e.length||0!==n.length||(this.ambientLight=new W(bt),this.directionalLights.push(new $(wt[0]),new $(wt[1])))}}]),e}(tt),jt=new Ot,kt=function(){function t(){Object(r.a)(this,t),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(i.a)(t,[{key:"setProps",value:function(t){"effects"in t&&(t.effects.length===this.effects.length&&Object(L.a)(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._createInternalEffects()}},{key:"cleanup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.cleanup()}}catch(l){e=!0,n=l}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var a=!0,o=!1,s=void 0;try{for(var u,c=this._internalEffects[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.cleanup()}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(t){return t instanceof Ot}))||this._internalEffects.push(jt)}}]),t}(),Pt=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),e}(at);function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tt={blendFunc:[1,0,32771,0],blendEquation:32774},Et=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(i.a)(e,[{key:"render",value:function(t){t.pickingFBO?this._drawPickingBuffer(t):Object(et.a)(Object(o.a)(e.prototype),"render",this).call(this,t)}},{key:"_drawPickingBuffer",value:function(t){var n=this,r=t.layers,i=t.layerFilter,a=t.viewports,s=t.onViewportActive,u=t.pickingFBO,c=t.deviceRect,l=c.x,h=c.y,f=c.width,d=c.height,p=t.pass,v=void 0===p?"picking":p,g=t.redrawReason,y=t.pickZ,m=this.gl;return this.pickZ=y,Object(rt.k)(m,xt({scissorTest:!0,scissor:[l,h,f,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},Tt,{blend:!y}),(function(){Object(et.a)(Object(o.a)(e.prototype),"render",n).call(n,{target:u,layers:r,layerFilter:i,viewports:a,onViewportActive:s,pass:v,redrawReason:g})}))}},{key:"shouldDrawLayer",value:function(t){return t.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(t,e){var n=this.pickZ?{blend:!1}:xt({},Tt,{blend:!0,blendColor:[0,0,0,(e+1)/255]});return Object.assign({},t.props.parameters,n)}}]),e}(at);function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ct=function(){function t(e){Object(r.a)(this,t),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Pt(e),this.pickLayersPass=new Et(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Object(i.a)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in t&&(this._onError=t.onError)}},{key:"renderLayers",value:function(t){var e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=this.layerFilter,t.onError=this._onError,t.effects=t.effects||[],t.target=t.target||st.a.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);var n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{target:n}));this._postRender(t.effects,t),this.renderCount++,Object(O.a)("deckRenderer.renderLayers",this,r,t)}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:"finalize",value:function(){var t=this.renderBuffers,e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.delete()}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}t.length=0}},{key:"_preRender",value:function(t,e){var n=null,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.preRender(this.gl,e),u.postRender&&(n=u)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}},{key:"_resizeRenderBuffers",value:function(){var t=this.renderBuffers;0===t.length&&t.push(new st.a(this.gl),new st.a(this.gl));var e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.resize()}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_postRender",value:function(t,e){var n=this.renderBuffers,r={inputBuffer:n[0],swapBuffer:n[1],target:null},i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.postRender){if(c===this.lastPostProcessEffect){r.target=e.target,c.postRender(this.gl,r);break}var l=c.postRender(this.gl,r);r.inputBuffer=l,r.swapBuffer=l===n[0]?n[1]:n[0]}}}catch(h){a=!0,o=h}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}]),t}(),Mt=(n("CtJk"),n("5irr"),n("cFtU"),n("p7wt")),It={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Rt(t){var e=t.pickedColors,n=t.layers,r=t.deviceX,i=t.deviceY,a=t.deviceRadius,o=t.deviceRect;if(e){for(var s=o.x,u=o.y,c=o.width,l=o.height,h=a*a,f=-1,d=0,p=0;p<l;p++){var v=p+u-i,g=v*v;if(g>h)d+=4*c;else for(var y=0;y<c;y++){if(e[d+3]-1>=0){var m=y+s-r,b=m*m+g;b<=h&&(h=b,f=d)}d+=4}}if(f>=0){var w=e[f+3]-1,O=e.slice(f,f+4),j=n[w];if(j){var k=j.decodePickingColor(O),P=Math.floor(f/4/c);return{pickedColor:O,pickedLayer:j,pickedObjectIndex:k,pickedX:s+(f/4-P*c),pickedY:u+P}}_.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return It}function Lt(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,a=t.viewports,o=t.x,s=t.y,u=t.z,c=t.pixelRatio,l=e.pickedColor,h=e.pickedLayer,f=e.pickedObjectIndex,d=h?[h]:[];if("hover"===r){var p=n.index,v=n.layerId,g=h&&h.props.id;if(g!==v||f!==p){if(g!==v){var y=i.find((function(t){return t.props.id===v}));y&&d.unshift(y)}n.layerId=g,n.index=f,n.info=null}}var m={viewports:a}.viewports[0],b=m&&m.unproject([o,s],{targetZ:u}),w={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:b,lngLat:b,devicePixel:[e.pickedX,e.pickedY],pixelRatio:c},_=new Map;return _.set(null,w),d.forEach((function(t){var e=Object.assign({},w);t===h&&(e.color=l,e.index=f,e.picked=!0),e=Dt({layer:t,info:e,mode:r}),t===h&&"hover"===r&&(n.info=e),e&&_.set(e.layer.id,e),"hover"===r&&t.props.autoHighlight&&(t.setModuleParameters({pickingSelectedColor:h===t?l:null}),t.setNeedsRedraw())})),_}function Dt(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||e;n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}var Nt=function(){function t(e){Object(r.a)(this,t),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new Et(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Object(i.a)(t,[{key:"setProps",value:function(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"onError"in t&&(this._onError=t.onError)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(t){return this._pickClosestObject(t)}},{key:"pickObjects",value:function(t){return this._pickVisibleObjects(t)}},{key:"getLastPickedObject",value:function(t){var e=t.x,n=t.y,r=t.layers,i=t.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?r.find((function(t){return t.id===o})):null,u=i[0]&&i[0].unproject([e,n]),c={x:e,y:n,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},a,c):Object.assign(c,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new st.a(t),st.a.isSupported(t,{colorBufferFloat:!0})&&(this.depthFBO=new st.a(t),this.depthFBO.attach(Object(d.a)({},36064,new X.a(t,{format:Object(rt.f)(t)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.depthFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:"_pickClosestObject",value:function(t){var e=t.layers,n=t.viewports,r=t.x,i=t.y,a=t.radius,o=void 0===a?0:a,s=t.depth,u=void 0===s?1:s,c=t.mode,l=void 0===c?"query":c,h=t.unproject3D,f=t.onViewportActive;this._resizeBuffer();for(var d,p=Object(rt.c)(this.gl),v=Object(rt.b)(this.gl,[r,i],!0),g=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],y=Math.round(o*p),m=this.pickingFBO,b=m.width,w=m.height,_=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceWidth:b,deviceHeight:w}),O=[],j={},k=0;k<u;k++){var P=Rt({pickedColors:_&&this._drawAndSample({layers:e,viewports:n,onViewportActive:f,deviceRect:_,pass:"picking:".concat(l),redrawReason:l}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceRect:_}),S=void 0;if(P.pickedLayer&&h&&this.depthFBO)S=this._drawAndSample({layers:[P.pickedLayer],viewports:n,onViewportActive:f,deviceRect:{x:P.pickedX,y:P.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*n[0].distanceScales.metersPerUnit[2]+n[0].position[2];if(P.pickedColor&&k+1<u){var x=P.pickedColor[3]-1;j[x]=!0,e[x].clearPickingColor(P.pickedColor)}d=Lt({pickInfo:P,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,viewports:n,x:r,y:i,z:S,pixelRatio:p});var T=!0,E=!1,A=void 0;try{for(var C,M=d.values()[Symbol.iterator]();!(T=(C=M.next()).done);T=!0){var I=C.value;I.layer&&O.push(I)}}catch(L){E=!0,A=L}finally{try{T||null==M.return||M.return()}finally{if(E)throw A}}if(!P.pickedColor)break}for(var R in j)e[R].restorePickingColors();return{result:O,emptyInfo:d&&d.get(null)}}},{key:"_pickVisibleObjects",value:function(t){var e=t.layers,n=t.viewports,r=t.x,i=t.y,a=t.width,o=void 0===a?1:a,s=t.height,u=void 0===s?1:s,c=t.mode,l=void 0===c?"query":c,h=t.onViewportActive;this._resizeBuffer();var f=Object(rt.c)(this.gl),d=Object(rt.b)(this.gl,[r,i],!0),p=d.x,v=d.y+d.height,g=Object(rt.b)(this.gl,[r+o,i+u],!0),y=g.x+g.width,m=g.y,b={x:p,y:m,width:y-p,height:v-m},w=function(t){var e=t.pickedColors,n=t.layers,r=new Map;if(e)for(var i=0;i<e.length;i+=4){var a=e[i+3]-1;if(a>=0){var o=e.slice(i,i+4),s=o.join(",");if(!r.has(s)){var u=n[a];u?r.set(s,{pickedColor:o,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(o)}):_.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:e,viewports:n,onViewportActive:h,deviceRect:b,pass:"picking:".concat(l),redrawReason:l}),layers:e}),O=new Map;return w.forEach((function(t){var e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:r,y:i,width:o,height:u,pixelRatio:f};e=Dt({layer:t.pickedLayer,info:e,mode:l}),O.has(e.object)||O.set(e.object,e)})),Array.from(O.values())}},{key:"_drawAndSample",value:function(t){var e=t.layers,n=t.viewports,r=t.onViewportActive,i=t.deviceRect,a=t.pass,o=t.redrawReason,s=t.pickZ;if(Object(p.a)(i.width>0&&i.height>0),e.filter((function(t){return t.isPickable()})).length<1)return null;var u=s?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,onError:this._onError,viewports:n,onViewportActive:r,pickingFBO:u,deviceRect:i,pass:a,redrawReason:o,pickZ:s});var c=i.x,l=i.y,h=i.width,f=i.height,d=new(s?Float32Array:Uint8Array)(h*f*4);return Object(Mt.b)(u,{sourceX:c,sourceY:l,sourceWidth:h,sourceHeight:f,target:d}),d}},{key:"_getPickingRect",value:function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,a=t.deviceHeight,o=Math.max(0,e-r),s=Math.max(0,n-r),u=Math.min(i,e+r+1)-o,c=Math.min(a,n+r+1)-s;return u<=0||c<=0?null:{x:o,y:s,width:u,height:c}}}]),t}(),Ft={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},zt=function(){function t(e){Object(r.a)(this,t);var n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Ft),n.appendChild(this.el))}return Object(i.a)(t,[{key:"setTooltip",value:function(t,e,n){var r=this.el;if("string"==typeof t)r.innerText=t;else{if(!t)return void(r.style.display="none");"text"in t&&(r.innerText=t.text),"html"in t&&(r.innerHTML=t.html),"className"in t&&(r.className=t.className),Object.assign(r.style,t.style)}r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),t}(),Ut=n("sF27"),Bt=n("gQyj"),Vt=n("xSaR");var Yt={name:"JSON",extensions:["json","geojson"],testText:function(t){var e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},Gt=Vt.global.deck&&Vt.global.deck.VERSION;if(Gt&&"8.1.1"!==Gt)throw new Error("deck.gl - multiple versions detected: ".concat(Gt," vs ").concat("8.1.1"));Gt||(Vt.global.deck=Object.assign(Vt.global.deck||{},{VERSION:"8.1.1",version:"8.1.1",log:_.a,_registerLoggers:O.b}),Object(Ut.b)([Yt,Bt.a]));var Zt=Vt.global.deck,Xt=n("hQ05"),Ht=n("rta6"),qt=n("ei+1");function Wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(){}var Kt={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,onWebGLInitialized:Jt,onResize:Jt,onViewStateChange:Jt,onBeforeRender:Jt,onAfterRender:Jt,onLoad:Jt,onError:null,_onMetrics:null,getCursor:function(t){return t.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Qt=function(){function t(e){Object(r.a)(this,t),e=Object.assign({},Kt,e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.viewState&&e.initialViewState&&_.a.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Object(Vt.getBrowser)()&&_.a.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new k.b({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),this.animationLoop.start()}return Object(i.a)(t,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&_.a.removed("onLayerHover","onHover")(),"onLayerClick"in t&&_.a.removed("onLayerClick","onClick")(),t.initialViewState&&!Object(L.a)(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);var e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||a}},{key:"redraw",value:function(t){if(this.layerManager){var e=t||this.needsRedraw({clearRedrawFlags:!0});e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}},{key:"pickMultipleObjects",value:function(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}},{key:"pickObjects",value:function(t){return this._pick("pickObjects","pickObjects Time",t)}},{key:"_pick",value:function(t,e,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(e).timeStart();var i=this.deckPicker[t](Object.assign({layers:this.layerManager.getLayers(n),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport},n));return r.get(e).timeEnd(),i}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"==typeof e&&(e=document.getElementById(e),Object(p.a)(e)),e)||(e=document.createElement("canvas"),(t.parent||document.body).appendChild(e));var n=t.id,r=t.style;return e.id=n,Object.assign(e.style,r),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,a=t.glOptions,o=t.debug,s=t.useDevicePixels,u=t.autoResizeDrawingBuffer;return new Xt.a({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:u,autoResizeViewport:!1,gl:i,onCreateContext:function(t){return Object(rt.a)(Object.assign({},a,t,{canvas:e.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var t=this.props.views||[new Z({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}},{key:"_onPointerMove",value:function(t){var e=this._pickRequest;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;var n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t,e.mode="hover"}},{key:"_pickAndCallback",value:function(){var t=this._pickRequest;if(t.event){var e=this._pick("pickObject","pickObject Time",t),n=e.result,r=e.emptyInfo,i=n[0]||r;if(this.props.getTooltip){var a=this.props.getTooltip(i);this.tooltip.setTooltip(a,i.x,i.y)}var o=!1;i.layer&&(o=i.layer.onHover(i,t.event)),!o&&this.props.onHover&&this.props.onHover(i,t.event),t.event=null}}},{key:"_updateCursor",value:function(){var t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,Object(rt.d)(t,{enable:!0,copyState:!0})),this.tooltip=new zt(this.canvas),Object(rt.j)(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);var e=new m;for(var n in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new qt.a(this.props.parent||t.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),ht.b)this.eventManager.on(n,this._onEvent);this.viewManager=new D({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new R(t,{deck:this,stats:this.stats,viewport:r,timeline:e}),this.effectManager=new kt,this.deckRenderer=new Ct(t),this.deckPicker=new Nt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t,e){var n=this.layerManager.context.gl;Object(rt.j)(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(t){var e=t.gl;this._setGLContext(e)}},{key:"_onRenderFrame",value:function(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),_.a.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.viewState,Object(d.a)({},t.viewId,e)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onEvent",value:function(t){var e=ht.b[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),a=i.layer,o=a&&(a[e.handler]||a.props[e.handler]),s=this.props[e.handler],u=!1;o&&(u=o.call(a,i,t)),!u&&s&&s(i,t)}}},{key:"_onPointerDown",value:function(t){var e=t.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:e.x,y:e.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var t=this.stats;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();var e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var t=this.metrics,e=this.stats;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();var n=Ht.a.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}]),t}();Qt.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(tt)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool}},Qt.defaultProps=Kt,Qt.VERSION=Zt.VERSION;n("cxuS");function $t(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}function te(t){return t?"function"==typeof t?Object(c.createElement)(N.a,{},t):Array.isArray(t)?t.map(te):($t(t.type,N.a),t):t}function ee(t){var e=t.children,n=t.layers,r=t.views,i=[],a=[],o={};return l.a.Children.forEach(te(e),(function(t){if(t){var e=t.type;if($t(e,b.a)){var n=function(t,e){var n={},r=t.defaultProps||{};for(var i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);a.push(n)}else i.push(t);if(e!==N.a&&$t(e,N.a)&&t.props.id){var r=new e(t.props);o[r.id]=r}}})),Object.keys(o).length>0&&(Array.isArray(r)?r.forEach((function(t){o[t.id]=t})):r&&(o[r.id]=r),r=Object.values(o)),{layers:n=a.length>0?[].concat(a,Object(lt.a)(n)):n,children:i,views:r}}var ne={position:"absolute",zIndex:-1};function re(t,e){return t?"function"==typeof t?t(e):Array.isArray(t)?t.map((function(t){return re(t,e)})):(r=(n=t)&&n.type,(i=r&&r.defaultProps)&&i.mapStyle?(e.style=ne,Object(c.cloneElement)(t,e)):function(t){var e=t&&t.type;return e&&e.deckGLViewProps}(t)?Object(c.cloneElement)(t,e):t):t;var n,r,i}function ie(t){var e=t.children,n=(t.viewports,t.deck),r=t.ContextProvider,i=(n||{}).viewManager;if(!i||!i.views.length)return[];var a={},o=i.views[0].id,s=!0,u=!1,l=void 0;try{for(var h,f=e[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var d=h.value,p=o,v=d;$t(d.type,N.a)&&(p=d.props.id||o,v=d.props.children);var g=i.getViewport(p),y=i.getViewState(p);if(g)v=re(v,{x:g.x,y:g.y,width:g.width,height:g.height,viewport:g,viewState:y}),a[p]||(a[p]={viewport:g,children:[]}),a[p].children.push(v)}}catch(m){u=!0,l=m}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return Object.keys(a).map((function(t){var e=a[t],i=e.viewport,o=e.children,s={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},u="view-".concat(t),l=c.createElement.apply(void 0,["div",{key:u,id:u,style:s}].concat(Object(lt.a)(o)));if(r){var h={viewport:i,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(e){e.viewId=t,n._onViewStateChange(e)}};return Object(c.createElement)(r,{key:u,value:h},l)}return l}))}var ae={mixBlendMode:null};function oe(t){var e=t.width,n=t.height,r=t.style,i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},a={left:0,top:0};if(r)for(var o in r)o in ae?a[o]=r[o]:i[o]=r[o];return{containerStyle:i,canvasStyle:a}}var se=Qt.getPropTypes(f.a),ue=Qt.defaultProps,ce=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,t))).viewports=null,n.children=null,n._needsRedraw=null,n._containerRef=l.a.createRef(),n._canvasRef=l.a.createRef(),n.pickObject=n.pickObject.bind(Object(s.a)(n)),n.pickMultipleObjects=n.pickMultipleObjects.bind(Object(s.a)(n)),n.pickObjects=n.pickObjects.bind(Object(s.a)(n)),n._extractJSXLayers=Object(ft.a)(ee),n._positionChildrenUnderViews=Object(ft.a)(ie),n._extractStyles=Object(ft.a)(oe),n}return Object(u.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.Deck||Qt;this.deck=this.deck||new t(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(t){this._updateFromProps(t);var e=this.children!==this._parseJSX(t).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return e&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(t){return this.deck.pickObject(t)}},{key:"pickMultipleObjects",value:function(t){return this.deck.pickMultipleObjects(t)}},{key:"pickObjects",value:function(t){return this.deck.pickObjects(t)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(t){this._needsRedraw=t,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(t){return this._extractJSXLayers({layers:t.layers,views:t.views,children:t.children})}},{key:"_updateFromProps",value:function(t){var e=this._parseJSX(t),n=e.layers,r=e.views,i=Object.assign({},t,{style:null,width:"100%",height:"100%",layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var t=this.props,e=t.ContextProvider,n=t.width,r=t.height,i=t.style,a=(this.deck||{}).viewManager;this.viewports=a&&a.getViewports(),this.children=this._parseJSX(this.props).children;var o=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:e}),s=this._extractStyles({width:n,height:r,style:i}),u=s.containerStyle,l=s.canvasStyle,h=Object(c.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:l});return Object(c.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:u},[h,o])}}]),e}(l.a.Component);ce.propTypes=se,ce.defaultProps=ue},zZTu:function(t,e,n){n("Sc3u")("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},zheZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));n("n7j8"),n("E5k/");var r=n("1OyB"),i=n("vuIU"),a=n("RPaY"),o=n("n6ox"),s=function(){},u={BREAK:1,SNAP_TO_END:2,IGNORE:3},c={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new a.a,transitionInterruption:u.BREAK,onTransitionStart:s,onTransitionInterrupt:s,onTransitionEnd:s},l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.ControllerState=e,this.props=Object.assign({},c,n),this.propsInTransition=null,this.transition=new o.a(n.timeline),this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(i.a)(t,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=Object.assign({},c,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=this.transition.settings,i=r.interruption,a=r.endProps,o=Object.assign({},n,i===u.SNAP_TO_END?a:this.propsInTransition||n);this._triggerTransition(o,t),e=!0}else this.transition.cancel();return e}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.settings.interruption===u.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,a=i.getDuration?i.getDuration(t,e):e.transitionDuration,o=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=a,this.transition.start({duration:a,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:o.start,endProps:o.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this.updateTransition()}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){e.propsInTransition=null,t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.time,n=t.settings,r=n.interpolator,i=n.startProps,a=n.endProps,o=n.duration,s=(0,n.easing)(e/o),u=r.interpolateProps(i,a,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,u)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),t}();l.defaultProps=c}}]);