(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{282:function(t,e,n){"use strict";n.r(e);n(3);var i,o=n(0),a=n.n(o),r=n(406),s=(n(56),n(76),n(27),n(181),n(24),n(39),n(4),n(296)),l=n.n(s),c=(n(297),n(331)),u=n(466),p=n(459),d=n.n(p),m=n(409),h=n(622),f=n(623),g=n(546),v=n(664),b=n(646),y=n(618),_=n(636),E=n(637),w=n(339);function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e,n,i,o,a,r){try{var s=t[a](r),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(i,o)}function T(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function r(t){L(a,i,o,r,s,"next",t)}function s(t){L(a,i,o,r,s,"throw",t)}r(void 0)})}}var O=((i={})[d.a.TEXTURE_CUBE_MAP_POSITIVE_X]="right",i[d.a.TEXTURE_CUBE_MAP_NEGATIVE_X]="left",i[d.a.TEXTURE_CUBE_MAP_POSITIVE_Y]="top",i[d.a.TEXTURE_CUBE_MAP_NEGATIVE_Y]="bottom",i[d.a.TEXTURE_CUBE_MAP_POSITIVE_Z]="front",i[d.a.TEXTURE_CUBE_MAP_NEGATIVE_Z]="back",i),M="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/",x="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/",R=x+"model-index.json",P="DamagedHelmet/glTF-Binary/DamagedHelmet.glb";var A='\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Model<br/>\n  <select id="modelSelector" style="border: 1px solid gray; width: 200px;">\n    <option value="'+P+'">Default</option>\n  </select>\n  <br>\n</div>\n<div>\n  Show<br/>\n  <select id="showSelector" style="border: 1px solid gray; width: 200px;">\n    <option value="0 0 0 0 0 0 0 0">Final Result</option>\n\n    <option value="0 1 0 0 0 0 0 0">Base Color</option>\n    <option value="0 0 1 0 0 0 0 0">Metallic</option>\n    <option value="0 0 0 1 0 0 0 0">Roughness</option>\n    <option value="1 0 0 0 0 0 0 0">Diffuse</option>\n\n    <option value="0 0 0 0 1 0 0 0">Specular Reflection</option>\n    <option value="0 0 0 0 0 1 0 0">Geometric Occlusion</option>\n    <option value="0 0 0 0 0 0 1 0">Microfacet Distribution</option>\n    <option value="0 0 0 0 0 0 0 1">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights<br/>\n  <select id="lightSelector" style="border: 1px solid gray; width: 200px;">\n    <option value="default">Default</option>\n    <option value="ambient">Ambient Only</option>\n    <option value="directional1">1x Directional (Red) + Ambient</option>\n    <option value="directional3">3x Directional (RGB)</option>\n    <option value="point1far">1x Point Light Far (Red) + Ambient</option>\n    <option value="point1near">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light<br/>\n  <select id="iblSelector" style="border: 1px solid gray; width: 200px;">\n    <option value="exclusive">On (Exclusive)</option>\n    <option value="addition">On (Addition to Regular)</option>\n    <option value="off">Off (Only Regular)</option>\n  </select>\n  <br/>\n</div>\n<p><img src="https://img.shields.io/badge/WebVR-Supported-orange.svg" /></p>\n',I={default:{directionalLights:[{color:[255,255,255],direction:[0,.5,.5],intensity:1}]},ambient:{ambientLight:{color:[255,255,255],intensity:1}},directional1:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},directional3:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1},{color:[0,0,255],direction:[0,0,1],intensity:1},{color:[0,255,0],direction:[0,1,0],intensity:1}]},point1far:{pointLights:[{color:[255,0,0],position:[200,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},point1near:{pointLights:[{color:[255,0,0],position:[10,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}}},U={pbrDebug:!0,imageBasedLightingEnvironment:null,lights:!1};function D(t,e,n){return B.apply(this,arguments)}function B(){return(B=T(l.a.mark(function t(e,n,i){var o,a,r,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)(e,_.a,Object.assign({},i,{gl:n,DracoLoader:u.a}));case 2:return o=t.sent,a=o.gltf,r=o.scenes,s=o.animator,r[0].traverse(function(t,e){e.worldMatrix;return m.a.info(4,"Using model: ",t)()}),t.abrupt("return",{scenes:r,animator:s,gltf:a});case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}var j=function(t){var e,n;n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,o.getInfo=function(){return A};var i=o.prototype;function o(e){var n,i=void 0===e?{}:e,o=i.modelFile,a=void 0===o?null:o,r=i.initialZoom,s=void 0===r?2:r;return(n=t.call(this)||this).scenes=[],n.animator=null,n.gl=null,n.modelFile=a,n.glOptions={webgl2:!0,alpha:!1},n.mouse={lastX:0,lastY:0},n.translate=s,n.rotation=[0,0],n.rotationStart=[0,0],n.rotationAnimation=!0,n.u_ScaleDiffBaseMR=[0,0,0,0],n.u_ScaleFGDSpec=[0,0,0,0],n.onInitialize=n.onInitialize.bind(S(n)),n.onRender=n.onRender.bind(S(n)),n}return i.getInfo=function(){return A},i.initializeEventHandling=function(t){var e=this;t.onwheel=function(t){e.translate+=t.deltaY/10,e.translate<.5&&(e.translate=.5),t.preventDefault()},t.onpointerdown=function(n){e.mouse.lastX=n.clientX,e.mouse.lastY=n.clientY,e.rotationStart[0]=e.rotation[0],e.rotationStart[1]=e.rotation[1],t.setPointerCapture(n.pointerId),n.preventDefault(),e.rotationAnimation=!1},t.onpointermove=function(t){if(t.buttons){var n=t.clientX-e.mouse.lastX,i=t.clientY-e.mouse.lastY;e.rotation[0]=e.rotationStart[0]+i/100,e.rotation[1]=e.rotationStart[1]+n/100}},t.ondragover=function(t){t.dataTransfer.dropEffect="link",t.preventDefault()},t.ondrop=function(){var t=T(l.a.mark(function t(n){var i,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!n.dataTransfer.files||1!==n.dataTransfer.files.length){t.next=8;break}return i=n.dataTransfer.files[0],e._deleteScenes(),t.next=6,D(i,e.gl,e.loadOptions);case 6:o=t.sent,Object.assign(e,o);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},i.onInitialize=function(t){var e=this,n=t.gl,i=t.canvas;if(Object(h.a)(n,{depthTest:!0,blend:!1}),this.loadOptions=Object.assign({},U),this.environment=new b.a(n,{brdfLutUrl:M+"/brdfLUT.png",getTexUrl:function(t,e,n){return M+"/papermill/"+t+"/"+t+"_"+O[e]+"_"+n+".jpg"}}),this.loadOptions.imageBasedLightingEnvironment=this.environment,this.gl=n,this.modelFile){D(this.modelFile,this.gl,{pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0}).then(function(t){return Object.assign(e,t)})}else{var o=document.getElementById("modelSelector"),a=o&&o.value||P;D(x+a,this.gl,this.loadOptions).then(function(t){return Object.assign(e,t)}),o&&(o.onchange=function(t){e._deleteScenes();var n=o&&o.value||P;D(x+n,e.gl,e.loadOptions).then(function(t){return Object.assign(e,t)})}),window.fetch(R).then(function(t){return t.json()}).then(function(t){return function(t,e){if(e){var n=["glTF-Draco","glTF-Binary","glTF-Embedded","glTF"];t.forEach(function(t){var i=t.name,o=t.variants,a=n.find(function(t){return o[t]}),r=document.createElement("option");r.text=i+" ("+a+")",r.value=i+"/"+a+"/"+o[a],e.appendChild(r)})}}(t,o)})}var r=document.getElementById("showSelector");r&&(r.onchange=function(t){var n=r.value.split(" ").map(function(t){return parseFloat(t)});e.u_ScaleDiffBaseMR=n.slice(0,4),e.u_ScaleFGDSpec=n.slice(4)});var s=document.getElementById("lightSelector");s&&(s.onchange=function(t){e.light=s.value});var l=document.getElementById("iblSelector");l&&(l.onchange=function(t){e._updateLightSettings(l.value),e._rebuildModel()}),this.initializeEventHandling(i)},i._updateLightSettings=function(t){switch(t){case"exclusive":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!1});break;case"addition":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!0});break;case"off":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:null,lights:!0})}},i._rebuildModel=function(){(this.gltf.meshes||[]).forEach(function(t){return delete t._mesh}),(this.gltf.nodes||[]).forEach(function(t){return delete t._node}),(this.gltf.bufferViews||[]).forEach(function(t){return delete t.lumaBuffers}),this._deleteScenes(),Object.assign(this,Object(y.a)(this.gl,this.gltf,this.loadOptions))},i._deleteScenes=function(){this.scenes.forEach(function(t){return t.delete()}),this.scenes=[],f.a.get("Resource Counts").forEach(function(t){var e=t.name,n=t.count;m.a.info(3,e+": "+n)()})},i.applyLight=function(t){t.updateModuleSettings({lightSources:I[this.light||"default"]})},i.onRender=function(t){var e=this,n=t.gl,i=t.time,o=t.aspect,a=t.viewMatrix,r=t.projectionMatrix;Object(g.a)(n,{color:[.2,.2,.2,1],depth:!0}),this.rotationAnimation&&(this.rotation[1]=i/3600);var s=this.rotation,l=s[0],c=s[1],u=[-this.translate*Math.sin(c)*Math.cos(-l),-this.translate*Math.sin(-l),this.translate*Math.cos(c)*Math.cos(-l)],p=new E.a(a?Array.from(a):null).translate([0,0,-this.translate]).rotateX(l).rotateY(c),d=r?new E.a(Array.from(r)):(new E.a).perspective({fov:Object(w.h)(40),aspect:o,near:.1,far:9e3});if(!this.scenes.length)return!1;this.animator&&this.animator.animate(i);var m=!0;return this.scenes[0].traverse(function(t,n){var i=n.worldMatrix,o=new E.a(d).multiplyRight(p).multiplyRight(i);e.applyLight(t),m=m&&t.draw({uniforms:{u_Camera:u,u_MVPMatrix:o,u_ModelMatrix:i,u_NormalMatrix:new E.a(i).invert().transpose(),u_ScaleDiffBaseMR:e.u_ScaleDiffBaseMR,u_ScaleFGDSpec:e.u_ScaleFGDSpec},parameters:t.props.parameters})}),m},o}(v.a);if("undefined"!=typeof window&&!window.website){var F=new j;F.start();var C=document.createElement("div");C.innerHTML=F.getInfo(),document.body.appendChild(C)}n.d(e,"default",function(){return X});var X=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.render=function(){return a.a.createElement(r.a,Object.assign({AnimationLoop:j},this.props))},i}(a.a.Component)},406:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return d});n(24);var i=n(0),o=n.n(i),a=n(539),r=n(623),s=n(661),l=n(663),c=n(407);void 0===t||t.navigator||(t.navigator={}),"undefined"!=typeof window&&(window.website=!0);var u={EXAMPLE_NOT_SUPPPORTED:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},p={position:"fixed",fontSize:"12px",zIndex:1e4,color:"#fff",background:"#000",padding:"8px",opacity:.8},d=function(t){var e,n;function i(e){var n,i=(n=t.call(this,e)||this).props.AnimationLoop;return n.animationLoop=new i,n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var d=i.prototype;return d.componentDidMount=function(){var t=this.props.showStats;this.animationLoop._setDisplay(new s.a);var e=this.props.path;if(e){Object(a.b)("https://raw.githubusercontent.com/uber/loaders.gl/master/"+e)}this.animationLoop.start(this.props),t&&this._showStats(this.animationLoop)},d.componentWillUnmount=function(){this.animationLoop.stop(this.props),this.animationLoop.delete(),this.animationLoop=null},d._showStats=function(t){var e=this,n=new l.a(t.stats,{container:this.refs.renderStats,title:"Render Time",css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"CPU Time":"averageTime","GPU Time":"averageTime","Frame Rate":"fps"},resetOnUpdate:{"CPU Time":!0,"GPU Time":!0,"Frame Rate":!0}});r.a.get("Memory Usage").reset();var i=new l.a(r.a.get("Memory Usage"),{container:this.refs.memStats,css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"}});this.animationFrame=window.requestAnimationFrame(function t(){n.update(),i.update(),e.animationFrame=window.requestAnimationFrame(t)})},d._stopStats=function(){window.cancelAnimationFrame(this.animationFrame)},d.render=function(){var t=this.props,e=t.name,n=t.panel,i=void 0===n||n,a=t.stats,r=t.sourceLink;if(this.animationLoop.isSupported&&!this.animationLoop.isSupported()){var s=this.animationLoop.getAltText?this.animationLoop.getAltText():"THIS EXAMPLE IS NOT SUPPORTED";return o.a.createElement("div",{style:u.EXAMPLE_NOT_SUPPPORTED},o.a.createElement("h2",null," ",s," "))}var l=this.props.AnimationLoop.getInfo()||this.animationLoop.getInfo&&this.animationLoop.getInfo();return o.a.createElement("div",{className:"fg",style:{width:"100%",height:"100%",padding:0,border:0}},a?o.a.createElement("div",{ref:"stats",className:"stats",style:p},o.a.createElement("div",{ref:"renderStats",className:"renderStats"}),o.a.createElement("div",{ref:"memStats",className:"memStats"})):null,o.a.createElement("canvas",{id:this.props.canvas,style:{width:"100%",height:"100%",padding:0,border:0}}),i?o.a.createElement(c.a,{name:e,controls:l,sourceLink:r}):null)},i}(i.Component);d.defaultProps={canvas:"example-canvas"},d.displayName="AnimationLoop"}).call(this,n(132))},407:function(t,e,n){"use strict";n.d(e,"a",function(){return a});n(24);var i=n(0),o=n.n(i);var a=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.render=function(){var t=this.props,e=t.name,n=t.controls,i=t.sourceLink;return o.a.createElement("div",{className:"options-panel top-right",tabIndex:"0"},o.a.createElement("h3",null,e),o.a.createElement("div",{className:"control-panel",dangerouslySetInnerHTML:{__html:n}}),i&&o.a.createElement("div",{className:"source-link"},o.a.createElement("a",{href:i,target:"_new"},"View Code ↗")))},i}(i.PureComponent)}}]);