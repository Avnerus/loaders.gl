(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{195:function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n.n(i),o=n(0),s=n.n(o),u=n(360),c=(n(77),n(308),n(80),n(30),n(11),n(7),n(82),n(31),n(205)),f=n.n(c),l=(n(207),n(16)),p=n.n(l),h=n(208),d=n.n(h),g=n(223),m=n(376),v=n(363),b=n.n(v),y=n(201),w=n(375),x=n(377),_=n(366),A=n(379),O=n(263),S=((r={})[b.a.TEXTURE_CUBE_MAP_POSITIVE_X]="right",r[b.a.TEXTURE_CUBE_MAP_NEGATIVE_X]="left",r[b.a.TEXTURE_CUBE_MAP_POSITIVE_Y]="top",r[b.a.TEXTURE_CUBE_MAP_NEGATIVE_Y]="bottom",r[b.a.TEXTURE_CUBE_MAP_POSITIVE_Z]="front",r[b.a.TEXTURE_CUBE_MAP_NEGATIVE_Z]="back",r),E="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/",j="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/",k=j+"model-index.json",T="DamagedHelmet/glTF-Binary/DamagedHelmet.glb";var B={default:{directionalLights:[{color:[255,255,255],direction:[0,.5,.5],intensity:1}]},ambient:{ambientLight:{color:[255,255,255],intensity:1}},directional1:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},directional3:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1},{color:[0,0,255],direction:[0,0,1],intensity:1},{color:[0,255,0],direction:[0,1,0],intensity:1}]},point1far:{pointLights:[{color:[255,0,0],position:[200,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},point1near:{pointLights:[{color:[255,0,0],position:[10,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}}},L={pbrDebug:!0,imageBasedLightingEnvironment:null,lights:!1};function U(e,t,n){return R.apply(this,arguments)}function R(){return(R=d()(f.a.mark(function e(t,n,r){var i,a,o,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)(t,w.a,Object.assign({},r,{gl:n,DracoLoader:m.a}));case 2:return i=e.sent,a=i.gltf,o=i.scenes,s=i.animator,o[0].traverse(function(e,t){t.worldMatrix;return y.A.info(4,"Using model: ",e)()}),e.abrupt("return",{scenes:o,animator:s,gltf:a});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C=function(e){function t(t){var n,r=void 0===t?{}:t,i=r.modelFile,a=void 0===i?null:i,o=r.initialZoom,s=void 0===o?2:o;return(n=e.call(this)||this).scenes=[],n.animator=null,n.gl=null,n.modelFile=a,n.glOptions={webgl2:!0,alpha:!1},n.mouse={lastX:0,lastY:0},n.translate=s,n.rotation=[0,0],n.rotationStart=[0,0],n.u_ScaleDiffBaseMR=[0,0,0,0],n.u_ScaleFGDSpec=[0,0,0,0],n.onInitialize=n.onInitialize.bind(p()(n)),n.onRender=n.onRender.bind(p()(n)),n}a()(t,e),t.getInfo=function(){return'\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Model<br/>\n  <select id="modelSelector" style="border: 1px solid gray;">\n    <option value="DamagedHelmet/glTF-Binary/DamagedHelmet.glb">Default</option>\n  </select>\n  <br>\n</div>\n<div>\n  Show<br/>\n  <select id="showSelector" style="border: 1px solid gray;">\n    <option value="0 0 0 0 0 0 0 0">Final Result</option>\n\n    <option value="0 1 0 0 0 0 0 0">Base Color</option>\n    <option value="0 0 1 0 0 0 0 0">Metallic</option>\n    <option value="0 0 0 1 0 0 0 0">Roughness</option>\n    <option value="1 0 0 0 0 0 0 0">Diffuse</option>\n\n    <option value="0 0 0 0 1 0 0 0">Specular Reflection</option>\n    <option value="0 0 0 0 0 1 0 0">Geometric Occlusion</option>\n    <option value="0 0 0 0 0 0 1 0">Microfacet Distribution</option>\n    <option value="0 0 0 0 0 0 0 1">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights<br/>\n  <select id="lightSelector" style="border: 1px solid gray;">\n    <option value="default">Default</option>\n    <option value="ambient">Ambient Only</option>\n    <option value="directional1">1x Directional (Red) + Ambient</option>\n    <option value="directional3">3x Directional (RGB)</option>\n    <option value="point1far">1x Point Light Far (Red) + Ambient</option>\n    <option value="point1near">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light<br/>\n  <select id="iblSelector" style="border: 1px solid gray;">\n    <option value="exclusive">On (Exclusive)</option>\n    <option value="addition">On (Addition to Regular)</option>\n    <option value="off">Off (Only Regular)</option>\n  </select>\n  <br/>\n</div>\n<p><img src="https://img.shields.io/badge/WebVR-Supported-orange.svg" /></p>\n'};var n=t.prototype;return n.initializeEventHandling=function(e){var t=this;e.onwheel=function(e){t.translate+=e.deltaY/10,t.translate<.5&&(t.translate=.5),e.preventDefault()},e.onpointerdown=function(n){t.mouse.lastX=n.clientX,t.mouse.lastY=n.clientY,t.rotationStart[0]=t.rotation[0],t.rotationStart[1]=t.rotation[1],e.setPointerCapture(n.pointerId),n.preventDefault()},e.onpointermove=function(e){if(e.buttons){var n=e.clientX-t.mouse.lastX,r=e.clientY-t.mouse.lastY;t.rotation[0]=t.rotationStart[0]+r/100,t.rotation[1]=t.rotationStart[1]+n/100}},e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){(e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length)&&(t._deleteScenes(),U(new Promise(function(t){var n=new window.FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e.dataTransfer.files[0])}),t.gl,t.loadOptions).then(function(e){return Object.assign(t,e)}))}},n.onInitialize=function(e){var t=this,n=e.gl,r=e.canvas;if(Object(y.I)(n,{depthTest:!0,blend:!1}),this.loadOptions=Object.assign({},L),this.environment=new x.a(n,{brdfLutUrl:E+"/brdfLUT.png",getTexUrl:function(e,t,n){return E+"/papermill/"+e+"/"+e+"_"+S[t]+"_"+n+".jpg"}}),this.loadOptions.imageBasedLightingEnvironment=this.environment,this.gl=n,this.modelFile){U(this.modelFile,this.gl,{pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0}).then(function(e){return Object.assign(t,e)})}else{var i=document.getElementById("modelSelector"),a=i&&i.value||T;U(j+a,this.gl,this.loadOptions).then(function(e){return Object.assign(t,e)}),i&&(i.onchange=function(e){t._deleteScenes();var n=i&&i.value||T;U(j+n,t.gl,t.loadOptions).then(function(e){return Object.assign(t,e)})}),window.fetch(k).then(function(e){return e.json()}).then(function(e){return function(e,t){if(t){var n=["glTF-Draco","glTF-Binary","glTF-Embedded","glTF"];e.forEach(function(e){var r=e.name,i=e.variants,a=n.find(function(e){return i[e]}),o=document.createElement("option");o.text=r+" ("+a+")",o.value=r+"/"+a+"/"+i[a],t.appendChild(o)})}}(e,i)})}var o=document.getElementById("showSelector");o&&(o.onchange=function(e){var n=o.value.split(" ").map(function(e){return parseFloat(e)});t.u_ScaleDiffBaseMR=n.slice(0,4),t.u_ScaleFGDSpec=n.slice(4)});var s=document.getElementById("lightSelector");s&&(s.onchange=function(e){t.light=s.value});var u=document.getElementById("iblSelector");u&&(u.onchange=function(e){t._updateLightSettings(u.value),t._rebuildModel()}),this.initializeEventHandling(r)},n._updateLightSettings=function(e){switch(e){case"exclusive":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!1});break;case"addition":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!0});break;case"off":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:null,lights:!0})}},n._rebuildModel=function(){(this.gltf.meshes||[]).forEach(function(e){return delete e._mesh}),(this.gltf.nodes||[]).forEach(function(e){return delete e._node}),(this.gltf.bufferViews||[]).forEach(function(e){return delete e.lumaBuffers}),this._deleteScenes(),Object.assign(this,Object(_.a)(this.gl,this.gltf,this.loadOptions))},n._deleteScenes=function(){this.scenes.forEach(function(e){return e.delete()}),this.scenes=[],y.B.get("Resource Counts").forEach(function(e){var t=e.name,n=e.count;y.A.info(3,t+": "+n)()})},n.applyLight=function(e){e.updateModuleSettings({lightSources:B[this.light||"default"]})},n.onRender=function(e){var t=this,n=e.gl,r=e.time,i=e.aspect,a=e.viewMatrix,o=e.projectionMatrix;Object(y.s)(n,{color:[.2,.2,.2,1],depth:!0});var s=this.rotation,u=s[0],c=s[1],f=[-this.translate*Math.sin(c)*Math.cos(-u),-this.translate*Math.sin(-u),this.translate*Math.cos(c)*Math.cos(-u)],l=new A.a(a?Array.from(a):null).translate([0,0,-this.translate]).rotateX(u).rotateY(c),p=o?new A.a(Array.from(o)):(new A.a).perspective({fov:Object(O.e)(40),aspect:i,near:.1,far:9e3});if(!this.scenes.length)return!1;this.animator&&this.animator.animate(r);var h=!0;return this.scenes[0].traverse(function(e,n){var r=n.worldMatrix,i=new A.a(p).multiplyRight(l).multiplyRight(r);t.applyLight(e),h=h&&e.draw({uniforms:{u_Camera:f,u_MVPMatrix:i,u_ModelMatrix:r,u_NormalMatrix:new A.a(r).invert().transpose(),u_ScaleDiffBaseMR:t.u_ScaleDiffBaseMR,u_ScaleFGDSpec:t.u_ScaleFGDSpec},parameters:e.props.parameters})}),h},t}(y.b);if("undefined"!=typeof window&&!window.website){var M=new C;M.start();var P=document.createElement("div");P.innerHTML=M.getInfo(),document.body.appendChild(P)}n.d(t,"default",function(){return I});var I=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t.prototype.render=function(){return s.a.createElement(u.a,{AnimationLoop:C})},t}(s.a.Component)},203:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"e",function(){return f});n(75),n(76);var r=function(e){return"boolean"==typeof e},i=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},o=function(e){return e&&"function"==typeof e[Symbol.iterator]},s=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]},u=function(e){return a(e)&&"done"in e&&"value"in e},c=function(e){return"undefined"!=typeof window&&e instanceof window.Response||e.arrayBuffer&&e.json&&e.body},f=function(e){return function(e){return a(e)&&i(e.tee)&&i(e.cancel)&&i(e.pipeTo)&&i(e.getReader)}(e)||function(e){return a(e)&&i(e.read)&&i(e.pipe)&&r(e.readable)}(e)}},206:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i="object"!=typeof e||"[object process]"!==String(e)||e.browser,a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window}).call(this,n(117),n(78))},209:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});n(30),n(11),n(202);var r=n(216),i=function(e){return e&&e instanceof ArrayBuffer},a=function(t){return t&&t instanceof e};function o(e){if(i(e))return e;if(a(e))return new Uint8Array(e).buffer;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return Object(r.a)(!1)}}).call(this,n(245).Buffer)},210:function(e,t,n){"use strict";n(7);var r=n(205),i=n.n(r),a=(n(207),n(208)),o=n.n(a),s=n(238),u=n(221),c=function(){function e(){}var t=e.prototype;return t.log=function(){},t.info=function(){},t.warn=function(){},t.error=function(){},e}(),f=n(220),l=n(216),p=(n(30),n(19),n(14),n(11),n(77),n(239),n(209)),h=new Map;function d(e,t,n){var r=function(e){var t=h.get(e);if(!t){var n=new Blob([e],{type:"application/javascript"});t=URL.createObjectURL(n),h.set(e,t)}return new Worker(t)}(e);n=function(e){null!==(e=Object.assign({},e)).log&&delete e.log;return e}(n);var i=function(e,t){return new Promise(function(n,i){r.onmessage=function(e){switch(e.data.type){case"done":n(e.data.result),r.terminate();break;case"error":i(new Error(e.data.message))}};var a=Object(p.a)(e);r.postMessage({arraybuffer:a,opts:t},[a])})};return t?i(t,n):i}n(75),n(76);var g=n(203),m=n(227),v="Cannot convert supplied data type";function b(e){return Object(g.b)(e)?e.url:null}function y(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var n=e.buffer||e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}throw new Error(v)}function w(e,t){return x.apply(this,arguments)}function x(){return(x=o()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=6;break}return e.abrupt("return",y(t,n));case 6:if(!Object(g.b)(t)){e.next=15;break}if(!n.binary){e.next=13;break}return e.next=10,t.arrayBuffer();case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=t.text();case 14:return e.abrupt("return",e.t0);case 15:throw new Error(v);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e,t){return A.apply(this,arguments)}function A(){return(A=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(g.d)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!Object(g.b)(t)){e.next=4;break}return e.abrupt("return",Object(m.a)(t.body));case 4:if(!Object(g.e)(t)){e.next=6;break}return e.abrupt("return",Object(m.a)(t));case 6:if(!Object(g.a)(t)){e.next=8;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 8:return e.abrupt("return",O(t,n));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return S.apply(this,arguments)}function S(){return(S=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t))){e.next=2;break}return e.abrupt("return",i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buffer||t;case 2:case"end":return e.stop()}},e)})());case 2:if(!Object(g.d)(t)){e.next=4;break}return e.abrupt("return",t);case 4:if(!Object(g.c)(t)){e.next=6;break}return e.abrupt("return",t[Symbol.iterator]());case 6:throw new Error(v);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=o()(i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),a=a||b(t),e.next=4,w(t,n);case 4:if(t=e.sent,!n.parseTextSync||"string"!=typeof t){e.next=8;break}return r.dataType="text",e.abrupt("return",n.parseTextSync(t,r,a,n));case 8:if(!n.parseSync){e.next=10;break}return e.abrupt("return",n.parseSync(t,r,a,n));case 10:if(!n.parse){e.next=14;break}return e.next=13,n.parse(t,r,a,n);case 13:return e.abrupt("return",e.sent);case 14:if(!n.worker){e.next=18;break}return e.next=17,d(n.worker,t,r);case 17:return e.abrupt("return",e.sent);case 18:return e.abrupt("return",Object(l.a)(!1));case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t,n,r){return T.apply(this,arguments)}function T(){return(T=o()(i.a.mark(function e(t,n,r,a){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),!n.parseInBatches){e.next=7;break}return e.next=4,_(t);case 4:return o=e.sent,s=n.parseInBatches(o,r,a,n),e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=o()(i.a.mark(function e(t,n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Object(u.a)(n)||(a=r,r=n,n=null),n=n||Object(f.a)(),o=Array.isArray(n)?Object(s.a)(a,t,n):n){e.next=5;break}return e.abrupt("return",null);case 5:return Object(u.b)(o),r=M(r,o),e.next=9,E(t,o,r,a);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t,n,r){Array.isArray(t)||Object(u.a)(t)||(r=n,n=t,t=null),t=t||Object(f.a)();var i=Array.isArray(t)?Object(s.a)(r,e,t):t;return Object(u.b)(i),function(e,t,n,r){return void 0===n&&(n={}),e=y(e,t),t.parseTextSync&&"string"==typeof e?t.parseTextSync(e,n,r,t):t.parseSync?t.parseSync(e,n,r,t):Object(l.a)(!1)}(e,i,n=M(n,i),r)}function R(e,t,n,r){return C.apply(this,arguments)}function C(){return(C=o()(i.a.mark(function e(t,n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(n)||Object(u.a)(n)||(a=r,r=n,n=null),n=n||Object(f.a)(),o=Array.isArray(n)?Object(s.a)(a,null,n):n,Object(u.b)(o),r=M(r,o),e.abrupt("return",k(t,o,r,a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t){return null===(e=Object.assign({},t.DEFAULT_OPTIONS,t.options,e,{dataType:"arraybuffer"})).log&&(e.log=new c),"log"in e||(e.log=console),e}n.d(t,"a",function(){return B}),n.d(t,"c",function(){return U}),n.d(t,"b",function(){return R})},212:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(33),n(226),n(7);var r="",i={};function a(e){for(var t in i)if(e.startsWith(t)){var n=i[t];return e.replace(t,n)}return e+=r}},216:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"loader assertion failed.")}n.d(t,"a",function(){return r})},220:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});n(14),n(11),n(253),n(75),n(76),n(19);var r=n(221),i={};function a(e){var t=e=Array.isArray(e)?e:[e],n=Array.isArray(t),a=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(a>=t.length)break;o=t[a++]}else{if((a=t.next()).done)break;o=a.value}var s=o;Object(r.b)(s);var u=s.extensions,c=Array.isArray(u),f=0;for(u=c?u:u[Symbol.iterator]();;){var l;if(c){if(f>=u.length)break;l=u[f++]}else{if((f=u.next()).done)break;l=f.value}i[l]=s}}}function o(){return Object.values(i)}},221:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});n(7);var r=n(216);function i(e){return!!e&&(Array.isArray(e)&&(e=e[0]),e.parseTextSync||e.parseSync||e.parse||e.loadAndParse||e.parseStream||e.parseInBatches||e.worker)}function a(e){var t;return Object(r.a)(i(e)),Array.isArray(e)&&(t=(e=e[0])[1],e=Object.assign({},e,{options:Object.assign({},e.options,{options:t})})),e.extension&&(e.extensions=e.extensions||[e.extension],delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Object(r.a)(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}},222:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(205),i=n.n(r),a=(n(207),n(208)),o=n.n(a),s=n(212);function u(e,t){return c.apply(this,arguments)}function c(){return(c=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.a)(t),e.abrupt("return",fetch(t,n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}},223:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(205),i=n.n(r),a=(n(207),n(208)),o=n.n(a),s=n(222),u=n(221),c=n(238),f=n(210),l=n(220);function p(e,t,n){return h.apply(this,arguments)}function h(){return(h=o()(i.a.mark(function e(t,n,r){var a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Object(u.a)(n)||(r=n,n=null),n=n||Object(l.a)(),!(a=Array.isArray(n)?Object(c.a)(t,null,n):n)||!a.loadAndParse){e.next=7;break}return e.next=6,a.loadAndParse(t,r);case 6:return e.abrupt("return",e.sent);case 7:if("string"!=typeof(o=t)){e.next=12;break}return e.next=11,Object(s.a)(t,r);case 11:o=e.sent;case 12:return e.abrupt("return",Object(f.a)(o,n,r,t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}},224:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(202);function r(e){return e+3&-4}},227:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(30),n(11),n(75),n(76);var r=n(208),i=n.n(r),a=n(205),o=n.n(a),s=(n(207),n(286)),u=n.n(s),c=n(287),f=n.n(c),l=n(206);function p(e){return"function"==typeof e[Symbol.asyncIterator]?e:"function"==typeof e.getIterator?e.getIterator():l.b?function(e){return h.apply(this,arguments)}(e):function(e){return d.apply(this,arguments)}(e)}function h(){return(h=f()(o.a.mark(function e(t){var n,r,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getReader(),e.prev=1;case 2:return e.next=5,u()(n.read());case 5:if(r=e.sent,i=r.done,a=r.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,a;case 12:e.next=2;break;case 14:return e.prev=14,n.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,,14,17]])}))).apply(this,arguments)}function d(){return(d=f()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()(t);case 2:t=e.sent;case 3:if(null===(n=t.read())){e.next=9;break}return e.next=8,n;case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u()(g(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=i()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.once("readable",e)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}},230:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(205),n(207),n(208),n(210),n(222),n(223),n(212);var r=n(206),i=(r.a.TextEncoder,r.a.TextDecoder)},238:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(75),n(76),n(19),n(79);var r=n(221),i=/[^.]+$/;function a(e,t,n){void 0===e&&(e="");var a=e.match(i);if(a&&a[0]){var o=function(e,t){t=t.toLowerCase();for(var n=e,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(a>=n.length)break;o=n[a++]}else{if((a=n.next()).done)break;o=a.value}var s=o;Object(r.b)(s);for(var u=s.extensions,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var l;if(c){if(f>=u.length)break;l=u[f++]}else{if((f=u.next()).done)break;l=f.value}var p=l;if(p.toLowerCase()===t)return s}}return null}(n,a[0]);if(o)return o}var s=function(e,t){for(var n=e,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;if(o.testText&&o.testText(t))return o}return null}(n,t);return s||null}},267:function(e,t){},360:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});n(31);var r=n(2),i=n.n(r),a=n(0),o=n.n(a),s=n(3),u=n.n(s),c=n(201),f=n(383),l=n(374),p=n(361);void 0===e||e.navigator||(e.navigator={}),"undefined"!=typeof window&&(window.website=!0);var h={EXAMPLE_NOT_SUPPPORTED:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},d={position:"fixed",fontSize:"12px",zIndex:1e4,color:"#fff",background:"#000",padding:"8px",opacity:.8},g={example:u.a.object,canvas:u.a.string},m=function(e){function t(t){var n,r=(n=e.call(this,t)||this).props.AnimationLoop;return n.animationLoop=new r,n}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.showStats;this.animationLoop._setDisplay(new f.a);var t=this.props.path;if(t){Object(c.J)("https://raw.githubusercontent.com/uber/loaders.gl/master/"+t)}this.animationLoop.start(this.props),e&&this._showStats(this.animationLoop)},n.componentWillUnmount=function(){this.animationLoop.stop(this.props),this.animationLoop.delete(),this.animationLoop=null},n._showStats=function(e){var t=this,n=new l.a(e.stats,{container:this.refs.renderStats,title:"Render Time",css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"CPU Time":"averageTime","GPU Time":"averageTime","Frame Rate":"fps"},resetOnUpdate:{"CPU Time":!0,"GPU Time":!0,"Frame Rate":!0}});c.B.get("Memory Usage").reset();var r=new l.a(c.B.get("Memory Usage"),{container:this.refs.memStats,css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"}});this.animationFrame=window.requestAnimationFrame(function e(){n.update(),r.update(),t.animationFrame=window.requestAnimationFrame(e)})},n._stopStats=function(){window.cancelAnimationFrame(this.animationFrame)},n.render=function(){var e=this.props,t=e.name,n=e.panel,r=void 0===n||n,i=e.stats,a=e.sourceLink;if(this.animationLoop.isSupported&&!this.animationLoop.isSupported()){var s=this.animationLoop.getAltText?this.animationLoop.getAltText():"THIS EXAMPLE IS NOT SUPPORTED";return o.a.createElement("div",{style:h.EXAMPLE_NOT_SUPPPORTED},o.a.createElement("h2",null," ",s," "))}var u=this.props.AnimationLoop.getInfo()||this.animationLoop.getInfo&&this.animationLoop.getInfo();return o.a.createElement("div",{className:"fg",style:{width:"100%",height:"100%",padding:0,border:0}},i?o.a.createElement("div",{ref:"stats",className:"stats",style:d},o.a.createElement("div",{ref:"renderStats",className:"renderStats"}),o.a.createElement("div",{ref:"memStats",className:"memStats"})):null,o.a.createElement("canvas",{id:this.props.canvas,style:{width:"100%",height:"100%",padding:0,border:0}}),r?o.a.createElement(p.a,{name:t,controls:u,sourceLink:a}):null)},t}(a.Component);m.propTypes=g,m.defaultProps={canvas:"example-canvas"},m.displayName="AnimationLoop"}).call(this,n(78))},361:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(31);var r=n(2),i=n.n(r),a=n(0),o=n.n(a),s=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.controls,r=e.sourceLink;return o.a.createElement("div",{className:"options-panel top-right",tabIndex:"0"},o.a.createElement("h3",null,t),o.a.createElement("div",{className:"control-panel",dangerouslySetInnerHTML:{__html:n}}),r&&o.a.createElement("div",{className:"source-link"},o.a.createElement("a",{href:r,target:"_new"},"View Code ↗")))},t}(a.PureComponent)},378:function(e,t,n){"use strict";n(202),n(233),n(75),n(76),n(30),n(19),n(14),n(11),n(77),n(82),n(7);var r=n(205),i=n.n(r),a=(n(207),n(208)),o=n.n(a),s=n(222),u=n(230),c=(n(231),n(241),n(243),n(255),n(256),n(216)),f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},l={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},p={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function h(e,t,n){n&&(e=function(e,t){for(var n=e.byteLength-t,r=new ArrayBuffer(n),i=new Uint8Array(e),a=new Uint8Array(r),o=0;o<n;o++)a[o]=i[t+o];return r}(e,n));for(var r=t.bufferViews||[],i=0;i<r.length;++i){var a=r[i];Object(c.a)(a.byteLength>=0)}return{accessors:d(e,r,t),images:g(e,r,t)}}function d(e,t,n){for(var r=n.accessors||[],i=[],a=0;a<r.length;++a){var o=r[a];Object(c.a)(o);var s=t[o.bufferView];if(s){var u=m(o,s),f=u.ArrayType,l=u.length,p=new f(e,s.byteOffset,l);p.accessor=o,i.push(p)}}return i}function g(e,t,n){for(var r=n.images||[],i=[],a=0;a<r.length;++a){var o=r[a];Object(c.a)(o);var s=t[o.bufferView];Object(c.a)(s);var u=new Uint8Array(e,s.byteOffset,s.byteLength);u.imate=o,i.push(u)}return i}function m(e,t){var n=p[e.componentType],r=f[e.type],i=l[e.componentType],a=e.count*r,o=e.count*r*i;return Object(c.a)(o>=0&&o<=t.byteLength),{ArrayType:n,length:a,byteLength:o}}n(79);function v(e,t,n){return void 0===n&&(n={}),function e(t,n,r,i){void 0===i&&(i={});var a=t;var o=function(e,t){var n=function(e){if("string"==typeof e){if(0===e.indexOf("##/"))return e.slice(1);var t=e.match(/#\/([a-z]+)\/([0-9]+)/);if(t){var n=parseInt(t[2],10);return[t[1],n]}if(t=e.match(/\$\$\$([0-9]+)/)){var r=parseInt(t[1],10);return["accessors",r]}}return null}(e);if(n){var r=n[0],i=n[1],a=t[r]&&t[r][i];if(a)return a;console.error("Invalid JSON pointer "+e+": #/"+r+"/"+i)}return null}(a,r);if(o)return o;if(Array.isArray(a))return a.map(function(t){return e(t,n,r,i)});if(null!==a&&"object"==typeof a){var s={};for(var u in a)s[u]=e(a[u],n,r,i);return s}return a}(e,e,t,n)}var b=n(224),y=1735152710,w=12,x=8,_=1313821514,A=5130562,O=!0,S=!1;function E(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r={});var i=new DataView(t);e.byteOffset=n,e.magic=i.getUint32(n+0,S),e.version=i.getUint32(n+4,O),e.byteLength=i.getUint32(n+8,O),e.type=function(e){return""+String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3))}(i);var a=r.magic,o=void 0===a?y:a;e.magic===y||e.magic===o||console.warn("Invalid GLB magic string "+e.type),Object(c.a)(2===e.version,"Invalid GLB version "+e.version+". Only .glb v2 supported"),Object(c.a)(e.byteLength>20),e.jsonChunkLength=i.getUint32(n+12,O),e.jsonChunkFormat=i.getUint32(n+16,O);var s=e.jsonChunkFormat===_||0===e.jsonChunkFormat;Object(c.a)(s,"JSON chunk format "+e.jsonChunkFormat),e.jsonChunkByteOffset=w+x;var f=new Uint8Array(t,n+e.jsonChunkByteOffset,e.jsonChunkLength),l=new u.a("utf8").decode(f);e.json=JSON.parse(l);var p=e.jsonChunkByteOffset+Object(b.a)(e.jsonChunkLength);if(e.hasBinChunk=p+8<=e.byteLength,e.binChunkByteOffset=0,e.binChunkLength=0,e.hasBinChunk){e.binChunkLength=i.getUint32(n+p+0,O),e.binChunkFormat=i.getUint32(n+p+4,O);var h=e.binChunkFormat===A||1===e.binChunkFormat;Object(c.a)(h,"BIN chunk format "+e.binChunkFormat),e.binChunkByteOffset=p+x}return n+e.byteLength}n(239);var j=["SCALAR","VEC2","VEC3","VEC4"],k=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]);function T(e){return j[e-1]||j[0]}function B(e){var t=k.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}var L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},R={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},C=function(){function e(){}e.isGLB=function(e,t){void 0===t&&(t={});return function(e,t,n){void 0===t&&(t=0),void 0===n&&(n={});var r=n.magic,i=void 0===r?y:r,a=e.getUint32(t,!1);return a===i||a===y}(new DataView(e),0)};var t=e.prototype;return t.parse=function(e,t){return void 0===t&&(t={}),this.parseSync(e,t)},t.parseSync=function(e,t){if(void 0===t&&(t={}),this.glbArrayBuffer=e,this.binaryByteOffset=null,this.packedJson=null,this.json=null,null===this.json&&null===this.binaryByteOffset){E(this,this.glbArrayBuffer,0,t),this.binaryByteOffset=this.binChunkByteOffset,this.packedJson=this.json,this.unpackedBuffers=h(this.glbArrayBuffer,this.json,this.binaryByteOffset),this.json=v(this.json,this.unpackedBuffers)}return this},t.getApplicationData=function(e){return this.json[e]},t.getJSON=function(){return this.json},t.getArrayBuffer=function(){return this.glbArrayBuffer},t.getBinaryByteOffset=function(){return this.binaryByteOffset},t.getBufferView=function(e){var t=(e.byteOffset||0)+this.binaryByteOffset;return new Uint8Array(this.glbArrayBuffer,t,e.byteLength)},t.getBuffer=function(e){var t=R[e.componentType],n=L[e.type],r=U[e.componentType],i=e.count*n,a=e.count*n*r,o=this.json.bufferViews[e.bufferView];!function(e,t){if(!e)throw new Error(t||"gltf/glb assertion failed.")}(a>=0&&e.byteOffset+a<=o.byteLength);var s=o.byteOffset+this.binaryByteOffset+e.byteOffset;return new t(this.glbArrayBuffer,s,i)},t.getImageData=function(e){return{typedArray:this.getBufferView(e.bufferView),mimeType:e.mimeType||"image/jpeg"}},t.getImage=function(e){var t=this.getBufferView(e.bufferView),n=e.mimeType||"image/jpeg",r=new Blob([t],{type:n}),i=(self.URL||self.webkitURL).createObjectURL(r),a=new Image;return a.src=i,a},t.getImageAsync=function(e){var t=this;return new Promise(function(n){var r=t.getBufferView(e.bufferView),i=e.mimeType||"image/jpeg",a=new Blob([r],{type:i}),o=(self.URL||self.webkitURL).createObjectURL(a),s=new Image;s.onload=function(){return n(s)},s.src=o})},e}();n(226);function M(e,t){return e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:")?e:t.substr(0,t.lastIndexOf("/")+1)+e}var P={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},V={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243};var F=function(){function e(){}var t=e.prototype;return t.postProcess=function(e,t,n){return void 0===n&&(n={}),this.gltf=e,this.glbParser=t,this._resolveToTree(n),this.gltf},t._resolveToTree=function(e){var t=this;void 0===e&&(e={});var n=this.gltf;return(n.bufferViews||[]).forEach(function(e,n){return t._resolveBufferView(e,n)}),(n.images||[]).forEach(function(n,r){return t._resolveImage(n,r,e)}),(n.samplers||[]).forEach(function(e,n){return t._resolveSampler(e,n)}),(n.textures||[]).forEach(function(e,n){return t._resolveTexture(e,n)}),(n.accessors||[]).forEach(function(e,n){return t._resolveAccessor(e,n)}),(n.materials||[]).forEach(function(e,n){return t._resolveMaterial(e,n)}),(n.meshes||[]).forEach(function(e,n){return t._resolveMesh(e,n)}),(n.nodes||[]).forEach(function(e,n){return t._resolveNode(e,n)}),(n.skins||[]).forEach(function(e,n){return t._resolveSkin(e,n)}),(n.scenes||[]).forEach(function(e,n){return t._resolveScene(e,n)}),void 0!==n.scene&&(n.scene=n.scenes[this.gltf.scene]),this._process_extension_KHR_lights_punctual(),n},t.getScene=function(e){return this._get("scenes",e)},t.getNode=function(e){return this._get("nodes",e)},t.getSkin=function(e){return this._get("skins",e)},t.getMesh=function(e){return this._get("meshes",e)},t.getMaterial=function(e){return this._get("materials",e)},t.getAccessor=function(e){return this._get("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this._get("textures",e)},t.getSampler=function(e){return this._get("samplers",e)},t.getImage=function(e){return this._get("images",e)},t.getBufferView=function(e){return this._get("bufferViews",e)},t.getBuffer=function(e){return this._get("buffers",e)},t._get=function(e,t){if("object"==typeof t)return t;var n=this.gltf[e]&&this.gltf[e][t];return n||console.warn("glTF file error: Could not find "+e+"["+t+"]"),n},t._resolveScene=function(e,t){var n=this;e.id="scene-"+t,e.nodes=(e.nodes||[]).map(function(e){return n.getNode(e)})},t._resolveNode=function(e,t){var n=this;e.id="node-"+t,e.children=(e.children||[]).map(function(e){return n.getNode(e)}),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin))},t._resolveSkin=function(e,t){e.id="skin-"+t,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices)},t._resolveMesh=function(e,t){e.id="mesh-"+t;var n=e.primitives,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;for(var s in o.attributes)o.attributes[s]=this.getAccessor(o.attributes[s]);void 0!==o.indices&&(o.indices=this.getAccessor(o.indices)),void 0!==o.material&&(o.material=this.getMaterial(o.material))}},t._resolveMaterial=function(e,t){if(e.id="material-"+t,e.normalTexture&&(e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){var n=e.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}},t._resolveAccessor=function(e,t){e.id="accessor-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=I[e],e.components=P[e],e.bytesPerElement=e.bytesPerComponent*e.components},t._resolveTexture=function(e,t){e.id="texture-"+t,e.sampler=this.getSampler(e.sampler),e.source=this.getImage(e.source)},t._resolveSampler=function(e,t){for(var n in e.id="sampler-"+t,e.parameters={},e){var r=this._enumSamplerParameter(n);void 0!==r&&(e.parameters[r]=e[n])}},t._enumSamplerParameter=function(e){return V[e]},t._resolveImage=function(e,t,n){var r=this;e.id="image-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var i=n.createImages;void 0===i||i?e.image=this.glbParser.getImage(e):e.getImageAsync=function(){return r.glbParser?r.glbParser.getImageAsync(e):e.uri?new Promise(function(t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.src=M(e.uri,n.uri)}):null}},t._resolveBufferView=function(e,t){if(e.id="bufferView-"+t,e.buffer=this.getBuffer(e.buffer),this.glbParser)e.data=this.glbParser.getBufferView(e);else{var n=e.byteOffset||0;e.data=new Uint8Array(e.buffer.data,n,e.byteLength)}},t._resolveCamera=function(e){e.perspective,e.orthographic},t._process_extension_KHR_lights_punctual=function(){var e=this.gltf,t=e.extensions&&e.extensions.KHR_lights_punctual;t&&(e.lights=t.lights),this._removeExtension("KHR_lights_punctual");var n=e.nodes||[],r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a,s=o.extensions&&o.extensions.KHR_lights_punctual;s&&(o.light=this._get("lights",s.light),delete o.extensions.KHR_lights_punctual)}delete e.lights},t._removeExtension=function(e){this.gltf.extensionsRequired&&this._removeStringFromArray(this.gltf.extensionsRequired,e),this.gltf.extensionsUsed&&this._removeStringFromArray(this.gltf.extensionsUsed,e),this.gltf.extensions&&delete this.gltf.extensions[e]},t._removeStringFromArray=function(e,t){for(var n=!0;n;){var r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}},e}();n(31);function D(e,t){var n=function(e,t){var n=e,r=1,i=0;e&&e.value&&(n=e.value,r=e.size||1);n&&(ArrayBuffer.isView(n)||(n=function(e,t,n){void 0===n&&(n=!1);if(!e)return null;if(Array.isArray(e))return new t(e);if(n&&!(e instanceof t))return new t(e);return e}(n,Float32Array)),i=n.length/r);return{buffer:n,size:r,count:i}}(e),r=n.buffer,i=n.size;return{value:r,size:i,bufferView:null,byteOffset:0,count:n.count,type:T(i),componentType:B(r)}}var N={fetchLinkedResources:!0,fetch:s.a,decompress:!1,DracoLoader:null,postProcess:!0,createImages:!1,log:console},H=function(){function e(){}var t=e.prototype;return t.parse=function(){var e=o()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),n=Object.assign({},N,n),this.parseSync(t,Object.assign({},n,{postProcess:!1,decompress:!1})),!n.fetchLinkedResources){e.next=6;break}return e.next=6,this._loadLinkedAssets(n);case 6:return n.decompress&&this._decompressMeshes(n),n.postProcess&&(new F).postProcess(this.gltf,this.glbParser,n),e.abrupt("return",this.gltf);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.parseSync=function(e,t){(void 0===t&&(t={}),t=Object.assign({},N,t),e instanceof ArrayBuffer&&!C.isGLB(e,t))&&(e=(new u.a).decode(e));("string"==typeof e&&(e=JSON.parse(e)),e instanceof ArrayBuffer?(this.glbParser=new C,this.gltf=this.glbParser.parseSync(e).json,this.json=this.gltf):(this.glbParser=null,this.gltf=e,this.json=e),t.decompress&&this._decompressMeshes(t),t.postProcess)&&(new F).postProcess(this.gltf,this.glbParser,t);return this.gltf},t.getApplicationData=function(e){return this.json[e]},t.getExtraData=function(e){return(this.json.extras||{})[e]},t.getExtension=function(e){var t=this.getUsedExtensions().find(function(t){return t===e}),n=this.json.extensions||{};return t?n[e]||!0:null},t.getRequiredExtension=function(e){return this.getRequiredExtensions().find(function(t){return t===e})?this.getExtension(e):null},t.getRequiredExtensions=function(){return this.json.extensionsRequired||[]},t.getUsedExtensions=function(){return this.json.extensionsUsed||[]},t.getScene=function(e){return this._get("scenes",e)},t.getNode=function(e){return this._get("nodes",e)},t.getSkin=function(e){return this._get("skins",e)},t.getMesh=function(e){return this._get("meshes",e)},t.getMaterial=function(e){return this._get("materials",e)},t.getAccessor=function(e){return this._get("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this._get("textures",e)},t.getSampler=function(e){return this._get("samplers",e)},t.getImage=function(e){return this._get("images",e)},t.getBufferView=function(e){return this._get("bufferViews",e)},t.getBuffer=function(e){return this._get("buffers",e)},t._get=function(e,t){if("object"==typeof t)return t;var n=this.gltf[e]&&this.gltf[e][t];return n||console.warn("glTF file error: Could not find "+e+"["+t+"]"),n},t._loadLinkedAssets=function(){var e=o()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.gltf.buffers.map(function(e){return n._loadBuffer(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._loadBuffer=function(){var e=o()(i.a.mark(function e(t,n){var r,a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.uri){e.next=11;break}return r=n.fetch||window.fetch,a=M(t.uri,n.uri),e.next=5,r(a);case 5:return o=e.sent,e.next=8,o.arrayBuffer();case 8:s=e.sent,t.data=s,t.uri=null;case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),t._decompressMeshes=function(e){if(e.DracoLoader&&e.decompress){var t=this.gltf.meshes||[],n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i.primitives,o=Array.isArray(a),s=0;for(a=o?a:a[Symbol.iterator]();;){var u;if(o){if(s>=a.length)break;u=a[s++]}else{if((s=a.next()).done)break;u=s.value}var c=u;if(this._decompressKhronosDracoPrimitive(c,e),this._decompressUberDracoPrimitive(c,e),!c.attributes||0===Object.keys(c.attributes).length)throw new Error("Empty glTF primitive: decompression failure?")}}this._removeExtension("KHR_draco_mesh_compression"),this._removeExtension("UBER_draco_point_cloud_compression")}},t._decompressKhronosDracoPrimitive=function(e,t){var n=e.extensions&&e.extensions.KHR_draco_mesh_compression;if(n){delete e.extensions.KHR_draco_mesh_compression;var r=this._getBufferViewArray(n.bufferView),i=t.DracoLoader.parseSync(r);e.attributes=function(e){var t={};for(var n in e){var r=e[n];if("indices"!==n){var i=D(r);t[n]=i}}return t}(i.attributes),i.indices&&(e.indices=D(i.indices))}},t._decompressUberDracoPrimitive=function(e,t){var n=e.extensions&&e.extensions.UBER_draco_point_cloud_compression;if(n){if(0!==e.mode)throw new Error("UBER_draco_point_cloud_compression");delete e.extensions.UBER_draco_point_cloud_compression;var r=this._getBufferViewArray(n.bufferView),i=t.DracoLoader.parseSync(r);e.attributes=i.attributes}},t._getBufferViewArray=function(e){var t=this.gltf.bufferViews[e];if(this.glbParser)return this.glbParser.getBufferView(t);var n=this.gltf.buffers[t.buffer].data,r=t.byteOffset||0;return new Uint8Array(n,r,t.byteLength)},t._removeExtension=function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]},t._removeStringFromArray=function(e,t){for(var n=!0;n;){var r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}},e}();t.a={name:"glTF",extension:["gltf","glb"],text:!0,binary:!0,parse:function(e,t){return void 0===t&&(t={}),(new H).parse(e,t)},parseSync:function(e,t){return void 0===t&&(t={}),(new H).parseSync(e,t)}}}}]);