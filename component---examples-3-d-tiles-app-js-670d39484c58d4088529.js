(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{289:function(e,t,n){"use strict";n.r(t);n(23),n(3),n(39),n(4);var r=n(298),i=n.n(r),a=(n(302),n(0)),o=n.n(a),s=n(97),u=n(608),c=n(646),l=n(433),h=n(536),f=(n(11),n(8),n(5),n(6),n(137),n(134),n(386),n(585)),d=n(586),p=n(587),y=n(588),m=n.n(y),v=(n(293),n(135),n(485)),_=n.n(v),g=n(589),b=n.n(g),T=n(590);function w(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,s,"next",e)}function s(e){w(a,r,i,o,s,"throw",e)}o(void 0)})}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(e,t){this.url=e,this.options=t,this.bodyUsed=!1,this._headers=null}var t,n,r,a=e.prototype;return a.arrayBuffer=function(){var e=x(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.bodyUsed=!0,e.abrupt("return",Object(T.b)(this.url,this.options));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.text=function(){var e=x(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.arrayBuffer();case 2:return t=e.sent,n=new TextDecoder,e.abrupt("return",n.decode(t));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.json=function(){var e=x(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._getHeaders=function(){var e={};if(this.httpResponse){var t=this.httpResponse.getHeaders();for(var n in t){var r=e[n];e[n]=String(r)}}else{var i=this._getContentLength();Number.isFinite(i)&&(e["Content-Length"]=i)}return new b.a(e)},a._getContentLength=function(){return(e=this.url).startsWith("http:")||e.startsWith("https:")?null:function(e){return e.startsWith("data:")}(this.url)?this.url.length-"data:".length:_.a.statSync(this.url).size;var e},t=e,(n=[{key:"headers",get:function(){this._headers=this._headers||this._getHeaders()}},{key:"body",get:function(){var e=this.url,t=this.options;return this.bodyUsed=!0,Object(T.a)(e,t)}}])&&E(t.prototype,n),r&&E(t,r),e}(),O=n(597),I=n.n(O),A=n(598),k=n(599);"TextEncoder"in f.a||!d.b||(f.a.TextEncoder=d.b),"TextDecoder"in f.a||!d.a||(f.a.TextDecoder=d.a),f.b||"atob"in f.a||!p.atob||(f.a.atob=p.atob),f.b||"btoa"in f.a||!p.btoa||(f.a.btoa=p.btoa),f.b||"Headers"in f.a||!m.a||(f.a.Headers=m.a),f.b||"Response"in f.a||!S||(f.a.Respone=S),f.b||"fetch"in f.a||!I.a||(f.a.fetch=I.a),f.b||"_encodeImageNode"in f.a||!A.encodeImageNode||(f.a._encodeImageNode=A.encodeImageNode),f.b||"_parseImageNode"in f.a||!k.parseImageNode||(f.a._parseImageNode=k.parseImageNode);var L=n(359),P=n(492),N=n(648),C=n(649),U=n(630),D=n(391),B=n(393),M=n(418),R=n(609),F=n(335),V=n(317),j=(n(9),{COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"}),G=(Object.keys(j),{UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5}),z={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},H=0,q=1,J=(n(297),n(321));function W(e,t,n){Object(J.a)(e instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(e,t,n);return r.decode(i)}function Y(e,t){void 0===t&&(t=0);var n=new DataView(e);return""+String.fromCharCode(n.getUint8(t+0))+String.fromCharCode(n.getUint8(t+1))+String.fromCharCode(n.getUint8(t+2))+String.fromCharCode(n.getUint8(t+3))}var Z,K={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Q=Object.assign({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},{},K),X=(n(319),n(323),n(324),n(313),n(315),n(300),n(371),(Z={})[K.DOUBLE]=Float64Array,Z[K.FLOAT]=Float32Array,Z[K.UNSIGNED_SHORT]=Uint16Array,Z[K.UNSIGNED_INT]=Uint32Array,Z[K.UNSIGNED_BYTE]=Uint8Array,Z[K.BYTE]=Int8Array,Z[K.SHORT]=Int16Array,Z[K.INT]=Int32Array,Z),$={DOUBLE:K.DOUBLE,FLOAT:K.FLOAT,UNSIGNED_SHORT:K.UNSIGNED_SHORT,UNSIGNED_INT:K.UNSIGNED_INT,UNSIGNED_BYTE:K.UNSIGNED_BYTE,BYTE:K.BYTE,SHORT:K.SHORT,INT:K.INT},ee=function(){function e(){}return e.fromTypedArray=function(e){for(var t in e=ArrayBuffer.isView(e)?e.constructor:e,X){if(X[t]===e)return t}throw new Error("Failed to convert GL type")},e.fromName=function(e){var t=$[e];if(!t)throw new Error("Failed to convert GL type");return t},e.getArrayType=function(e,t){switch(void 0===t&&(t=!1),e){case K.UNSIGNED_SHORT_5_6_5:case K.UNSIGNED_SHORT_4_4_4_4:case K.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var n=X[e];if(!n)throw new Error("Failed to convert GL type");return n}},e.getByteSize=function(t){return e.getArrayType(t).BYTES_PER_ELEMENT},e.validate=function(t){return Boolean(e.getArrayType(t))},e.createTypedArray=function(t,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=(n.byteLength-r)/e.getByteSize(t)),new(e.getArrayType(t))(n,r,i)},e}(),te=function(){function e(e,t){this.json=e,this.buffer=t,this.featuresLength=0,this._cachedTypedArrays={}}var t=e.prototype;return t.getExtension=function(e){return this.json.extensions&&this.json.extensions[e]},t.hasProperty=function(e){return Boolean(this.json[e])},t.getGlobalProperty=function(e,t,n){void 0===t&&(t=Q.UNSIGNED_INT),void 0===n&&(n=1);var r=this.json[e];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(e,t,n,1,r.byteOffset):r},t.getPropertyArray=function(e,t,n){var r=this.json[e];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(t=ee.fromName(r.componentType)),this._getTypedArrayFromBinary(e,t,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(e,t,r)},t.getProperty=function(e,t,n,r,i){var a=this.json[e];if(!a)return a;var o=this.getPropertyArray(e,t,n);if(1===n)return o[r];for(var s=0;s<n;++s)i[s]=o[n*r+s];return i},t._getTypedArrayFromBinary=function(e,t,n,r,i){var a=this._cachedTypedArrays,o=a[e];return o||(o=ee.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+i,r*n),a[e]=o),o},t._getTypedArrayFromArray=function(e,t,n){var r=this._cachedTypedArrays,i=r[e];return i||(i=ee.createTypedArray(t,n),r[e]=i),i},e}();n(56),n(77),n(32);function ne(e,t){if(!e)throw new Error(t||"3d-tile loader: assertion failed.")}var re={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ie={SCALAR:function(e,t){return e[t]},VEC2:function(e,t){return[e[2*t+0],e[2*t+1]]},VEC3:function(e,t){return[e[3*t+0],e[3*t+1],e[3*t+2]]},VEC4:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT2:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT3:function(e,t){return[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]]},MAT4:function(e,t){return[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]}},ae={SCALAR:function(e,t,n){t[n]=e},VEC2:function(e,t,n){t[2*n+0]=e[0],t[2*n+1]=e[1]},VEC3:function(e,t,n){t[3*n+0]=e[0],t[3*n+1]=e[1],t[3*n+2]=e[2]},VEC4:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT2:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT3:function(e,t,n){t[9*n+0]=e[0],t[9*n+1]=e[1],t[9*n+2]=e[2],t[9*n+3]=e[3],t[9*n+4]=e[4],t[9*n+5]=e[5],t[9*n+6]=e[6],t[9*n+7]=e[7],t[9*n+8]=e[8],t[9*n+9]=e[9]},MAT4:function(e,t,n){t[16*n+0]=e[0],t[16*n+1]=e[1],t[16*n+2]=e[2],t[16*n+3]=e[3],t[16*n+4]=e[4],t[16*n+5]=e[5],t[16*n+6]=e[6],t[16*n+7]=e[7],t[16*n+8]=e[8],t[16*n+9]=e[9],t[16*n+10]=e[10],t[16*n+11]=e[11],t[16*n+12]=e[12],t[16*n+13]=e[13],t[16*n+14]=e[14],t[16*n+15]=e[15]}};n(354);function oe(e){throw new Error('"'+e+'" is read-only')}var se=function(e){return void 0!==e};function ue(e,t,n){if(!t)return null;var r=e.getExtension("3DTILES_batch_table_hierarchy"),i=t.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(e,t){var n,r,i,a,o=e.instancesLength,s=e.classes,u=e.classIds,c=e.parentCounts,l=e.parentIds,h=o;se(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),oe("classIds"),u=i.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,o));if(se(c))for(se(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),oe("parentCounts"),c=i.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,o)),a=new Uint16Array(o),oe("parentIdsLength"),h=0,n=0;n<o;++n)a[n]=h,h+=(oe("parentIdsLength"),c[n]);se(l)&&se(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),oe("parentIds"),l=i.createArrayBufferView(t.buffer,t.byteOffset+l.byteOffset,h));var f=s.length;for(n=0;n<f;++n){var d=s[n].length,p=s[n].instances,y=getBinaryProperties(d,p,t);s[n].instances=combine(y,p)}var m=new Array(f).fill(0),v=new Uint16Array(o);for(n=0;n<o;++n)r=u[n],v[n]=m[r],++m[r];var _={classes:s,classIds:u,classIndexes:v,parentCounts:c,parentIndexes:a,parentIds:l};return function(e){for(var t=e.classIds.length,n=0;n<t;++n)le(e,n,stack)}(_),_}(r,n):null}function ce(e,t,n){if(e){var r=e.parentCounts;return e.parentIds?n(e,t):r>0?function(e,t,n){var r=e.classIds,i=e.parentCounts,a=e.parentIds,o=e.parentIndexes,s=r.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,l=scratchStack;l.length=0,l.push(t);for(;l.length>0;)if(t=l.pop(),u[t]!==c){u[t]=c;var h=n(e,t);if(se(h))return h;for(var f=i[t],d=o[t],p=0;p<f;++p){var y=a[d+p];y!==t&&l.push(y)}}return null}(e,t,n):function(e,t,n){var r=!0;for(;r;){var i=n(e,t);if(se(i))return i;var a=e.parentIds[t];r=a!==t,t=a}throw new Error("traverseHierarchySingleParent")}(e,t,n)}}function le(e,t,n){var r=e.parentCounts,i=e.parentIds,a=e.parentIndexes,o=e.classIds.length;if(se(i)){assert(t<o,"Parent index "+t+" exceeds the total number of instances: "+o),assert(-1===n.indexOf(t),"Circular dependency detected in the batch table hierarchy."),n.push(t);for(var s=se(r)?r[t]:1,u=se(r)?a[t]:t,c=0;c<s;++c){var l=i[u+c];l!==t&&le(e,l,n)}n.pop(t)}}function he(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var fe=function(e){return void 0!==e},de=function(e){return e},pe={HIERARCHY:!0,extensions:!0,extras:!0},ye=function(){function e(e,t,n,r){for(var i in void 0===r&&(r={}),ne(n>=0),this.json=e||{},this.binary=t,this.featureCount=n,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)pe[i]||(this._properties[i]=this.json[i]);this._binaryProperties=this._initializeBinaryProperties(),r["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=ue(this,this.json,this.binary))}var t=e.prototype;return t.getExtension=function(e){return this.json&&this.json.extensions&&this.json.extensions[e]},t.memorySizeInBytes=function(){return 0},t.isClass=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._hierarchy){var n=ce(this._hierarchy,e,function(e,n){var r=e.classIds[n];return e.classes[r].name===t});return fe(n)}return!1},t.isExactClass=function(e,t){return ne("string"==typeof t,t),this.getExactClassName(e)===t},t.getExactClassName=function(e){if(this._checkBatchId(e),this._hierarchy){var t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}},t.hasProperty=function(e,t){return this._checkBatchId(e),ne("string"==typeof t,t),fe(this._properties[t])||this._hasPropertyInHierarchy(e,t)},t.getPropertyNames=function(e,t){var n;this._checkBatchId(e),(t=fe(t)?t:[]).length=0;var r=Object.keys(this._properties);return(n=t).push.apply(n,he(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t},t.getProperty=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._binaryProperties){var n=this._binaryProperties[t];if(fe(n))return this._getBinaryProperty(n,e)}var r=this._properties[t];if(fe(r))return de(r[e]);if(this._hierarchy){var i=this._getHierarchyProperty(e,t);if(fe(i))return i}},t.setProperty=function(e,t,n){var r=this.featureCount;if(this._checkBatchId(e,r),ne("string"==typeof t,t),this._binaryProperties){var i=this._binaryProperties[t];if(i)return void this._setBinaryProperty(i,e,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,t,n)){var a=this._properties[t];fe(a)||(this._properties[t]=new Array(r),a=this._properties[t]),a[e]=de(n)}},t._checkBatchId=function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")},t._getBinaryProperty=function(e,t){return e.unpack(e.typedArray,t)},t._setBinaryProperty=function(e,t,n){e.pack(n,e.typedArray,t)},t._initializeBinaryProperties=function(){var e=null;for(var t in this._properties){var n=this._properties[t],r=this._initializeBinaryProperty(t,n);r&&((e=e||{})[t]=r)}return e},t._initializeBinaryProperty=function(e,t){if("byteOffset"in t){var n=t;ne(this.binary,"Property "+e+" requires a batch table binary."),ne(n.type,"Property "+e+" requires a type.");var r=function(e,t,n,r){var i=e.componentType;ne(e.componentType);var a="string"==typeof i?ee.fromName(i):i,o=re[e.type],s=ie[e.type],u=ae[e.type];return n+=e.byteOffset,{values:ee.createTypedArray(a,t,n,o*r),type:a,size:o,unpacker:s,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null},t._hasPropertyInHierarchy=function(e,t){if(!this._hierarchy)return!1;var n=ce(this._hierarchy,e,function(e,n){var r=e.classIds[n],i=e.classes[r].instances;return fe(i[t])});return fe(n)},t._getPropertyNamesInHierarchy=function(e,t){ce(this._hierarchy,e,function(e,n){var r=e.classIds[n],i=e.classes[r].instances;for(var a in i)i.hasOwnProperty(a)&&-1===t.indexOf(a)&&t.push(a)})},t._getHierarchyProperty=function(e,t){var n=this;return ce(this._hierarchy,e,function(e,r){var i=e.classIds[r],a=e.classes[i],o=e.classIndexes[r],s=a.instances[t];return fe(s)?fe(s.typedArray)?n._getBinaryProperty(s,o):de(s[o]):null})},t._setHierarchyProperty=function(e,t,n,r){var i=this,a=ce(this._hierarchy,t,function(e,a){var o=e.classIds[a],s=e.classes[o],u=e.classIndexes[a],c=s.instances[n];return!!fe(c)&&(ne(a===t,'Inherited property "'+n+'" is read-only.'),fe(c.typedArray)?i._setBinaryProperty(c,u,r):c[u]=de(r),!0)});return fe(a)},e}(),me=4;function ve(e,t,n){void 0===n&&(n=0);var r=new DataView(t);if(e.magic=r.getUint32(n,!0),n+=me,e.version=r.getUint32(n,!0),n+=me,e.byteLength=r.getUint32(n,!0),n+=me,1!==e.version)throw new Error("3D Tile Version "+e.version+" not supported");return n}var _e=4;function ge(e,t,n){var r=new DataView(t);return e.featureTableJsonByteLength=r.getUint32(n,!0),n+=_e,e.featureTableBinaryByteLength=r.getUint32(n,!0),n+=_e,e.batchTableJsonByteLength=r.getUint32(n,!0),n+=_e,e.batchTableBinaryByteLength=r.getUint32(n,!0),n+=_e}function be(e,t,n,r){return n=function(e,t,n,r){var i=e.featureTableJsonByteLength,a=e.featureTableBinaryByteLength;if(e.featureTableJson={BATCH_LENGTH:0},i>0){var o=W(t,n,i);e.featureTableJson=JSON.parse(o)}return n+=i,e.featureTableBinary=new Uint8Array(t,n,a),n+=a}(e,t,n),n=function(e,t,n,r){var i=e.batchTableJsonByteLength,a=e.batchTableBinaryByteLength;if(i>0){var o=W(t,n,i);e.batchTableJson=JSON.parse(o),n+=i,a>0&&(e.batchTableBinary=new Uint8Array(t,n,a),e.batchTableBinary=new Uint8Array(e.batchTableBinary),n+=a)}return n}(e,t,n)}n(356);function Te(e,t){void 0===t&&(t=[0,0,0]);var n=e>>11&31,r=e>>5&63,i=31&e;return t[0]=n<<3,t[1]=r<<2,t[2]=i<<3,t}function we(e,t,n){if(!(t||e&&e.batchIds&&n))return null;var r=e.batchIds,i=e.isRGB565,a=e.pointCount;if(r&&n){for(var o=new Uint8ClampedArray(3*a),s=0;s<a;s++){var u=r[s],c=n.getProperty(u,"dimensions").map(function(e){return 255*e});o[3*s]=c[0],o[3*s+1]=c[1],o[3*s+2]=c[2]}return{size:3,value:o}}if(i){for(var l=new Uint8ClampedArray(3*a),h=0;h<a;h++){var f=Te(t[h]);l[3*h]=f[0],l[3*h+1]=f[1],l[3*h+2]=f[2]}return{size:3,value:l}}return t&&t.length===3*a?{size:3,value:t}:{size:4,value:t}}function xe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ee(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){xe(a,r,i,o,s,"next",e)}function s(e){xe(a,r,i,o,s,"throw",e)}o(void 0)})}}function Se(e,t,n,r){return Oe.apply(this,arguments)}function Oe(){return(Oe=Ee(i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ve(t,n,r),r=ge(t,n,r),r=be(t,n,r),e.next=5,Ae(t,a);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(e,t,n,r){return n=be(e,t,n=ge(e,t,n=ve(e,t,n))),function(e){Le(e);var t=Pe(e).featureTable;Ne(e,t),Ce(e,t),Ue(e,t)}(e),n}function Ae(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Ee(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Le(t),r=Pe(t),a=r.featureTable,o=r.batchTable,e.next=4,De(t,a,o,n);case 4:Ne(t,a),Ce(t,a,o),Ue(t,a);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Le(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function Pe(e){var t=new te(e.featureTableJson,e.featureTableBinary),n=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");t.featuresLength=n,e.featuresLength=n,e.pointsLength=n,e.pointCount=n,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",Q.FLOAT,3);var r=function(e,t){var n=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",Q.UNSIGNED_SHORT,1),e.batchIds)){var r=t.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=e.batchTableJson,a=e.batchTableBinary;n=new ye(i,a,r)}return n}(e,t);return{featureTable:t,batchTable:r}}function Ne(e,t){if(!e.attributes.positions)if(t.hasProperty("POSITION"))e.attributes.positions=t.getPropertyArray("POSITION",Q.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){if(e.attributes.positions=t.getPropertyArray("POSITION_QUANTIZED",Q.UNSIGNED_SHORT,3),e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Q.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Q.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.")}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function Ce(e,t,n){if(!e.attributes.colors){var r=null;t.hasProperty("RGBA")?(r=t.getPropertyArray("RGBA",Q.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?r=t.getPropertyArray("RGB",Q.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(r=t.getPropertyArray("RGB565",Q.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=we(e,r,n)}t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",Q.UNSIGNED_BYTE,4))}function Ue(e,t){e.attributes.normals||(t.hasProperty("NORMAL")?e.attributes.normals=t.getPropertyArray("NORMAL",Q.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(e.attributes.normals=t.getPropertyArray("NORMAL_OCT16P",Q.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0))}function De(e,t,n,r){return Be.apply(this,arguments)}function Be(){return(Be=Ee(i.a.mark(function e(t,n,r,a){var o,s,u,c,l,h,f,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((c=r&&r.getExtension("3DTILES_draco_point_compression"))&&(u=c.properties),!(l=n.getExtension("3DTILES_draco_point_compression"))){e.next=15;break}if(s=l.properties,h=l.byteOffset,f=l.byteLength,s&&Number.isFinite(h)&&f){e.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:o=t.featureTableBinary.slice(h,h+f),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA);case 15:if(!o){e.next=19;break}return d={buffer:o,properties:Object.assign({},s,{},u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},e.next=19,Me(t,d,a);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e,t,n){return Re.apply(this,arguments)}function Re(){return(Re=Ee(i.a.mark(function e(t,n,r){var a,o,s,u,c,l,f,d,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(r.DracoLoader),e.next=3,Object(V.a)(n.buffer,r.DracoLoader);case 3:a=e.sent,o=a.attributes.POSITION&&a.attributes.POSITION.value,s=a.attributes.COLOR_0&&a.attributes.COLOR_0.value,u=a.attributes.NORMAL&&a.attributes.NORMAL.value,c=a.attributes.BATCH_ID&&a.attributes.BATCH_ID.value,l=o&&a.attributes.POSITION.value.quantization,f=u&&a.attributes.NORMAL.value.quantization,l&&(d=a.POSITION.data.quantization,p=d.range,t.quantizedVolumeScale=new h.a(p,p,p),t.quantizedVolumeOffset=new h.a(d.minValues),t.quantizedRange=(1<<d.quantizationBits)-1,t.isQuantizedDraco=!0),f&&(t.octEncodedRange=(1<<a.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0),t.attributes={positions:o,colors:we(t,s),normals:u,batchIds:c};case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(12);var Fe={URI:0,EMBEDDED:1};function Ve(e,t,n){var r=e.byteOffset+e.byteLength-n;if(0===r)throw new Error("glTF byte length must be greater than 0.");var i=new Uint8Array(t).subarray(n,n+r),a=new Uint8Array(i);return e.gltfArrayBuffer=a.buffer,e.gltfByteOffset=0,e.gltfByteLength=r,e.byteOffset+e.byteLength}function je(e,t,n){switch(t){case Fe.URI:var r=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),i=(new TextDecoder).decode(r);e.gltfUrl=i.replace(/[\s\0]+$/,"");break;case Fe.EMBEDDED:e.gltf={};break;default:throw new Error("i3dm: glTF format "+t+": Must be 0 (uri) or 1 (embedded)")}}function Ge(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ze(e,t,n,r){return He.apply(this,arguments)}function He(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qe(t,n,r,a));case 1:case"end":return e.stop()}},e)}),(He=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Ge(a,r,i,o,s,"next",e)}function s(e){Ge(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function qe(e,t,n,r){n=Ve(e,t,n=be(e,t,n=ge(e,t,n=ve(e,t,n))));var i=new te(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=i.getGlobalProperty("RTC_CENTER",Q.FLOAT,3),je(e,Fe.EMBEDDED),n}var Je=n(641),We=n(653);function Ye(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ze(e,t,n,r){return Ke.apply(this,arguments)}function Ke(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qe(t,n,r,a));case 1:case"end":return e.stop()}},e)}),(Ke=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Ye(a,r,i,o,s,"next",e)}function s(e){Ye(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function Qe(e,t,n,r){if(n=ve(e,t,n),1!==e.version)throw new Error("Instanced 3D Model version "+e.version+" is not supported");n=ge(e,t,n);var i=new DataView(t);if(e.gltfFormat=i.getUint32(n,!0),n=Ve(e,t,n=be(e,t,n+=4)),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new te(e.featureTableJson,e.featureTableBinary),o=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=o,!Number.isFinite(o))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=a.getGlobalProperty("RTC_CENTER",Q.FLOAT,3);new ye(e.batchTableJson,e.batchTableBinary,o);return je(e,e.gltfFormat),function(e,t,n,r){for(var i=[new Array(r),e._batchTable][0],a=new h.a,o=(new h.a,new h.a,new h.a,new Je.a),s=new We.a,u=new h.a,c={},l=new U.a,f=[],d=[],p=new h.a,y=new h.a,m=0;m<r;m++){var v=void 0;if(t.hasProperty("POSITION"))v=t.getProperty("POSITION",Q.FLOAT,3,m,a);else if(t.hasProperty("POSITION_QUANTIZED")){v=t.getProperty("POSITION_QUANTIZED",Q.UNSIGNED_SHORT,3,m,a);var _=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Q.FLOAT,3,p);if(!_)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var g=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Q.FLOAT,3,y);if(!g)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var b=0;b<3;b++)v[b]=v[b]/65535*g[b]+_[b]}if(!v)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");a.copy(v),e.rtcCenter&&a.add(e.rtcCenter),c.translation=a,e.normalUp=t.getProperty("NORMAL_UP",Q.FLOAT,3,m,f),e.normalRight=t.getProperty("NORMAL_RIGHT",Q.FLOAT,3,m,d);if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=t.getProperty("NORMAL_UP_OCT32P",Q.UNSIGNED_SHORT,2,f),e.octNormalRight=t.getProperty("NORMAL_RIGHT_OCT32P",Q.UNSIGNED_SHORT,2,d),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(B.a.WGS84.eastNorthUpToFixedFrame(a,l),l.getRotation(o)):o.identity()}0,s.fromMatrix3(o),c.rotation=s,u.set(1,1,1);var T=t.getProperty("SCALE",Q.FLOAT,1,m);Number.isFinite(T)&&u.multiplyByScalar(T);var w=t.getProperty("SCALE_NON_UNIFORM",Q.FLOAT,3,m,f);w&&u.scale(w),c.scale=u;var x=t.getProperty("BATCH_ID",Q.UNSIGNED_SHORT,1,m);void 0===x&&(x=m);var E=(new U.a).fromQuaternion(c.rotation);l.identity(),l.translate(c.translation),l.multiplyRight(E),l.scale(c.scale);var S=l.clone();i[m]={modelMatrix:S,batchId:x}}e.instances=i}(e,a,0,o),n}function Xe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function $e(e,t,n,r,i){return et.apply(this,arguments)}function et(){var e;return e=i.a.mark(function e(t,n,r,a,o){var s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=ve(t,n,r),s=new DataView(n),t.tilesLength=s.getUint32(r,!0),r+=4,t.tiles=[];case 5:if(!(t.tiles.length<t.tilesLength&&t.byteLength-r>12)){e.next=13;break}return u={},t.tiles.push(u),e.next=10,o(n,r,a,u);case 10:r=e.sent,e.next=5;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e)}),(et=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Xe(a,r,i,o,s,"next",e)}function s(e){Xe(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function tt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function nt(e,t,n,r){return rt.apply(this,arguments)}function rt(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0===n&&(n=0),void 0===r&&(r={}),void 0===a&&(a={}),a.byteOffset=n,a.type=Y(t,n),e.t0=a.type,e.next=e.t0===j.COMPOSITE?8:e.t0===j.BATCHED_3D_MODEL?9:e.t0===j.INSTANCED_3D_MODEL?10:e.t0===j.POINT_CLOUD?11:14;break;case 8:return e.abrupt("return",$e(a,t,n,r,nt));case 9:return e.abrupt("return",ze(a,t,n,r));case 10:return e.abrupt("return",Ze(a,t,n,r));case 11:return e.next=13,Se(a,t,n,r);case 13:return e.abrupt("return",e.sent);case 14:throw new Error("3DTileLoader: unknown type "+a.type);case 15:case"end":return e.stop()}},e)}),(rt=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){tt(a,r,i,o,s,"next",e)}function s(e){tt(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function it(e,t,n,r){switch(void 0===t&&(t=0),void 0===n&&(n={}),void 0===r&&(r={}),r.byteOffset=t,r.type=Y(e,t),r.type){case j.COMPOSITE:return function(e,t,n,r,i){n=ve(e,t,n);var a=new DataView(t);for(e.tilesLength=a.getUint32(n,!0),n+=4,e.tiles=[];e.tiles.length<e.tilesLength&&e.byteLength-n>12;){var o={};e.tiles.push(o),n=i(t,n,r,o)}return n}(r,e,t,n,it);case j.BATCHED_3D_MODEL:return qe(r,e,t);case j.INSTANCED_3D_MODEL:return Qe(r,e,t);case j.POINT_CLOUD:return Ie(r,e,t);default:throw new Error("3DTileLoader: unknown type "+r.type)}}function at(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ot(){var e;return e=i.a.mark(function e(t,n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},0,e.next=4,nt(t,0,n,o);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}),(ot=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){at(a,r,i,o,s,"next",e)}function s(e){at(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}var st={name:"3D Tiles",extensions:["cmpt","pnts","b3dm","i3dm"],mimeType:"application/octet-stream",test:["cmpt","pnts","b3dm","i3dm"],parse:function(e,t,n,r){return ot.apply(this,arguments)},parseSync:function(e,t,n,r){var i={};return it(e,0,t,i),i},binary:!0},ut={name:"3D Tileset",extensions:["json"],testText:function(e){return e.indexOf(!1)},parseTextSync:JSON.parse},ct=(n(339),n(307),n(345));var lt=function(e){return void 0!==e},ht=(new Je.a,new h.a),ft=new h.a;new U.a;function dt(e,t,n){if(ne(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,n){var r=new h.a(e[0],e[1],e[2]),i=new Je.a(e.slice(3,e.length));if(t.transform(r,r),i=new Je.a(t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]).multiplyRight(i),lt(n))return n.center=r,n.halfAxes=i,n;return new D.d(r,i)}(e.box,t,n);if(e.region){var r=e.region,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=new h.a(Object(ct.c)((i+o)/2),Object(ct.c)((s+a)/2),(u+c)/2),f=B.a.WGS84.cartographicToCartesian(l,ft),d=B.a.WGS84.cartographicToCartesian([s,i,0]),p=B.a.WGS84.cartographicToCartesian([s,o,0]),y=B.a.WGS84.cartographicToCartesian([a,i,0]),m=8*(Math.abs(p[0]-d[0])+Math.abs(y[1]-d[1]));return pt([f[0],f[1],f[2],m],new U.a)}if(e.sphere)return pt(e.sphere,t,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function pt(e,t,n){var r=new h.a(e[0],e[1],e[2]);t.transform(r,r);var i=t.getScale(ht),a=Math.max(Math.max(i[0],i[1]),i[2]),o=e[3]*a;return lt(n)?(n.center=r,n.radius=o,n):new D.a(r,o)}var yt=n(333);function mt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function vt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){mt(a,r,i,o,s,"next",e)}function s(e){mt(a,r,i,o,s,"throw",e)}o(void 0)})}}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gt=function(e){return null!=e},bt=new Date,Tt=new h.a,wt=new D.e;var xt=function(){function e(e,t,n,r){ne("object"==typeof n),this._tileset=e,this._header=n,this.cacheNode=void 0,this._content=null,this._contentState=G.UNLOADED,this._gpuMemoryUsageInBytes=0,this.children=[],this.parent=r,this.refine=this._getRefine(n.refine),this.userData=null,"geometricError"in n?this.geometricError=n.geometricError:(this.geometricError=this.parent&&this.parent.geometricError||e._geometricError,console.warn("3D Tile: Required prop geometricError is undefined. Using parent error")),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeCache(n),this._optimChildrenWithinParent=z.NOT_COMPUTED,this._initializeRenderingState(),Object.seal(this)}var t,n,r,a=e.prototype;return a.destroy=function(){this._header=null},a.isDestroyed=function(){return null===this._header},a.getScreenSpaceError=function(e,t){var n=this._tileset,r=this.parent&&this.parent.geometricError||n._geometricError,i=t?r:this.geometricError;if(0===i)return 0;var a=Math.max(this._distanceToCamera,1e-7),o=i*e.height/(a*e.sseDenominator);return o-=this._getDynamicScreenSpaceError(a)},a._getDynamicScreenSpaceError=function(e){var t=this._tileset;if(t.dynamicScreenSpaceError&&t._dynamicScreenSpaceErrorComputedDensity){var n=t._dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor;return function(e,t){var n=e*t;return 1-Math.exp(-n*n)}(e,n)*r}return 0},a.loadContent=function(){var e=vt(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this._content){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.requestContent(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.requestContent=function(){var e=vt(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:return this.contentExpired&&(this.expireDate=void 0),e.prev=4,this._contentState=G.LOADING,n=this.uri,e.next=9,Object(yt.a)(n,this._tileset.fetchOptions);case 9:if(r=e.sent,-1===n.indexOf(".json")){e.next=17;break}return e.next=13,r.json();case 13:this._content=e.sent,this._tileset.installTileset(this._content,this.parent),e.next=23;break;case 17:return e.next=19,r.arrayBuffer();case 19:return a=e.sent,e.next=22,st.parse(a,{DracoLoader:t});case 22:this._content=e.sent;case 23:return this._contentState=G.READY,this._contentLoaded(),e.abrupt("return",!0);case 28:return e.prev=28,e.t0=e.catch(4),this._contentState=G.FAILED,this.tileset.onTileLoadFailed({tile:this,url:this.url,message:e.t0.message||e.t0.toString()}),e.abrupt("return",!1);case 33:case"end":return e.stop()}},e,this,[[4,28]])}));return function(t){return e.apply(this,arguments)}}(),a.unloadContent=function(){this.hasRenderContent&&(this._content&&this._content.destroy&&this._content.destroy(),this._content=null,this._contentState=G.UNLOADED)},a.updateVisibility=function(e){var t=this._tileset;if(this._updatedVisibilityFrame!==t._updatedVisibilityFrame){var n=this.parent,r=gt(n)?n.computedTransform:this._tileset.modelMatrix,i=gt(n)?n._visibilityPlaneMask:D.b.MASK_INDETERMINATE;this._updateTransform(r),this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,i),this._visible=this._visibilityPlaneMask!==D.b.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._updatedVisibilityFrame=t._updatedVisibilityFrame}},a.updateExpiration=function(){if(gt(this.expireDate)&&this.contentReady&&!this.hasEmptyContent){var e=Date.now(bt);Date.lessThan(this.expireDate,e)&&(this._contentState=G.EXPIRED,this._expiredContent=this._content)}},a.visibility=function(e,t){var n=e.cullingVolume,r=this.boundingVolume,i=this.tileset,a=i.clippingPlanes,o=i.clippingPlanesOriginMatrix;if(gt(a)&&a.enabled){var s=a.computeIntersectionWithBoundingVolume(r,o);if(this._isClipped=s!==D.c.INSIDE,s===D.c.OUTSIDE)return D.b.MASK_OUTSIDE}return function(e,t,n){if(ne(t,"boundingVolume is required."),ne(Number.isFinite(n),"parentPlaneMask is required."),n===D.b.MASK_OUTSIDE||n===D.b.MASK_INSIDE)return n;for(var r=D.b.MASK_INSIDE,i=e.planes,a=0;a<e.planes.length;++a){var o=a<31?1<<a:0;if(!(a<31&&0==(n&o))){var s=wt.fromNormalDistance(i[a].normal,i[a].distance),u=t.intersectPlane(s);if(u===D.c.OUTSIDE)return D.b.MASK_OUTSIDE;u===D.c.INTERSECTING&&(r|=o)}}return r}(n,r,t)},a.contentVisibility=function(e){return!0},a.distanceToTile=function(e){var t=this._boundingVolume;return Math.sqrt(t.distanceSquaredTo(e.camera.position))},a.cameraSpaceZDepth=function(e){var t=e.camera,n=this.boundingVolume;return Tt.subVectors(n.center,t.position),t.direction.dot(Tt)},a.insideViewerRequestVolume=function(e){var t=this._viewerRequestVolume;return!t||0===t.distanceToCamera(e)},a._initializeCache=function(e){this.cacheNode=void 0;var t,n,r=e.expire;gt(r)&&(t=r.duration,gt(r.date)&&(n=Date.fromIso8601(r.date))),this.expireDuration=t,this.expireDate=n},a._initializeTransforms=function(e){this.transform=e.transform?new U.a(e.transform):new U.a;var t=this.parent,n=this._tileset,r=t&&t.computedTransform?t.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new U.a(r).multiplyRight(this.transform);var i=t&&t._initialTransform?t._initialTransform.clone():new U.a;this._initialTransform=new U.a(i).multiplyRight(this.transform)},a._initializeBoundingVolumes=function(e){this._boundingVolume=dt(e.boundingVolume,this.computedTransform),this._contentBoundingVolume=null,this._viewerRequestVolume=null,e.content&&e.content.boundingVolume&&(this._contentBoundingVolume=dt(e.boundingVolume,this.computedTransform)),e.viewerRequestVolume&&(this._viewerRequestVolume=dt(e.viewerRequestVolume,this.computedTransform))},a._initializeContent=function(e){this._content={_tileset:this._tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=G.UNLOADED,this._expiredContent=void 0,this._serverKey=null,this.hasTilesetContent=!1,e.content&&(this.contentUri=e.content.uri||e.content.url,"url"in e&&(console.warn('Tileset 3D: "content.url" property deprecated. Use "content.uri" instead.'),this.contentUri=e.url),this._content=null,this.hasEmptyContent=!1,this.contentState=G.UNLOADED)},a._initializeRenderingState=function(){this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=D.b.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._priority=0},a._getRefine=function(e){switch(e){case"REPLACE":case"replace":return q;case"ADD":case"add":return H;default:return this.parent?this.parent.refine:q}},a._isTileset=function(e){return gt(e.asset)},a._contentLoaded=function(){switch(this._content.type){case"vctr":case"geom":tileset._disableSkipLevelOfDetail=!0}this._isTileset(this._content)?this.hasTilesetContent=!0:this._updateGPUMemoryUsageInBytes()},a._updateGPUMemoryUsageInBytes=function(){this._gpuMemoryUsageInBytes=this._content.byteLength},a._updateTransform=function(e){void 0===e&&(e=new U.a);var t=e.clone().multiplyRight(this.transform);if(!t.equals(this.computedTransform)){this.computedTransform=t;var n=this._header,r=this._header.content;this._boundingVolume=dt(n.boundingVolume,this.computedTransform,this._boundingVolume),this._contentBoundingVolume&&(this._contentBoundingVolume=dt(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),this._viewerRequestVolume&&(this._viewerRequestVolume=dt(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume))}},t=e,(n=[{key:"gpuMemoryUsageInBytes",get:function(){return this._gpuMemoryUsageInBytes}},{key:"tileset",get:function(){return this._tileset}},{key:"depth",get:function(){return this._depth}},{key:"selectedFrame",get:function(){return this._selectedFrame}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"content",get:function(){return this._content}},{key:"contentReady",get:function(){return this._contentState===G.READY}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"contentAvailable",get:function(){return this.contentReady&&this.hasRenderContent||gt(this._expiredContent)&&!this.contentFailed}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this._contentState===G.UNLOADED}},{key:"contentExpired",get:function(){return this._contentState===G.EXPIRED}},{key:"contentFailed",get:function(){return this._contentState===G.FAILED}},{key:"url",get:function(){return this.tileset.getTileUrl(this.contentUri)}},{key:"uri",get:function(){return this.tileset.getTileUrl(this.contentUri)}},{key:"boundingVolume",get:function(){return this._boundingVolume}},{key:"contentBoundingVolume",get:function(){return this._contentBoundingVolume||this._boundingVolume}},{key:"boundingSphere",get:function(){return this._boundingVolume.boundingSphere}},{key:"extras",get:function(){return this._header.extras}}])&&_t(t.prototype,n),r&&_t(t,r),e}();function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var St=function(){function e(e){void 0===e&&(e=0),this._array=new Array(e),this._length=e}var t,n,r,i=e.prototype;return i.get=function(e){return ne(e<this._array.length),this._array[e]},i.set=function(e,t){ne(e>=0),e>=this.length&&(this.length=e+1),this._array[e]=t},i.peek=function(){return this._array[this._length-1]},i.push=function(e){var t=this.length++;this._array[t]=e},i.pop=function(){return this._array[--this.length]},i.reserve=function(e){ne(e>=0),e>this._array.length&&(this._array.length=e)},i.resize=function(e){ne(e>=0),this.length=e},i.trim=function(e){void 0===e&&(e=this.length),this._array.length=e},t=e,(n=[{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}}])&&Et(t.prototype,n),r&&Et(t,r),e}(),Ot=function(){function e(){this.traversal={stack:new St,stackMaximumLength:0},this.emptyTraversal={stack:new St,stackMaximumLength:0}}var t=e.prototype;return t.traverse=function(e,t){e._requestedTiles.length=0,e.selectedTiles.length=0,e._emptyTiles.length=0,e._selectedTilesToStyle.length=0,e._hasMixedContent=!1;var n=e.root;if(this.updateTile(e,n,t),!n.isVisibleAndInRequestVolume)return!1;if(n.getScreenSpaceError(t,!0)<=e.maximumScreenSpaceError)return!1;var r=e.maximumScreenSpaceError;return this.executeTraversal(e,r,t),this.traversal.stack.trim(this.traversal.stackMaximumLength),this.emptyTraversal.stack.trim(this.emptyTraversal.stackMaximumLength),!0},t.selectTile=function(e,t,n){t._selectedFrame=n.frameNumber,e.selectedTiles.push(t)},t.selectDesiredTile=function(e,t,n){if(e._skipLevelOfDetail){var r=t.contentAvailable?t:t._ancestorWithContentAvailable;r?r._shouldSelect=!0:this.selectDescendants(e,t,n)}else t.contentAvailable&&this.selectTile(e,t,n)},t.visitTile=function(e,t,n){++e._statistics.visited,t._visitedFrame=n.frameNumber},t.touchTile=function(e,t,n){e._cache.touch(t),t._touchedFrame=n.frameNumber},t.getPriority=function(e,t){switch(t.refine){case H:return t._distanceToCamera;case q:var n=t.parent,r=n&&(!e._skipLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-r;default:return ne(!1)}},t.loadTile=function(e,t,n){(t.hasUnloadedContent||t.contentExpired)&&(t._requestedFrame=n.frameNumber,t._priority=this.getPriority(e,t),e._requestedTiles.push(t))},t.updateTileVisibility=function(e,t,n){t.updateVisibility(n)},t.updateTile=function(e,t,n){this.updateTileVisibility(e,t,n),t.updateExpiration()},t.updateAndPushChildren=function(e,t,n,r){var i=t.children,a=Array.isArray(i),o=0;for(i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var u=s;this.updateTile(e,u,r),n.push(u)}return!0},t.canTraverse=function(e,t){return!(0===t.children.length||e.depthLimit<t.depth)&&(t.hasTilesetContent?!t.contentExpired:t._screenSpaceError>e.maximumScreenSpaceError)},t.executeTraversal=function(e,t,n){var r=this.traversal,i=r.stack;for(i.push(e.root);i.length>0;){r.stackMaximumLength=Math.max(r.stackMaximumLength,i.length);var a=i.pop(),o=a.refine===H,s=a.refine===q,u=a.parent,c=!u||u._refines,l=!1;this.canTraverse(e,a)&&(l=this.updateAndPushChildren(e,a,i,n)&&c);var h=!l&&c;a.hasRenderContent?o?(this.loadTile(e,a,n),this.selectDesiredTile(e,a,n)):s&&(this.loadTile(e,a,n),h&&this.selectDesiredTile(e,a,n)):(e._emptyTiles.push(a),this.loadTile(e,a,n),h&&this.selectDesiredTile(e,a,n)),this.touchTile(e,a,n),a._refines=l}},e}(),It=function(e,t,n){this.item=e,this.previous=t,this.next=n};function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kt=function(e){return void 0!==e},Lt=function(){function e(){this.head=void 0,this.tail=void 0,this._length=0}var t,n,r,i=e.prototype;return i.add=function(e){var t=new It(e,this.tail,void 0);return kt(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},i.remove=function(e){kt(e)&&(kt(e.previous)&&kt(e.next)?(e.previous.next=e.next,e.next.previous=e.previous):kt(e.previous)?(e.previous.next=void 0,this.tail=e.previous):kt(e.next)?(e.next.previous=void 0,this.head=e.next):(this.head=void 0,this.tail=void 0),e.next=void 0,e.previous=void 0,--this._length)},i.splice=function(e,t){if(e!==t){this.remove(t);var n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e}},t=e,(n=[{key:"length",get:function(){return this._length}}])&&At(t.prototype,n),r&&At(t,r),e}(),Pt=function(e){return void 0!==e},Nt=function(){function e(){this._list=new Lt,this._sentinel=this._list.add(),this._trimTiles=!1}var t=e.prototype;return t.reset=function(){this._list.splice(this._list.tail,this._sentinel)},t.touch=function(e){var t=e.cacheNode;Pt(t)&&this._list.splice(this._sentinel,t)},t.add=function(e){Pt(e.cacheNode)||(e.cacheNode=this._list.add(e),e.tileset.incrementGPUMemoryUsage(e.gpuMemoryUsageInBytes))},t.unloadTile=function(e,t,n){var r=t.cacheNode;Pt(r)&&(this._list.remove(r),t.cacheNode=void 0,e.decrementGPUMemoryUsage(t.gpuMemoryUsageInBytes),t.unloadContent(),n&&n(e,t))},t.unloadTiles=function(e,t){var n=this._trimTiles;this._trimTiles=!1;for(var r=this._list,i=1024*e.maximumMemoryUsage*1024,a=this._sentinel,o=r.head;o!==a&&(e.gpuMemoryUsageInBytes>i||n);){var s=o.item;o=o.next,this.unloadTile(e,s,t)}},t.trim=function(){this._trimTiles=!0},e}();function Ct(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dt=6378137,Bt=6378137,Mt=6356752.314245179;var Rt={basePath:"",ellipsoid:B.a.WGS84,cullWithChildrenBounds:!0,maximumScreenSpaceError:16,maximumMemoryUsage:512,modelMatrix:new U.a,dynamicScreenSpaceError:!1,dynamicScreenSpaceErrorDensity:.00278,dynamicScreenSpaceErrorFactor:4,dynamicScreenSpaceErrorHeightFalloff:.25,skipLevelOfDetail:!1,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,onLoadProgress:function(){},onAllTilesLoaded:function(){},initialTilesLoaded:function(){},onTileLoad:function(){},onTileUnload:function(){},onTileLoadFailed:function(e){e.tile;var t=e.message,n=e.url;console.error("A 3D tile failed to load: "+n+" "+t)},onTileVisible:function(){}};var Ft=function(){function e(e,t,n){void 0===n&&(n={});var r=(n=Object.assign({},Rt,{},n)).cullWithChildrenBounds;ne(e),this._url=t,this._basePath=function(e){var t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""}(t),this._root=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._traverser=new Ot,this._cache=new Nt,this._processingQueue=[],this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._extras=void 0,this._credits=void 0,this.DracoLoader=n.DracoLoader,this.fetchOptions=n.fetchOptions,this._cullWithChildrenBounds=r,this._allTilesAdditive=!0,this._hasMixedContent=!1,this._maximumScreenSpaceError=n.maximumScreenSpaceError,this._maximumMemoryUsage=n.maximumMemoryUsage,this._modelMatrix=n.modelMatrix,this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._readyPromise=Promise.resolve(),this._classificationType=n.classificationType,this._ellipsoid=n.ellipsoid,this._dynamicScreenSpaceErrorComputedDensity=0,this.onLoadProgress=n.onLoadProgress,this.onAllTilesLoaded=n.onAllTilesLoaded,this.initialTilesLoaded=n.initialTilesLoaded,this.onTileLoad=n.onTileLoad,this.onTileUnload=n.onTileUnload,this.onTileLoadFailed=n.onTileLoadFailed,this.onTileVisible=n.onTileVisible,this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this._gpuMemoryUsageInBytes=0,this._initializeTileSet(e,n),this.props={},Object.assign(this.props,n)}var t,n,r,a=e.prototype;return a.destroy=function(){var e=[];for(this._root&&e.push(this._root);e.length>0;){var t=o.children,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i;e.push(a)}var o=e.pop();o.destroy()}this._root=null},a.getTileUrl=function(e){return e.startsWith("data:")?e:this.basePath+"/"+e+this.queryParams},a.hasExtension=function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)},a.update=function(e){this._updatedVisibilityFrame++,this._cache.reset(),this._traverser.traverse(this,e);var t=this._requestedTiles,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i;this._loadTile(a)}this._cache.unloadTiles(this)},a.trimLoadedTiles=function(){this._cache.trim()},a.addTileToCache=function(e){this._cache.add(e)},a._initializeTileSet=function(e,t){this._root=this._installTileset(e,null);var n=e.asset;this._asset=n,this._properties=e.properties,this._geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this._extras=e.extras,this._credits={}},a._installTileset=function(e,t){var n=e.asset;if(!n)throw new Error("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");this._queryParams={},"tilesetVersion"in n&&(this._queryParams.v=n.tilesetVersion);var r=new xt(this,null,e.root,t);t&&(t.children.push(r),r._depth=t._depth+1);var i=[];for(i.push(r);i.length>0;){var a=i.pop(),o=a._header.children||[],s=Array.isArray(o),u=0;for(o=s?o:o[Symbol.iterator]();;){var c;if(s){if(u>=o.length)break;c=o[u++]}else{if((u=o.next()).done)break;c=u.value}var l=new xt(this,null,c,a);a.children.push(l),l._depth=a._depth+1,i.push(l)}}return r},a._loadTile=function(){var e,t=(e=i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contentExpired,e.next=3,t.requestContent(this.DracoLoader);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:n&&t.hasTilesetContent&&this._destroySubtree(t);try{this.onTileLoad(t)}catch(r){this.onTileLoadFailed({tile:t,url:t.url,message:r.message||r.toString()})}case 8:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Ct(a,r,i,o,s,"next",e)}function s(e){Ct(a,r,i,o,s,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}(),a._unloadTile=function(e){this.onTileUnload(e),e.unloadContent()},a._unloadTiles=function(){var e=this;this._cache.unloadTiles(this,function(t){return e._unloadTile(t)})},a._getCartographicCenterAndZoom=function(e){var t=this._root,n=t.boundingVolume.center;return n?((e=e||new h.a).copy(n),B.a.WGS84.cartesianToCartographic(e,e),e[2]=function(e){var t=e.halfAxes,n=e.radius,r=e.width,i=e.height;if(t){var a=t[0],o=t[4],s=t[8];return(Math.log2(Dt/a/2)+Math.log2(Bt/o/2)+Math.log2(Mt/s/2))/3}return n?Math.log2(Mt/n):i&&r?(Math.log2(Dt/r)+Math.log2(Bt/i))/2:18}(t.boundingVolume),e):(console.warn("center was not pre-calculated for the root tile"),e)},a.decrementGPUMemoryUsage=function(e){this._gpuMemoryUsageInBytes-=e},a.incrementGPUMemoryUsage=function(e){this._gpuMemoryUsageInBytes+=e},a._destroySubtree=function(e){var t=e,n=[];for(n.push(t);n.length>0;){var r=(e=n.pop()).children,i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var s=o;n.push(s)}e!==t&&this._destroyTile(e)}t.children=[]},a._destroyTile=function(e){this._cache.unloadTile(this,e),this.onTileUnload(e),e.unloadContent(),e.destroy()},t=e,(n=[{key:"asset",get:function(){return this._asset}},{key:"properties",get:function(){return this._properties}},{key:"ready",get:function(){return Boolean(this._root)}},{key:"readyPromise",get:function(){return this._readyPromise.promise}},{key:"tilesLoaded",get:function(){return this._tilesLoaded}},{key:"url",get:function(){return this._url}},{key:"basePath",get:function(){return this._basePath}},{key:"queryParams",get:function(){for(var e=[],t=0,n=Object.keys(this._queryParams);t<n.length;t++){var r=n[t];e.push(r+"="+this._queryParams[r])}return e.length?"?"+e.join("&"):""}},{key:"maximumScreenSpaceError",get:function(){return this._maximumScreenSpaceError},set:function(e){ne(e>=0),this._maximumScreenSpaceError=e}},{key:"maximumMemoryUsage",get:function(){return this._maximumMemoryUsage},set:function(e){ne(e>0),this._maximumMemoryUsage=e}},{key:"root",get:function(){return this._root}},{key:"boundingSphere",get:function(){return this._checkReady(),this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},{key:"modelMatrix",get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=new U.a(e)}},{key:"timeSinceLoad",get:function(){return this._timeSinceLoad}},{key:"gpuMemoryUsageInBytes",get:function(){return this._gpuMemoryUsageInBytes}},{key:"ellipsoid",get:function(){return this._ellipsoid}},{key:"extras",get:function(){return this._extras}}])&&Ut(t.prototype,n),r&&Ut(t,r),e}(),Vt=n(358);function jt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Gt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){jt(a,r,i,o,s,"next",e)}function s(e){jt(a,r,i,o,s,"throw",e)}o(void 0)})}}var zt="https://api.cesium.com/v1/assets";function Ht(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Gt(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,h,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=19;break}return e.next=3,Jt(t);case 3:r=e.sent,a=r.items,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();case 5:if(!o){e.next=11;break}if(!(s>=a.length)){e.next=8;break}return e.abrupt("break",19);case 8:u=a[s++],e.next=15;break;case 11:if(!(s=a.next()).done){e.next=14;break}return e.abrupt("break",19);case 14:u=s.value;case 15:"3DTILES"===(c=u).type&&(n=c.id);case 17:e.next=5;break;case 19:return e.next=21,Yt(t,n);case 21:return l=e.sent,h=l.type,f=l.url,ne("3DTILES"===h&&f),l.headers={Authorization:"Bearer "+l.accessToken},e.abrupt("return",l);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Gt(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(t),n=zt,r={Authorization:"Bearer "+t},e.next=5,fetch(n,{headers:r});case 5:if((a=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,Object(Vt.a)(a);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.next=14,a.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=Gt(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(t,n),r=zt+"/"+n+"/endpoint",a={Authorization:"Bearer "+t},e.next=5,fetch(r,{headers:a});case 5:if((o=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,Object(Vt.a)(o);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.next=14,o.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Qt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Kt(a,r,i,o,s,"next",e)}function s(e){Kt(a,r,i,o,s,"throw",e)}o(void 0)})}}Object(F.b)([st,ut,R.a]);var Xt=new D.e,$t=new h.a,en=new D.b([new D.e,new D.e,new D.e,new D.e,new D.e,new D.e]);function tn(e,t){var n=t.height,r=t.tick,i=e.cameraDirection,a=e.cameraUp,o=e.distanceScales.metersPerPixel,s=[e.longitude,e.latitude,0],u=B.a.WGS84.cartographicToCartesian(s,new h.a),c=B.a.WGS84.eastNorthUpToFixedFrame(u),l=e.unprojectPosition(e.cameraPosition),f=B.a.WGS84.cartographicToCartesian(l,new h.a),d=new h.a(c.transformAsVector(new h.a(i).scale(o))).normalize(),p=new h.a(c.transformAsVector(new h.a(a).scale(o))).normalize();return function(e){var t=[e.longitude,e.latitude,0],n=B.a.WGS84.cartographicToCartesian(t,new h.a),r=e.getFrustumPlanes(),i=0;for(var a in r){var o=r[a],s=o.normal.dot(e.center),u=o.normal.len();$t.copy(o.normal).scale((o.distance-s)/(u*u)).add(e.center);var c=e.unprojectPosition($t),l=B.a.WGS84.cartographicToCartesian(c,new h.a);Xt.normal.copy(l).subtract(n).scale(-1).normalize(),Xt.distance=Math.abs(Xt.normal.dot(l)),en.planes[i].normal.copy(Xt.normal),en.planes[i].distance=Xt.distance,i+=1}}(e),{camera:{position:f,direction:d,up:p},height:n,cullingVolume:en,frameNumber:r,sseDenominator:1.15}}var nn={tilesetUrl:null,ionAssetId:null,ionAccessToken:null,color:[155,155,155,200],depthLimit:Number.MAX_SAFE_INTEGER,onTileLoaded:function(){},onTilesetLoaded:function(){}},rn=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initializeState=function(){this.state={layerMap:{},layers:[],tileset3d:null}},a._loadTileset=function(){var e=Qt(i.a.mark(function e(t,n,r){var a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!t){e.next=9;break}return e.next=4,fetch(t,n);case 4:return o=e.sent,e.next=7,o.json();case 7:s=e.sent,a=new Ft(s,t,Object.assign({onTileLoad:this.props.onTileLoaded,DracoLoader:M.a,fetchOptions:n},r));case 9:this.setState({tileset3d:a,layerMap:{},layers:[]}),a&&(a.depthLimit=this.props.depthLimit,this.props.onTilesetLoaded(a));case 11:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),a._loadTilesetFromIon=function(){var e=Qt(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t,n);case 2:return r=e.sent,a=r.url,o=r.headers,e.next=6,this._loadTileset(a,{headers:o},r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a.shouldUpdateState=function(e){return e.changeFlags.somethingChanged},a.updateState=function(){var e=Qt(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=t.oldProps,!n.tilesetUrl||n.tilesetUrl===r.tilesetUrl){e.next=6;break}return e.next=4,this._loadTileset(n.tilesetUrl);case 4:e.next=9;break;case 6:if(!n.ionAccessToken&&!n.ionAssetId||n.ionAccessToken===r.ionAccessToken&&n.ionAssetId===r.ionAssetId){e.next=9;break}return e.next=9,this._loadTilesetFromIon(n.ionAccessToken,n.ionAssetId);case 9:a=this.state.tileset3d,this._updateTileset(a);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._updateTileset=function(e){var t=this.context,n=t.animationProps,r=t.viewport;if(n&&r&&e){var i=tn(r,n);e.update(i,M.a),this._updateLayers(),this._selectLayers(i)}},a._selectLayers=function(e){for(var t=this.state.layerMap,n=e.frameNumber,r=[],i=0,a=Object.values(t);i<a.length;i++){var o=a[i],s=o.tile,u=o.layer;s.selectedFrame===n?(u&&u.props&&!u.props.visible&&(u=u.clone({visible:!0}),t[s.contentUri].layer=u),r.push(u)):s.contentUnloaded?delete t[s.contentUri]:u&&u.props&&u.props.visible&&(u=u.clone({visible:!1}),t[s.contentUri].layer=u)}this.setState({layers:r})},a._updateLayers=function(){var e=this.state,t=e.tileset3d,n=e.layerMap,r=t.selectedTiles.filter(function(e){return!(e.contentUri in n)}),i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var s=o;this._unpackTile(s);var u=this._create3DTileLayer(s);t.addTileToCache(s),n[s.contentUri]={layer:u,tile:s}}},a._unpackTile=function(e){var t=e.content;if(t)switch(t.type){case"pnts":this._unpackPointCloud3DTile(e);break;case"i3dm":this._unpackInstanced3DTile(e);break;case"b3dm":this._unpackBatched3DTile(e);break;default:throw console.warn("Error unpacking 3D tile",t.type,t),new Error("Tile3DLayer: Error unpacking 3D tile "+t.type)}},a._unpackPointCloud3DTile=function(e){var t=e.content,n=new te(t.featureTableJson,t.featureTableBinary),r=null;if(t.batchIds){var i=t.batchTableJson,a=t.batchTableBinary;r=new ye(i,a,n.getGlobalProperty("BATCH_LENGTH"))}var o=t.positions;e.userData={pointsCount:t.featureTableJson.POINTS_LENGTH,positions:o,featureTable:n,batchTable:r,transform:e._initialTransform}},a._unpackInstanced3DTile=function(e){if(e.content.gltfArrayBuffer&&(e.userData={gltfUrl:Object(V.a)(e.content.gltfArrayBuffer)}),e.content.gltfUrl){var t=e.tileset.getTileUrl(e.content.gltfUrl);e.userData={gltfUrl:t}}},a._unpackBatched3DTile=function(e){if(e.content.gltfArrayBuffer&&(e.userData={gltfUrl:Object(V.a)(e.content.gltfArrayBuffer)}),e.content.gltfUrl){var t=e.tileset.getTileUrl(e.content.gltfUrl);e.userData={gltfUrl:t}}},a._resolveTransformProps=function(e){if(!e||!e.content)return{};var t=e.content.rtcCenter,n=e.userData.transform,r=new U.a(n);t&&r.translate(t);var i=e._boundingVolume.center,a=B.a.WGS84.cartesianToCartographic(i,new h.a),o=B.a.WGS84.eastNorthUpToFixedFrame(i);return{coordinateOrigin:a,modelMatrix:r=new U.a(o.invert()).multiplyRight(r),coordinateSystem:L.a.METER_OFFSETS}},a._create3DTileLayer=function(e){if(!e.content||!e.userData)return null;var t;switch(e.content.type){case"pnts":t=this._createPointCloud3DTileLayer(e);break;case"i3dm":case"b3dm":t=this._createInstanced3DTileLayer(e)}if(!t)throw new Error("Tile3DLayer: Failed to render layer of type "+e.content.type);return t},a._createInstanced3DTileLayer=function(e){var t=e.userData.gltfUrl,n=e._content.instances,r=this._resolveTransformProps(e);return new C.a({id:"3d-model-tile-layer-"+e.contentUri,data:n||[{}],coordinateSystem:L.a.METER_OFFSETS,coordinateOrigin:r.coordinateOrigin,pickable:!0,scenegraph:t,sizeScale:1,getPosition:function(e){return[0,0,0]},getTransformMatrix:function(e){return e.modelMatrix?r.modelMatrix.clone().multiplyRight(e.modelMatrix):r.modelMatrix},getColor:function(e){return[255,255,255,100]},opacity:.6})},a._createPointCloud3DTileLayer=function(e){var t=e.content.attributes,n=t.positions,r=t.normals,i=t.colors,a=e.userData,o=a.pointsCount,s=a.colorRGBA,u=this._resolveTransformProps(e);return n&&new N.a(Object.assign({id:"3d-point-cloud-tile-layer-"+e.contentUri,data:{header:{vertexCount:o},attributes:{POSITION:n,NORMAL:r,COLOR_0:i}},getColor:s||this.props.color,pickable:!0,numInstances:o,opacity:.8,pointSize:1.5},u))},a.renderLayers=function(){return Object.values(this.state.layerMap).map(function(e){return e.layer})},r}(P.a);rn.layerName="Tile3DLayer",rn.defaultProps=nn;n(27);var an=n(441);var on=an.a.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),sn=an.a.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),un=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i._renderByCategories=function(){var e=this.props,t=e.category,n=e.name,r=e.onChange,i=e.data,a=Object.keys(i),s=t+"."+n;return o.a.createElement(sn,{value:s,onChange:function(e){var t=e.target.value.split(".");r({category:t[0],name:t[1]})}},a.map(function(e,t){var n=i[e].examples;return o.a.createElement("optgroup",{key:t,label:e},Object.keys(n).map(function(t,n){var r=e+"."+t;return o.a.createElement("option",{key:n,value:r},t)}))}))},i._renderDropped=function(){var e=this.props.droppedFile;return e?o.a.createElement("div",null,"Dropped file: ",JSON.stringify(e.name)):null},i.render=function(){return o.a.createElement(on,null,this._renderByCategories(),this._renderDropped(),this.props.children)},r}(a.PureComponent);function cn(e,t){e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length&&t(e.dataTransfer.files[0])}}un.defaultProps={droppedFile:null,onChange:function(){}};var ln=n(628),hn=n(618);function fn(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function dn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){fn(a,r,i,o,s,"next",e)}function s(e){fn(a,r,i,o,s,"throw",e)}o(void 0)})}}n.d(t,"INITIAL_VIEW_STATE",function(){return bn}),n.d(t,"default",function(){return Tn}),n.d(t,"renderToDOM",function(){return wn});var pn="https://raw.githubusercontent.com/uber-web/loaders.gl/master",yn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxN2NhMzkwYi0zNWM4LTRjNTYtYWE3Mi1jMDAxYzhlOGVmNTAiLCJpZCI6OTYxOSwic2NvcGVzIjpbImFzbCIsImFzciIsImFzdyIsImdjIl0sImlhdCI6MTU2MjE4MTMxM30.OkgVr6NaKYxabUMIGqPOYFe0V5JifXLVLfpae63x-tA",mn="additional",vn="Mount St Helens (Cesium ion)",_n=new h.a,gn={name:"additional",examples:{"Royal Exhibition Building (Github Pages)":{tilesetUrl:"https://raw.githubusercontent.com/uber-common/deck.gl-data/master/3d-tiles/RoyalExhibitionBuilding/tileset.json",depthLimit:10,color:[115,101,152,200]},"Mount St Helens (Cesium ion)":{ionAssetId:33301,ionAccessToken:yn}}},bn=Object.assign({},{latitude:40.04248558075302,longitude:-75.61213987669433},{pitch:60,bearing:0,minZoom:2,maxZoom:30,zoom:17}),Tn=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={viewState:bn,featureTable:null,batchTable:null,droppedFile:null,examplesByCategory:null,tilesetExampleProps:{},category:mn,name:vn,tileCount:0,pointCount:0},n._deckRef=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=dn(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._memWidget=(t=this._memWidgetContainer,new ln.a(hn.a.get("Memory Usage"),{framesPerUpdate:1,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"},container:t})),cn(this._deckRef.deckCanvas,function(e,t){alert("File drop of tilesets not yet implemented")}),e.next=4,this._loadExampleIndex();case 4:return e.next=6,this._loadInitialTileset();case 6:case"end":return e.stop()}var t},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadExampleIndex=function(){var e=dn(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/uber-web/loaders.gl/master/modules/3d-tiles/test/data/index.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({examplesByCategory:Object.assign({},n,{additional:gn,custom:{name:"Custom",examples:{"Custom Tileset":{},"ION Tileset":{}}}})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadInitialTileset=function(){var e=dn(i.a.mark(function e(){var t,n,r,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(window.location.href),n=t.searchParams.get("ionAssetId"),r=t.searchParams.get("ionAccessToken"),!n&&!r){e.next=8;break}return r=r||yn,e.next=7,this._loadTilesetFromIonAsset(r,n);case 7:return e.abrupt("return");case 8:if(!(a=t.searchParams.get("tileset"))){e.next=13;break}return e.next=12,this._loadTilesetFromUrl(a);case 12:return e.abrupt("return");case 13:return o=this.state,s=o.category,u=o.name,e.next=16,this._loadExampleTileset(s,u);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadExampleTileset=function(){var e=dn(i.a.mark(function e(t,n){var r,a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.state.examplesByCategory,"additional"===t?o=gn.examples[n]:(s=r[t].examples[n])&&s.tileset&&(a=pn+"/"+s.path+"/"+s.tileset,o={tilesetUrl:a,isWGS84:!0}),this.setState({tilesetExampleProps:o});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a._loadTilesetFromIonAsset=function(){var e=dn(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({tilesetExampleProps:{ionAccessToken:t,ionAssetId:n},category:"custom",name:"ION Tileset"});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a._loadTilesetFromUrl=function(){var e=dn(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({tilesetExampleProps:{tilesetUrl:t},category:"custom",name:"Custom Tileset"});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._onSelectExample=function(){var e=dn(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,r=t.name,this.setState({category:n,name:r}),e.next=4,this._loadExampleTileset(n,r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._renderControlPanel=function(){var e=this.state,t=e.examplesByCategory,n=e.category,r=e.name,i=e.viewState;return t?o.a.createElement(un,{data:t,category:n,name:r,onChange:this._onSelectExample.bind(this)},o.a.createElement("div",null,"Loaded ",0|this.state.tileCount," tiles ",(this.state.pointCount/1e6).toFixed(2)," M points"),o.a.createElement("div",null,"long/lat: ",i.longitude.toFixed(5),",",i.latitude.toFixed(5)),o.a.createElement("div",null,"zoom: ",i.zoom.toFixed(2)," ")):null},a._onTilesetLoaded=function(e){e._getCartographicCenterAndZoom(_n),this.setState({viewState:Object.assign({},this.state.viewState,{longitude:_n[0],latitude:_n[1],zoom:_n[2]})}),this.forceUpdate()},a._onTileLoaded=function(e){var t=e.content.pointsLength||0;this.setState({tileCount:this.state.tileCount+1,pointCount:this.state.pointCount+t})},a._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},a._renderLayer=function(){var e=this.state.tilesetExampleProps;if(!e)return null;var t=e.tilesetUrl,n=e.ionAssetId,r=e.ionAccessToken,i=e.coordinateOrigin,a=e.depthLimit,o=void 0===a?10:a,s=e.color;return new rn({id:"tile-3d-layer",tilesetUrl:t,ionAssetId:n,ionAccessToken:r,coordinateOrigin:i,depthLimit:o,color:void 0===s?[255,0,0,255]:s,onTileLoaded:this._onTileLoaded.bind(this),onTilesetLoaded:this._onTilesetLoaded.bind(this)})},a._renderStats=function(){var e=this;return o.a.createElement("div",{style:{position:"absolute",padding:12,zIndex:"10000",maxWidth:300,background:"#000",color:"#fff"},ref:function(t){return e._memWidgetContainer=t}})},a.render=function(){var e=this,t=this.state.viewState,n=this._renderLayer();return o.a.createElement("div",null,this._renderStats(),this._renderControlPanel(),o.a.createElement(c.a,{ref:function(t){return e._deckRef=t},layers:[n],initialViewState:bn,viewState:t,onViewStateChange:this._onViewStateChange.bind(this),controller:{type:l.a,maxPitch:85},onAfterRender:function(){return e._memWidget&&e._memWidget.update()}},o.a.createElement(u.a,{mapStyle:"mapbox://styles/mapbox/dark-v9",mapboxApiAccessToken:"pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoiY2pwY3owbGFxMDVwNTNxcXdwMms2OWtzbiJ9.1PPVl0VLUQgqrosrI2nUhg"})))},r}(a.PureComponent);function wn(e){Object(s.render)(o.a.createElement(Tn,null),e)}},358:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(138),n(139),n(39),n(4);var r=n(298),i=n.n(r);n(302);function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return s.apply(this,arguments)}function s(){var e;return e=i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource "+t.url+" ("+t.status+"): ",e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,t.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},e,null,[[1,13]])}),(s=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}).apply(this,arguments)}},485:function(e,t){},585:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i="object"!=typeof e||"[object process]"!==String(e)||e.browser,a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r},o=a.global||a.self||a.window}).call(this,n(316),n(136))},586:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return S}),n.d(t,"a",function(){return E});n(297),n(23);function r(e,t,n){return t<=e&&e<=n}e["encoding-indexes"]={};var i=Math.floor;function a(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){return 0<=e&&e<=127}var s=o,u=-1;function c(e){this.tokens=[].slice.call(e),this.tokens.reverse()}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():u},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var l=-1;function h(e,t){if(e)throw TypeError("Decoder error");return t||65533}function f(e){throw TypeError("The code point "+e+" could not be encoded.")}function d(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(y,e)?y[e]:null}var p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],y={};p.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){y[t]=e})})});var m,v,_={},g={};function b(e,t){return t&&t[e]||null}function T(e,t){var n=t.indexOf(e);return-1===n?null:n}function w(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var x="utf-8";function E(e,t){if(!(this instanceof E))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):x,t=a(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=d(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!g[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");return this._encoding=n,Boolean(t.fatal)&&(this._error_mode="fatal"),Boolean(t.ignoreBOM)&&(this._ignoreBOM=!0),Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM),this}function S(t,n){if(!(this instanceof S))throw TypeError("Called as a function. Did you forget 'new'?");n=a(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var r=d(t=void 0!==t?String(t):x);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!_[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=r}else this._encoding=d("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function O(e){var t=e.fatal,n=0,i=0,a=0,o=128,s=191;this.handler=function(e,c){if(c===u&&0!==a)return a=0,h(t);if(c===u)return l;if(0===a){if(r(c,0,127))return c;if(r(c,194,223))a=1,n=31&c;else if(r(c,224,239))224===c&&(o=160),237===c&&(s=159),a=2,n=15&c;else{if(!r(c,240,244))return h(t);240===c&&(o=144),244===c&&(s=143),a=3,n=7&c}return null}if(!r(c,o,s))return n=a=i=0,o=128,s=191,e.prepend(c),h(t);if(o=128,s=191,n=n<<6|63&c,(i+=1)!==a)return null;var f=n;return n=a=i=0,f}}function I(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var a=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);a.push(128|63&o),n-=1}return a}}function A(e,t){var n=t.fatal;this.handler=function(t,r){if(r===u)return l;if(o(r))return r;var i=e[r-128];return null===i?h(n):i}}function k(e,t){t.fatal;this.handler=function(t,n){if(n===u)return l;if(s(n))return n;var r=T(n,e);return null===r&&f(n),r+128}}function L(e){var t=e.fatal,n=0,i=0,a=0;this.handler=function(e,s){if(s===u&&0===n&&0===i&&0===a)return l;var c;if(s!==u||0===n&&0===i&&0===a||(n=0,i=0,a=0,h(t)),0!==a){c=null,r(s,48,57)&&(c=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,n=0,r=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[0]<=e))break;n=a[0],r=a[1]}return r+e-n}(10*(126*(10*(n-129)+i-48)+a-129)+s-48));var f=[i,a,s];return n=0,i=0,a=0,null===c?(e.prepend(f),h(t)):c}if(0!==i)return r(s,129,254)?(a=s,null):(e.prepend([i,s]),n=0,i=0,h(t));if(0!==n){if(r(s,48,57))return i=s,null;var d=n,p=null;n=0;var y=s<127?64:65;return(r(s,64,126)||r(s,128,254))&&(p=190*(d-129)+(s-y)),null===(c=null===p?null:b(p,w("gb18030")))&&o(s)&&e.prepend(s),null===c?h(t):c}return o(s)?s:128===s?8364:r(s,129,254)?(n=s,null):h(t)}}function P(e,t){e.fatal;this.handler=function(e,n){if(n===u)return l;if(s(n))return n;if(58853===n)return f(n);if(t&&8364===n)return 128;var r=T(n,w("gb18030"));if(null!==r){var a=r%190;return[i(r/190)+129,a+(a<63?64:65)]}if(t)return f(n);r=function(e){if(59335===e)return 7457;var t,n=0,r=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[1]<=e))break;n=a[1],r=a[0]}return r+e-n}(n);var o=i(r/10/126/10),c=i((r-=10*o*126*10)/10/126),h=i((r-=10*c*126)/10);return[o+129,c+48,h+129,r-10*h+48]}}function N(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0;var c=i<127?64:98;switch((r(i,64,126)||r(i,161,254))&&(s=157*(a-129)+(i-c)),s){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var f=null===s?null:b(s,w("big5"));return null===f&&o(i)&&e.prepend(i),null===f?h(t):f}return o(i)?i:r(i,129,254)?(n=i,null):h(t)}}function C(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n=function(e){var t=v=v||w("big5").map(function(e,t){return t<5024?null:e});return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):T(e,t)}(t);if(null===n)return f(t);var r=i(n/157)+129;if(r<161)return f(t);var a=n%157;return[r,a+(a<63?64:98)]}}function U(e){var t=e.fatal,n=!1,i=0;this.handler=function(e,a){if(a===u&&0!==i)return i=0,h(t);if(a===u&&0===i)return l;if(142===i&&r(a,161,223))return i=0,65216+a;if(143===i&&r(a,161,254))return n=!0,i=a,null;if(0!==i){var s=i;i=0;var c=null;return r(s,161,254)&&r(a,161,254)&&(c=b(94*(s-161)+(a-161),w(n?"jis0212":"jis0208"))),n=!1,r(a,161,254)||e.prepend(a),null===c?h(t):c}return o(a)?a:142===a||143===a||r(a,161,254)?(i=a,null):h(t)}}function D(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;if(165===t)return 92;if(8254===t)return 126;if(r(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var n=T(t,w("jis0208"));return null===n?f(t):[i(n/94)+161,n%94+161]}}function B(e){var t=e.fatal,n=0,i=1,a=2,o=3,s=4,c=5,f=6,d=n,p=n,y=0,m=!1;this.handler=function(e,v){switch(d){default:case n:return 27===v?(d=c,null):r(v,0,127)&&14!==v&&15!==v&&27!==v?(m=!1,v):v===u?l:(m=!1,h(t));case i:return 27===v?(d=c,null):92===v?(m=!1,165):126===v?(m=!1,8254):r(v,0,127)&&14!==v&&15!==v&&27!==v&&92!==v&&126!==v?(m=!1,v):v===u?l:(m=!1,h(t));case a:return 27===v?(d=c,null):r(v,33,95)?(m=!1,65344+v):v===u?l:(m=!1,h(t));case o:return 27===v?(d=c,null):r(v,33,126)?(m=!1,y=v,d=s,null):v===u?l:(m=!1,h(t));case s:if(27===v)return d=c,h(t);if(r(v,33,126)){d=o;var _=b(94*(y-33)+v-33,w("jis0208"));return null===_?h(t):_}return v===u?(d=o,e.prepend(v),h(t)):(d=o,h(t));case c:return 36===v||40===v?(y=v,d=f,null):(e.prepend(v),m=!1,d=p,h(t));case f:var g=y;y=0;var T=null;if(40===g&&66===v&&(T=n),40===g&&74===v&&(T=i),40===g&&73===v&&(T=a),36!==g||64!==v&&66!==v||(T=o),null!==T){d=d=T;var x=m;return m=!0,x?h(t):null}return e.prepend([g,v]),m=!1,d=p,h(t)}}}function M(e){e.fatal;var t=0,n=1,r=2,a=t;this.handler=function(e,o){if(o===u&&a!==t)return e.prepend(o),a=t,[27,40,66];if(o===u&&a===t)return l;if(!(a!==t&&a!==n||14!==o&&15!==o&&27!==o))return f(65533);if(a===t&&s(o))return o;if(a===n&&(s(o)&&92!==o&&126!==o||165==o||8254==o)){if(s(o))return o;if(165===o)return 92;if(8254===o)return 126}if(s(o)&&a!==t)return e.prepend(o),a=t,[27,40,66];if((165===o||8254===o)&&a!==n)return e.prepend(o),a=n,[27,40,74];8722===o&&(o=65293);var c=T(o,w("jis0208"));return null===c?f(o):a!==r?(e.prepend(o),a=r,[27,36,66]):[i(c/94)+33,c%94+33]}}function R(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0;var c=i<127?64:65,f=a<160?129:193;if((r(i,64,126)||r(i,128,252))&&(s=188*(a-f)+i-c),r(s,8836,10715))return 48508+s;var d=null===s?null:b(s,w("jis0208"));return null===d&&o(i)&&e.prepend(i),null===d?h(t):d}return o(i)||128===i?i:r(i,161,223)?65216+i:r(i,129,159)||r(i,224,252)?(n=i,null):h(t)}}function F(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(r(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var n=function(e){return(m=m||w("jis0208").map(function(e,t){return r(t,8272,8835)?null:e})).indexOf(e)}(t);if(null===n)return f(t);var a=i(n/188),o=n%188;return[a+(a<31?129:193),o+(o<63?64:65)]}}function V(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0,r(i,65,254)&&(s=190*(a-129)+(i-65));var c=null===s?null:b(s,w("euc-kr"));return null===s&&o(i)&&e.prepend(i),null===c?h(t):c}return o(i)?i:r(i,129,254)?(n=i,null):h(t)}}function j(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n=T(t,w("euc-kr"));return null===n?f(t):[i(n/190)+129,n%190+65]}}function G(e,t){var n=e>>8,r=255&e;return t?[n,r]:[r,n]}function z(e,t){var n=t.fatal,i=null,a=null;this.handler=function(t,o){if(o===u&&(null!==i||null!==a))return h(n);if(o===u&&null===i&&null===a)return l;if(null===i)return i=o,null;var s;if(s=e?(i<<8)+o:(o<<8)+i,i=null,null!==a){var c=a;return a=null,r(s,56320,57343)?65536+1024*(c-55296)+(s-56320):(t.prepend(G(s,e)),h(n))}return r(s,55296,56319)?(a=s,null):r(s,56320,57343)?h(n):s}}function H(e,t){t.fatal;this.handler=function(t,n){if(n===u)return l;if(r(n,0,65535))return G(n,e);var i=G(55296+(n-65536>>10),e),a=G(56320+(n-65536&1023),e);return i.concat(a)}}function q(e){e.fatal;this.handler=function(e,t){return t===u?l:o(t)?t:63360+t-128}}function J(e){e.fatal;this.handler=function(e,t){return t===u?l:s(t)?t:r(t,63360,63487)?t-63360+128:f(t)}}Object.defineProperty&&(Object.defineProperty(E.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(E.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(E.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),E.prototype.decode=function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=a(t),this._do_not_flush||(this._decoder=g[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var r,i=new c(n),o=[];;){var s=i.read();if(s===u)break;if((r=this._decoder.handler(i,s))===l)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(i,i.read()))===l)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!i.endOfStream());this._decoder=null}return function(e){var t,n;return t=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===t.indexOf(n)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(e)}.call(this,o)},Object.defineProperty&&Object.defineProperty(S.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),S.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=a(t),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new c(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var a=t.charCodeAt(r);if(a<55296||a>57343)i.push(a);else if(56320<=a&&a<=57343)i.push(65533);else if(55296<=a&&a<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var s=1023&a,u=1023&o;i.push(65536+(s<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(e)),i=[];;){var o=r.read();if(o===u)break;if((n=this._encoder.handler(r,o))===l)break;Array.isArray(n)?i.push.apply(i,n):i.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(r,r.read()))!==l;)Array.isArray(n)?i.push.apply(i,n):i.push(n);this._encoder=null}return new Uint8Array(i)},_["UTF-8"]=function(e){return new I(e)},g["UTF-8"]=function(e){return new O(e)},"encoding-indexes"in e&&p.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,n=w(t.toLowerCase());g[t]=function(e){return new A(n,e)},_[t]=function(e){return new k(n,e)}})}),g.GBK=function(e){return new L(e)},_.GBK=function(e){return new P(e,!0)},_.gb18030=function(e){return new P(e)},g.gb18030=function(e){return new L(e)},_.Big5=function(e){return new C(e)},g.Big5=function(e){return new N(e)},_["EUC-JP"]=function(e){return new D(e)},g["EUC-JP"]=function(e){return new U(e)},_["ISO-2022-JP"]=function(e){return new M(e)},g["ISO-2022-JP"]=function(e){return new B(e)},_.Shift_JIS=function(e){return new F(e)},g.Shift_JIS=function(e){return new R(e)},_["EUC-KR"]=function(e){return new j(e)},g["EUC-KR"]=function(e){return new V(e)},_["UTF-16BE"]=function(e){return new H(!0,e)},g["UTF-16BE"]=function(e){return new z(!0,e)},_["UTF-16LE"]=function(e){return new H(!1,e)},g["UTF-16LE"]=function(e){return new z(!1,e)},_["x-user-defined"]=function(e){return new J(e)},g["x-user-defined"]=function(e){return new q(e)}}).call(this,n(136))},587:function(e,t){},588:function(e,t){},589:function(e,t){},590:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return w}),n.d(t,"a",function(){return E});n(3),n(135),n(39),n(4);var r=n(298),i=n.n(r),a=(n(302),n(485)),o=n.n(a),s=n(591),u=n.n(s),c=n(592),l=n.n(c),h=n(593),f=n.n(h),d=n(594),p=n(595),y=n.n(p),m=n(596);function v(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)})}}var g={dataType:"arraybuffer"},b=function(e){return e.startsWith("data:")},T=function(e){return e.startsWith("http:")||e.startsWith("https:")};function w(e,t){return x.apply(this,arguments)}function x(){return(x=_(i.a.mark(function t(n,r){var a,s,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r={}),r=O(r),!b(n)){t.next=4;break}return t.abrupt("return",Promise.resolve(y()(n)));case 4:if(!T(n)){t.next=6;break}return t.abrupt("return",new Promise(function(e,t){r=Object.assign({},new URL(n),{},r),(n.startsWith("https:")?l.a.request:u.a.request)(n,function(n){return Object(m.concatenateReadStream)(n).then(e,t)})}));case 6:return a=n&&n.lastIndexOf("?"),n=a>=0?n.substr(0,a):n,s=f.a.promisify(o.a.readFile),t.next=11,s(n,r);case 11:return c=t.sent,t.abrupt("return",c instanceof e?Object(d.toArrayBuffer)(c):c);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function E(e,t){return S.apply(this,arguments)}function S(){return(S=_(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b(t)){e.next=2;break}return e.abrupt("return",y()(t));case 2:if(T(t)){e.next=4;break}return e.abrupt("return",o.a.createReadStream(t,n));case 4:return e.abrupt("return",new Promise(function(e,r){n=Object.assign({},new URL(t),{},n),(t.startsWith("https:")?l.a.request:u.a.request)(t,function(t){return e(t)})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return void 0===e&&(e={}),(e=Object.assign({},g,e)).responseType=e.responseType||e.dataType,o.a&&(e.encoding=e.encoding||("text"===e.dataType?"utf8":null)),e}}).call(this,n(413).Buffer)},591:function(e,t){},592:function(e,t){},593:function(e,t){},594:function(e,t){},595:function(e,t){},596:function(e,t){},597:function(e,t){},598:function(e,t){},599:function(e,t){},605:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return a});"object"!=typeof e||"[object process]"!==String(e)||e.browser;var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r},a=i.global||i.self||i.window}).call(this,n(316),n(136))},655:function(e,t,n){"use strict";n(297),n(39),n(4);var r=n(298),i=n.n(r),a=(n(302),n(605));n(500);function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}a.a._parseImageNode;function u(e,t){return c.apply(this,arguments)}function c(){return(c=s(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\.svg((\?|#).*)?$/.test(t)){e.next=10;break}return e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,a.text();case 6:o=e.sent,r="data:image/svg+xml;base64,"+btoa(o),e.next=13;break;case 10:return e.next=12,t;case 12:r=e.sent;case 13:return e.next=15,new Promise(function(e,i){try{var a=new Image;a.onload=function(){return e(a)},a.onerror=function(e){return i(new Error("Could not load image "+t+": "+e))},a.crossOrigin=n&&n.crossOrigin||"anonymous",a.src=r}catch(o){i(o)}});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"a",function(){return h});var l=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],h={extensions:l,loadAndParse:u}}}]);