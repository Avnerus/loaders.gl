(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{194:function(e,t,r){"use strict";r.r(t);r(277),r(7),r(237);var n=r(17),i=r.n(n),a=r(2),s=r.n(a),o=r(0),u=r.n(o),c=r(44),f=r(402),l=r(249),h=r(405),d=r(198),p=r(199),b=r(201),g=r(200),y=r(233),v=r(202),m=r(204),_=r(229),w=Math.PI/180,O=new Float32Array(16),T=new Float32Array(12);function x(e,t,r){var n=t[0]*w,i=t[1]*w,a=t[2]*w,s=Math.sin(a),o=Math.sin(n),u=Math.sin(i),c=Math.cos(a),f=Math.cos(n),l=Math.cos(i),h=r[0],d=r[1],p=r[2];e[0]=h*l*f,e[1]=h*u*f,e[2]=h*-o,e[3]=d*(-u*c+l*o*s),e[4]=d*(l*c+u*o*s),e[5]=d*f*s,e[6]=p*(u*s+l*o*c),e[7]=p*(-l*s+u*o*c),e[8]=p*f*c}function A(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}var E={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,stride:48,offset:0},instanceModelMatrix__LOCATION_1:{size:3,stride:48,offset:12},instanceModelMatrix__LOCATION_2:{size:3,stride:48,offset:24},instanceTranslation:{size:3,stride:48,offset:36}},update:function(e){var t=this.props,r=t.data,n=t.getOrientation,i=t.getScale,a=t.getTranslation,s=t.getTransformMatrix,o=Array.isArray(s),u=o&&16===s.length,c=Array.isArray(i),f=Array.isArray(n),h=Array.isArray(a),d=u||!o&&Boolean(s(r[0]));e.constant=d?u:f&&c&&h;var p=e.value;if(e.constant){var b;if(d)O.set(s),b=A(O);else x(b=T,n,i),b.set(a,9);e.value=new Float32Array(b)}else{var g=0,y=Object(l.g)(r),v=y.iterable,m=y.objectInfo,_=!0,w=!1,E=void 0;try{for(var S,I=v[Symbol.iterator]();!(_=(S=I.next()).done);_=!0){var j=S.value;m.index++;var k=void 0;if(d)O.set(u?s:s(j,m)),k=A(O);else x(k=T,f?n:n(j,m),c?i:i(j,m)),k.set(h?a:a(j,m),9);p[g++]=k[0],p[g++]=k[1],p[g++]=k[2],p[g++]=k[3],p[g++]=k[4],p[g++]=k[5],p[g++]=k[6],p[g++]=k[7],p[g++]=k[8],p[g++]=k[9],p[g++]=k[10],p[g++]=k[11]}}catch(C){w=!0,E=C}finally{try{_||null==I.return||I.return()}finally{if(w)throw E}}}}},S=m.w.fp64LowPart,I=[255,255,255,255],j={scenegraph:{type:"object",value:null,async:!0},fetch:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var r=t.propName,n=t.layer;return"scenegraph"===r?Object(_.a)(e,n.getLoadOptions()).then(function(e){return e.scenes[0]}):fetch(e).then(function(e){return e.json()})}),sizeScale:{type:"number",value:1,min:0},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:I},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},k=function(e){function t(){return Object(d.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,accessor:"getPosition",transition:!0},instancePositions64xy:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,accessor:"getColor",defaultValue:I,transition:!0},instanceModelMatrix:E})}},{key:"calculateInstancePositions64xyLow",value:function(e){var t=this.use64bitPositions();if(e.constant=!t,t){var r=this.props,n=r.data,i=r.getPosition,a=e.value,s=0,o=!0,u=!1,c=void 0;try{for(var f,l=n[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var h=i(f.value);a[s++]=S(h[0]),a[s++]=S(h[1])}}catch(d){u=!0,c=d}finally{try{o||null==l.return||l.return()}finally{if(u)throw c}}}else e.value=new Float32Array(2)}},{key:"updateState",value:function(e){Object(y.a)(Object(g.a)(t.prototype),"updateState",this).call(this,e);var r=e.props,n=e.oldProps;r.scenegraph!==n.scenegraph&&(r.scenegraph instanceof m.m?(this._deleteScenegraph(),this._applyAllAttributes(r.scenegraph),this.setState({scenegraph:r.scenegraph})):null!==r.scenegraph&&m.B.warn("bad scenegraph:",r.scenegraph)())}},{key:"finalizeState",value:function(){this._deleteScenegraph()}},{key:"_applyAllAttributes",value:function(e){var t=this,r=this.getAttributeManager().getAttributes();e.traverse(function(e){t._setModelAttributes(e.model,r)})}},{key:"_deleteScenegraph",value:function(){var e=this.state.scenegraph;e instanceof m.m&&e.delete()}},{key:"getLoadOptions",value:function(){return{gl:this.context.gl,waitForFullLoad:!0,modelOptions:{vs:"\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xy;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute mat3 instanceModelMatrix;\nattribute vec3 instanceTranslation;\nuniform float sizeScale;\nattribute vec4 POSITION;\n\n#ifdef HAS_UV\n  attribute vec2 TEXCOORD_0;\n  varying vec2 vTEXCOORD_0;\n#endif\nvarying vec4 vColor;\n\nvoid main(void) {\n  #ifdef HAS_UV\n    vTEXCOORD_0 = TEXCOORD_0;\n  #endif\n  vColor = instanceColors;\n\n  vec3 pos = (instanceModelMatrix * POSITION.xyz) * sizeScale + instanceTranslation;\n  pos = project_size(pos);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xy, pos, position_commonspace);\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#ifdef HAS_UV\n  varying vec2 vTEXCOORD_0;\n  uniform sampler2D u_BaseColorSampler;\n#endif\nvarying vec4 vColor;\n\nvoid main(void) {\n  #ifdef HAS_UV\n    gl_FragColor = (vColor / 255.) * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n  #else\n    gl_FragColor = vColor / 255.;\n  #endif\n\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:["project32","picking"],isInstanced:!0}}}},{key:"updateAttributes",value:function(e){var r=this;if(Object(y.a)(Object(g.a)(t.prototype),"updateAttributes",this).call(this,e),this.state.scenegraph){var n=this.getAttributeManager().getChangedAttributes({clearChangedFlags:!0});this.state.scenegraph.traverse(function(e){r._setModelAttributes(e.model,n)})}}},{key:"draw",value:function(e){var t=e.moduleParameters,r=void 0===t?null:t,n=e.parameters,i=void 0===n?{}:n;if(this.state.scenegraph){var a=this.props.sizeScale,s=this.getNumInstances();this.state.scenegraph.traverse(function(e){e.model.setInstanceCount(s),e.updateModuleSettings(r),e.draw({parameters:i,uniforms:{sizeScale:a}})})}}}]),t}(l.c);k.layerName="ScenegraphLayer",k.defaultProps=j;var C=r(388),B=r(374),N=r(375),L=r(376),P=r(377),U=r.n(P),D=r(378),R=r(379);"TextEncoder"in B.a||!N.b||(B.a.TextEncoder=N.b),"TextDecoder"in B.a||!N.a||(B.a.TextDecoder=N.a),B.b||"atob"in B.a||!L.atob||(B.a.atob=L.atob),B.b||"btoa"in B.a||!L.btoa||(B.a.btoa=L.btoa),B.b||"fetch"in B.a||!U.a||(B.a.fetch=U.a),B.b||"_encodeImageNode"in B.a||!D.encodeImageNode||(B.a._encodeImageNode=D.encodeImageNode),B.b||"_parseImageNode"in B.a||!R.parseImageNode||(B.a._parseImageNode=R.parseImageNode);var M=r(225),V=r(205),F=r.n(V),G=(r(208),r(209)),z=r.n(G),H={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"},q=(r(203),r(220)),J=r(216);function Y(e,t,r){Object(q.a)(e instanceof ArrayBuffer);var n=new J.a("utf8"),i=new Uint8Array(e,t,r);return n.decode(i)}r(245);var K,Q=r(382),W={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Z=Object.assign({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},W),X=r(313),$=(r(32),r(322),r(238),r(239),r(231),r(232),r(213),r(323),(K={})[W.DOUBLE]=Float64Array,K[W.FLOAT]=Float32Array,K[W.UNSIGNED_SHORT]=Uint16Array,K[W.UNSIGNED_INT]=Uint32Array,K[W.UNSIGNED_BYTE]=Uint8Array,K[W.BYTE]=Int8Array,K[W.SHORT]=Int16Array,K[W.INT]=Int32Array,K),ee={DOUBLE:W.DOUBLE,FLOAT:W.FLOAT,UNSIGNED_SHORT:W.UNSIGNED_SHORT,UNSIGNED_INT:W.UNSIGNED_INT,UNSIGNED_BYTE:W.UNSIGNED_BYTE,BYTE:W.BYTE,SHORT:W.SHORT,INT:W.INT},te=function(){function e(){}return e.fromTypedArray=function(e){for(var t in e=ArrayBuffer.isView(e)?e.constructor:e,$){if($[t]===e)return t}throw new Error("Failed to convert GL type")},e.fromName=function(e){var t=ee[e];if(!t)throw new Error("Failed to convert GL type");return t},e.getArrayType=function(e,t){switch(void 0===t&&(t=!1),e){case W.UNSIGNED_SHORT_5_6_5:case W.UNSIGNED_SHORT_4_4_4_4:case W.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var r=$[e];if(!r)throw new Error("Failed to convert GL type");return r}},e.getByteSize=function(t){return e.getArrayType(t).BYTES_PER_ELEMENT},e.validate=function(t){return Boolean(e.getArrayType(t))},e.createTypedArray=function(t,r,n,i){return void 0===n&&(n=0),void 0===i&&(i=(r.byteLength-n)/e.getByteSize(t)),new(e.getArrayType(t))(r,n,i)},e}(),re=function(){function e(e,t){this.json=e,this.buffer=t,this.featuresLength=0,this._cachedTypedArrays={}}var t=e.prototype;return t.getExtension=function(e){return this.json.extensions&&this.json.extensions[e]},t.hasProperty=function(e){return Boolean(this.json[e])},t.getGlobalProperty=function(e,t,r){void 0===t&&(t=Z.UNSIGNED_INT),void 0===r&&(r=1);var n=this.json[e];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(e,t,r,1,n.byteOffset):n},t.getPropertyArray=function(e,t,r){var n=this.json[e];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(t=te.fromName(n.componentType)),this._getTypedArrayFromBinary(e,t,r,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(e,t,n)},t.getProperty=function(e,t,r,n,i){var a=this.json[e];if(!a)return a;var s=this.getPropertyArray(e,t,r);if(1===r)return s[n];for(var o=0;o<r;++o)i[o]=s[r*n+o];return i},t._getTypedArrayFromBinary=function(e,t,r,n,i){var a=this._cachedTypedArrays,s=a[e];return s||(s=te.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+i,n*r),a[e]=s),s},t._getTypedArrayFromArray=function(e,t,r){var n=this._cachedTypedArrays,i=n[e];return i||(i=te.createTypedArray(t,r),n[e]=i),i},e}();r(20),r(14),r(11),r(223);function ne(e,t){if(!e)throw new Error(t||"3d-tile loader: assertion failed.")}var ie={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ae={SCALAR:function(e,t){return e[t]},VEC2:function(e,t){return[e[2*t+0],e[2*t+1]]},VEC3:function(e,t){return[e[3*t+0],e[3*t+1],e[3*t+2]]},VEC4:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT2:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT3:function(e,t){return[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]]},MAT4:function(e,t){return[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]}},se={SCALAR:function(e,t,r){t[r]=e},VEC2:function(e,t,r){t[2*r+0]=e[0],t[2*r+1]=e[1]},VEC3:function(e,t,r){t[3*r+0]=e[0],t[3*r+1]=e[1],t[3*r+2]=e[2]},VEC4:function(e,t,r){t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT2:function(e,t,r){t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT3:function(e,t,r){t[9*r+0]=e[0],t[9*r+1]=e[1],t[9*r+2]=e[2],t[9*r+3]=e[3],t[9*r+4]=e[4],t[9*r+5]=e[5],t[9*r+6]=e[6],t[9*r+7]=e[7],t[9*r+8]=e[8],t[9*r+9]=e[9]},MAT4:function(e,t,r){t[16*r+0]=e[0],t[16*r+1]=e[1],t[16*r+2]=e[2],t[16*r+3]=e[3],t[16*r+4]=e[4],t[16*r+5]=e[5],t[16*r+6]=e[6],t[16*r+7]=e[7],t[16*r+8]=e[8],t[16*r+9]=e[9],t[16*r+10]=e[10],t[16*r+11]=e[11],t[16*r+12]=e[12],t[16*r+13]=e[13],t[16*r+14]=e[14],t[16*r+15]=e[15]}};r(324);var oe=r(381),ue=r.n(oe),ce=function(e){return void 0!==e};function fe(e,t,r){if(!t)return null;var n=e.getExtension("3DTILES_batch_table_hierarchy"),i=t.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=i,n=i),n?function(e,t){var r,n,i,a,s=e.instancesLength,o=e.classes,u=e.classIds,c=e.parentCounts,f=e.parentIds,l=s;ce(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),ue()("classIds"),u=i.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,s));if(ce(c))for(ce(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),ue()("parentCounts"),c=i.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,s)),a=new Uint16Array(s),ue()("parentIdsLength"),l=0,r=0;r<s;++r)a[r]=l,l+=(ue()("parentIdsLength"),c[r]);ce(f)&&ce(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,GL.UNSIGNED_SHORT),f.type=AttributeType.SCALAR,i=getBinaryAccessor(f),ue()("parentIds"),f=i.createArrayBufferView(t.buffer,t.byteOffset+f.byteOffset,l));var h=o.length;for(r=0;r<h;++r){var d=o[r].length,p=o[r].instances,b=getBinaryProperties(d,p,t);o[r].instances=combine(b,p)}var g=new Array(h).fill(0),y=new Uint16Array(s);for(r=0;r<s;++r)n=u[r],y[r]=g[n],++g[n];var v={classes:o,classIds:u,classIndexes:y,parentCounts:c,parentIndexes:a,parentIds:f};return function(e){for(var t=e.classIds.length,r=0;r<t;++r)he(e,r,stack)}(v),v}(n,r):null}function le(e,t,r){if(e){var n=e.parentCounts;return e.parentIds?r(e,t):n>0?function(e,t,r){var n=e.classIds,i=e.parentCounts,a=e.parentIds,s=e.parentIndexes,o=n.length,u=scratchVisited;u.length=Math.max(u.length,o);var c=++marker,f=scratchStack;f.length=0,f.push(t);for(;f.length>0;)if(t=f.pop(),u[t]!==c){u[t]=c;var l=r(e,t);if(ce(l))return l;for(var h=i[t],d=s[t],p=0;p<h;++p){var b=a[d+p];b!==t&&f.push(b)}}return null}(e,t,r):function(e,t,r){var n=!0;for(;n;){var i=r(e,t);if(ce(i))return i;var a=e.parentIds[t];n=a!==t,t=a}throw new Error("traverseHierarchySingleParent")}(e,t,r)}}function he(e,t,r){var n=e.parentCounts,i=e.parentIds,a=e.parentIndexes,s=e.classIds.length;if(ce(i)){assert(t<s,"Parent index "+t+" exceeds the total number of instances: "+s),assert(-1===r.indexOf(t),"Circular dependency detected in the batch table hierarchy."),r.push(t);for(var o=ce(n)?n[t]:1,u=ce(n)?a[t]:t,c=0;c<o;++c){var f=i[u+c];f!==t&&he(e,f,r)}r.pop(t)}}var de=function(e){return void 0!==e},pe=function(e){return e},be={HIERARCHY:!0,extensions:!0,extras:!0},ge=function(){function e(e,t,r,n){for(var i in void 0===n&&(n={}),ne(r>=0),this.json=e||{},this.binary=t,this.featureCount=r,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)be[i]||(this._properties[i]=this.json[i]);this._binaryProperties=this._initializeBinaryProperties(),n["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=fe(this,this.json,this.binary))}var t=e.prototype;return t.getExtension=function(e){return this.json&&this.json.extensions&&this.json.extensions[e]},t.memorySizeInBytes=function(){return 0},t.isClass=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._hierarchy){var r=le(this._hierarchy,e,function(e,r){var n=e.classIds[r];return e.classes[n].name===t});return de(r)}return!1},t.isExactClass=function(e,t){return ne("string"==typeof t,t),this.getExactClassName(e)===t},t.getExactClassName=function(e){if(this._checkBatchId(e),this._hierarchy){var t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}},t.hasProperty=function(e,t){return this._checkBatchId(e),ne("string"==typeof t,t),de(this._properties[t])||this._hasPropertyInHierarchy(e,t)},t.getPropertyNames=function(e,t){var r;this._checkBatchId(e),(t=de(t)?t:[]).length=0;var n=Object.keys(this._properties);return(r=t).push.apply(r,n),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t},t.getProperty=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._binaryProperties){var r=this._binaryProperties[t];if(de(r))return this._getBinaryProperty(r,e)}var n=this._properties[t];if(de(n))return pe(n[e]);if(this._hierarchy){var i=this._getHierarchyProperty(e,t);if(de(i))return i}},t.setProperty=function(e,t,r){var n=this.featureCount;if(this._checkBatchId(e,n),ne("string"==typeof t,t),this._binaryProperties){var i=this._binaryProperties[t];if(i)return void this._setBinaryProperty(i,e,r)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,t,r)){var a=this._properties[t];de(a)||(this._properties[t]=new Array(n),a=this._properties[t]),a[e]=pe(r)}},t._checkBatchId=function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")},t._getBinaryProperty=function(e,t){return e.unpack(e.typedArray,t)},t._setBinaryProperty=function(e,t,r){e.pack(r,e.typedArray,t)},t._initializeBinaryProperties=function(){var e=null;for(var t in this._properties){var r=this._properties[t],n=this._initializeBinaryProperty(t,r);n&&((e=e||{})[t]=n)}return e},t._initializeBinaryProperty=function(e,t){if("byteOffset"in t){var r=t;ne(this.binary,"Property "+e+" requires a batch table binary."),ne(r.type,"Property "+e+" requires a type.");var n=function(e,t,r,n){var i=e.componentType;ne(e.componentType);var a="string"==typeof i?te.fromName(i):i,s=ie[e.type],o=ae[e.type],u=se[e.type];return r+=e.byteOffset,{values:te.createTypedArray(a,t,r,s*n),type:a,size:s,unpacker:o,packer:u}}(r,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null},t._hasPropertyInHierarchy=function(e,t){if(!this._hierarchy)return!1;var r=le(this._hierarchy,e,function(e,r){var n=e.classIds[r],i=e.classes[n].instances;return de(i[t])});return de(r)},t._getPropertyNamesInHierarchy=function(e,t){le(this._hierarchy,e,function(e,r){var n=e.classIds[r],i=e.classes[n].instances;for(var a in i)i.hasOwnProperty(a)&&-1===t.indexOf(a)&&t.push(a)})},t._getHierarchyProperty=function(e,t){var r=this;return le(this._hierarchy,e,function(e,n){var i=e.classIds[n],a=e.classes[i],s=e.classIndexes[n],o=a.instances[t];return de(o)?de(o.typedArray)?r._getBinaryProperty(o,s):pe(o[s]):null})},t._setHierarchyProperty=function(e,t,r,n){var i=this,a=le(this._hierarchy,t,function(e,a){var s=e.classIds[a],o=e.classes[s],u=e.classIndexes[a],c=o.instances[r];return!!de(c)&&(ne(a===t,'Inherited property "'+r+'" is read-only.'),de(c.typedArray)?i._setBinaryProperty(c,u,n):c[u]=pe(n),!0)});return de(a)},e}(),ye=4;function ve(e,t,r){void 0===r&&(r=0);var n=new DataView(t);if(e.magic=n.getUint32(r,!0),r+=ye,e.version=n.getUint32(r,!0),r+=ye,e.byteLength=n.getUint32(r,!0),r+=ye,1!==e.version)throw new Error("3D Tile Version "+e.version+" not supported");return r}var me=4;function _e(e,t,r){var n=new DataView(t);return e.featureTableJsonByteLength=n.getUint32(r,!0),r+=me,e.featureTableBinaryByteLength=n.getUint32(r,!0),r+=me,e.batchTableJsonByteLength=n.getUint32(r,!0),r+=me,e.batchTableBinaryByteLength=n.getUint32(r,!0),r+=me}function we(e,t,r,n){return r=function(e,t,r,n){var i=e.featureTableJsonByteLength,a=e.featureTableBinaryByteLength;if(e.featureTableJson={BATCH_LENGTH:0},i>0){var s=Y(t,r,i);e.featureTableJson=JSON.parse(s)}return r+=i,e.featureTableBinary=new Uint8Array(t,r,a),r+=a}(e,t,r),r=function(e,t,r,n){var i=e.batchTableJsonByteLength,a=e.batchTableBinaryByteLength;if(i>0){var s=Y(t,r,i);e.batchTableJson=JSON.parse(s),r+=i,a>0&&(e.batchTableBinary=new Uint8Array(t,r,a),e.batchTableBinary=new Uint8Array(e.batchTableBinary),r+=a)}return r}(e,t,r)}function Oe(e,t,r,n){return r=we(e,t,r=_e(e,t,r=ve(e,t,r))),function(e){var t=new re(e.featureTableJson,e.featureTableBinary),r=t.getGlobalProperty("POINTS_LENGTH");if(e.featuresLength=r,t.featuresLength=r,!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");e.rtcCenter=t.getGlobalProperty("RTC_CENTER",Z.FLOAT,3),e.positions=null,e.colors=null,e.normals=null,e.batchIds=null,e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1;var n=function(e,t){var r=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",Z.UNSIGNED_SHORT,1),e.batchIds)){var n=t.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=e.batchTableJson,a=e.batchTableBinary;r=new ge(i,a,n)}return r}(e,t);(function(e,t,r){var n,i,a,s=r&&r.getExtension("3DTILES_draco_point_compression");s&&(a=s.properties);var o=t.getExtension("3DTILES_draco_point_compression");if(o){i=o.properties;var u=o.byteOffset,c=o.byteLength;if(!i||!Number.isFinite(u)||!c)throw new Error("Draco properties, byteOffset, and byteLength must be defined");n=e.featureTableBinary.slice(u,u+c),e.hasPositions=Number.isFinite(i.POSITION),e.hasColors=Number.isFinite(i.RGB)||Number.isFinite(i.RGBA),e.hasNormals=Number.isFinite(i.NORMAL),e.hasBatchIds=Number.isFinite(i.BATCH_ID),e.isTranslucent=Number.isFinite(i.RGBA)}n&&(e.draco={buffer:n,properties:Object.assign({},i,a),featureTableProperties:i,batchTableProperties:a,dequantizeInShader:!1},function(e){var t=e.draco;if(t&&t.buffer){var r=(new X.a).decode(t.buffer),n=r.attributes.POSITION&&r.attributes.POSITION.value,i=r.attributes.COLOR_0&&r.attributes.COLOR_0.value,a=r.attributes.NORMAL&&r.attributes.NORMAL.value,s=r.attributes.BATCH_ID&&r.attributes.BATCH_ID.value,o=n&&r.attributes.POSITION.value.quantization,u=a&&r.attributes.NORMAL.value.quantization;if(o){var c=r.POSITION.data.quantization,f=c.range;e.quantizedVolumeScale=new Q.a(f,f,f),e.quantizedVolumeOffset=new Q.a(c.minValues),e.quantizedRange=(1<<c.quantizationBits)-1,e.isQuantizedDraco=!0}u&&(e.octEncodedRange=(1<<r.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0),e.positions=n,e.colors=i,e.normals=a,e.batchIds=s,delete e.draco}}(e))})(e,t,n),function(e,t){if(!e.positions)if(t.hasProperty("POSITION"))e.positions=t.getPropertyArray("POSITION",Z.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){if(e.positions=t.getPropertyArray("POSITION_QUANTIZED",Z.UNSIGNED_SHORT,3),e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Z.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Z.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.")}if(!e.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}(e,t),function(e,t){e.colors||(t.hasProperty("RGBA")?(e.colors=t.getPropertyArray("RGBA",Z.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?e.colors=t.getPropertyArray("RGB",Z.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(e.colors=t.getPropertyArray("RGB565",Z.UNSIGNED_SHORT,1),e.isRGB565=!0));t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",Z.UNSIGNED_BYTE,4))}(e,t),function(e,t){e.normals||(t.hasProperty("NORMAL")?e.normals=t.getPropertyArray("NORMAL",Z.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(e.normals=t.getPropertyArray("NORMAL_OCT16P",Z.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0))}(e,t)}(e),r}var Te=r(327),xe={URI:0,EMBEDDED:1};function Ae(e,t,r){var n=e.byteOffset+e.byteLength-r;if(0===n)throw new Error("glTF byte length must be greater than 0.");if(r%4==0)e.gltfArrayBuffer=t,e.gltfByteOffset=r,e.gltfByteLength=n;else{console.warn(e.type+": embedded glb is not aligned to a 4-byte boundary.");var i=new Uint8Array(t).subarray(r,r+n),a=new Uint8Array(i);e.gltfArrayBuffer=a.buffer,e.gltfByteOffset=0,e.gltfByteLength=n}return e.byteOffset+e.byteLength}function Ee(e,t,r){switch(t){case xe.URI:throw new Error("i3dm: glTF format 0 (uri) not yet implemented");case xe.EMBEDDED:e.gltf={},Object(Te.b)(e.gltf,e.gltfArrayBuffer,e.gltfByteOffset,r);break;default:throw new Error("i3dm: glTF format "+t+": Must be 0 (uri) or 1 (embedded)")}delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength}function Se(e,t,r,n){switch(void 0===t&&(t=0),void 0===r&&(r={}),void 0===n&&(n={}),n.byteOffset=t,n.type=function(e,t){void 0===t&&(t=0);var r=new DataView(e);return""+String.fromCharCode(r.getUint8(t+0))+String.fromCharCode(r.getUint8(t+1))+String.fromCharCode(r.getUint8(t+2))+String.fromCharCode(r.getUint8(t+3))}(e,t),n.type){case H.COMPOSITE:!function(e,t,r,n,i){r=ve(e,t,r);var a=new DataView(t);for(e.tilesLength=a.getUint32(r,!0),r+=4,e.tiles=[];e.tiles.length<e.tilesLength&&e.byteLength-r>12;){var s={};e.tiles.push(s),r=i(t,r,n,s)}}(n,e,t,r,Se);break;case H.BATCHED_3D_MODEL:!function(e,t,r,n){r=Ae(e,t,r=we(e,t,r=_e(e,t,r=ve(e,t,r))));var i=new re(e.featureTableJson,e.featureTableBinary);e.rtcCenter=i.getGlobalProperty("RTC_CENTER",Z.FLOAT,3),Ee(e,xe.EMBEDDED,n)}(n,e,t,r);break;case H.INSTANCED_3D_MODEL:!function(e,t,r,n){if(r=ve(e,t,r),1!==e.version)throw new Error("Instanced 3D Model version "+e.version+" is not supported");r=_e(e,t,r);var i=new DataView(t);if(e.gltfFormat=i.getUint32(r,!0),r=Ae(e,t,r=we(e,t,r+=4)),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new re(e.featureTableJson,e.featureTableBinary),s=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=a.getGlobalProperty("RTC_CENTER",Z.FLOAT,3),Ee(e,e.gltfFormat,n)}(n,e,t,r);break;case H.POINT_CLOUD:Oe(n,e,t);break;default:throw new Error("3DTileLoader: unknown type "+n.type)}return n}var Ie={name:"3D Tiles",extensions:["cmpt","pnts","b3dm","i3dm"],mimeType:"application/octet-stream",parseSync:je,parse:function(e,t,r,n){return ke.apply(this,arguments)},binary:!0};function je(e,t,r,n){return Se(e,0,t)}function ke(){return(ke=z()(F.a.mark(function e(t,r,n,i){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je(t,r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}r(31);var Ce=r(260),Be={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ne={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Le={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243};var Pe=function(){function e(){}var t=e.prototype;return t.postProcess=function(e,t){return void 0===t&&(t={}),this.gltf=e,this.json=e.json,this.buffers=e.buffers,this._resolveTree(e.json,t)},t._resolveTree=function(e,t){var r=this;return void 0===t&&(t={}),e.bufferViews&&(e.bufferViews=e.bufferViews.map(function(e,t){return r._resolveBufferView(e,t)})),e.images&&(e.images=e.images.map(function(e,n){return r._resolveImage(e,n,t)})),e.samplers&&(e.samplers=e.samplers.map(function(e,t){return r._resolveSampler(e,t)})),e.textures&&(e.textures=e.textures.map(function(e,t){return r._resolveTexture(e,t)})),e.accessors&&(e.accessors=e.accessors.map(function(e,t){return r._resolveAccessor(e,t)})),e.materials&&(e.materials=e.materials.map(function(e,t){return r._resolveMaterial(e,t)})),e.meshes&&(e.meshes=e.meshes.map(function(e,t){return r._resolveMesh(e,t)})),e.nodes&&(e.nodes=e.nodes.map(function(e,t){return r._resolveNode(e,t)})),e.skins&&(e.skins=e.skins.map(function(e,t){return r._resolveSkin(e,t)})),e.scenes&&(e.scenes=e.scenes.map(function(e,t){return r._resolveScene(e,t)})),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene]),e},t.getScene=function(e){return this._get("scenes",e)},t.getNode=function(e){return this._get("nodes",e)},t.getSkin=function(e){return this._get("skins",e)},t.getMesh=function(e){return this._get("meshes",e)},t.getMaterial=function(e){return this._get("materials",e)},t.getAccessor=function(e){return this._get("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this._get("textures",e)},t.getSampler=function(e){return this._get("samplers",e)},t.getImage=function(e){return this._get("images",e)},t.getBufferView=function(e){return this._get("bufferViews",e)},t.getBuffer=function(e){return this._get("buffers",e)},t._get=function(e,t){if("object"==typeof t)return t;var r=this.json[e]&&this.json[e][t];return r||console.warn("glTF file error: Could not find "+e+"["+t+"]"),r},t._resolveScene=function(e,t){var r=this;return(e=Object.assign({},e)).id=e.id||"scene-"+t,e.nodes=(e.nodes||[]).map(function(e){return r.getNode(e)}),e},t._resolveNode=function(e,t){var r=this;return(e=Object.assign({},e)).id=e.id||"node-"+t,e.children&&(e.children=e.children.map(function(e){return r.getNode(e)})),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e},t._resolveSkin=function(e,t){return(e=Object.assign({},e)).id=e.id||"skin-"+t,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e},t._resolveMesh=function(e,t){var r=this;return(e=Object.assign({},e)).id=e.id||"mesh-"+t,e.primitives&&(e.primitives=e.primitives.map(function(e){var t=(e=Object.assign({},e)).attributes;for(var n in e.attributes={},t)e.attributes[n]=r.getAccessor(t[n]);return void 0!==e.indices&&(e.indices=r.getAccessor(e.indices)),void 0!==e.material&&(e.material=r.getMaterial(e.material)),e})),e},t._resolveMaterial=function(e,t){if((e=Object.assign({},e)).id=e.id||"material-"+t,e.normalTexture&&(e.normalTexture=Object.assign({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=Object.assign({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=Object.assign({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){e.pbrMetallicRoughness=Object.assign({},e.pbrMetallicRoughness);var r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=Object.assign({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=Object.assign({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e},t._resolveAccessor=function(e,t){var r,n;return(e=Object.assign({},e)).id=e.id||"accessor-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(r=e.componentType,Ne[r]),e.components=(n=e.type,Be[n]),e.bytesPerElement=e.bytesPerComponent*e.components,e},t._resolveTexture=function(e,t){return(e=Object.assign({},e)).id=e.id||"texture-"+t,e.sampler=this.getSampler(e.sampler),e.source=this.getImage(e.source),e},t._resolveSampler=function(e,t){for(var r in(e=Object.assign({},e)).id=e.id||"sampler-"+t,e.parameters={},e){var n=this._enumSamplerParameter(r);void 0!==n&&(e.parameters[n]=e[r])}return e},t._enumSamplerParameter=function(e){return Le[e]},t._resolveImage=function(e,t,r){if((e=Object.assign({},e)).id=e.id||"image-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),"uri"in e){var n=r.uri||this.gltf.baseUri;n&&(e.baseUri=n,e.fullUri=Object(Ce.a)(e.uri,n))}return e.getImageAsync=function(){return e.uri?new Promise(function(t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.src=e.fullUri||e.uri}):null},e},t._resolveBufferView=function(e,t){(e=Object.assign({},e)).id=e.id||"bufferView-"+t;var r=e.buffer;e.buffer=this.getBuffer(r);var n=this.buffers[r].arrayBuffer,i=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(i+=e.byteOffset),e.data=new Uint8Array(n,i,e.byteLength),e},t._resolveCamera=function(e,t){return e.id=e.id||"camera-"+t,e.perspective,e.orthographic,e},e}();r(79);var Ue=r(9),De=Ue.a.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),Re=Ue.a.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),Me=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var r=t.prototype;return r._renderByCategories=function(){var e=this.props,t=e.category,r=e.example,n=e.onChange,i=e.data,a=void 0===i?{}:i,s=Object.keys(a),o=t+"."+r;return u.a.createElement(Re,{value:o,onChange:function(e){var t=e.target.value.split(".");n({category:t[0],example:t[1]})}},s.map(function(e,t){var r=a[e].examples;return u.a.createElement("optgroup",{key:t,label:e},Object.keys(r).map(function(t,r){var n=e+"."+t;return u.a.createElement("option",{key:r,value:n},t)}))}))},r._renderDropped=function(){var e=this.props.droppedFile;return e?u.a.createElement("div",null,"Dropped file: ",JSON.stringify(e.name)):null},r.render=function(){return u.a.createElement(De,null,this._renderByCategories(),this._renderDropped())},t}(o.PureComponent);r.d(t,"default",function(){return ze}),r.d(t,"renderToDOM",function(){return He}),Object(M.b)(Ie);var Ve="https://raw.githubusercontent.com/uber-web/loaders.gl/master",Fe={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:-10,maxZoom:10,zoom:1},Ge=new l.d(["rotationOrbit"]);var ze=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={viewState:Fe,featureTable:null,batchTable:null,tile:null,droppedFile:null,example:"PointCloudNormals",category:"PointCloud"},r._deckRef=null,r._onLoad=r._onLoad.bind(i()(r)),r._onViewStateChange=r._onViewStateChange.bind(i()(r)),r._rotateCamera=r._rotateCamera.bind(i()(r)),r._getColor=r._getColor.bind(i()(r)),r._loadExample=r._loadExample.bind(i()(r)),r._onSelectExample=r._onSelectExample.bind(i()(r)),r}s()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e,t,r=this;e=this._deckRef.deckCanvas,t=function(e,t){r.setState({droppedFile:t,tile:null}),Object(_.a)(e,Ie).then(r._onLoad)},e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){if(e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length){var r=e.dataTransfer.files[0],n=new Promise(function(e){var t=new window.FileReader;t.onload=function(t){return e(t.target.result)},t.readAsArrayBuffer(r)});t(n,r)}},fetch("https://raw.githubusercontent.com/uber-web/loaders.gl/master/modules/3d-tiles/test/data/index.json").then(function(e){return e.json()}).then(function(e){r.setState({data:e});var t=r.state,n=t.category,i=t.example;r._loadExample(n,i)})},r._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},r._rotateCamera=function(){var e=this.state.viewState;this.setState({viewState:Object.assign({},e,{rotationOrbit:e.rotationOrbit+30,transitionDuration:600,transitionInterpolator:Ge,onTransitionEnd:this._rotateCamera})})},r._loadExample=function(e,t){var r=this.state.data;if(this.setState({tile:null}),r&&e&&t){var n=r[e].examples[t],i=Ve+"/"+n.path+"/"+n.files[0];Object(_.a)(i).then(this._onLoad)}},r._onLoad=function(e){switch(e.type){case"pnts":this._unpackPointCloud3DTile(e);break;case"i3dm":case"b3dm":this._unpackInstanced3DTile(e);break;default:console.error("Error unpacking",e.type,e)}this.setState({tile:e})},r._unpackInstanced3DTile=function(e){var t,r,n=this._deckRef.deck.animationLoop.gl,i=(t=e.gltf,(new Pe).postProcess(t,r)),a=Object(C.a)(n,i);this.setState({scenegraph:a})},r._unpackPointCloud3DTile=function(e){var t=new re(e.featureTableJson,e.featureTableBinary),r=null;if(e.batchIds){var n=e.batchTableJson,i=e.batchTableBinary;r=new ge(n,i,t.getGlobalProperty("BATCH_LENGTH"))}var a=function(e,t){void 0===t&&(t=3);for(var r=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],n=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],i=e.length/t,a=0;a<i;a++)r[0]=Math.min(r[0],e[a*t]),r[1]=Math.min(r[1],e[a*t+1]),r[2]=Math.min(r[2],e[a*t+2]),n[0]=Math.max(n[0],e[a*t]),n[1]=Math.max(n[1],e[a*t+1]),n[2]=Math.max(n[2],e[a*t+2]);return{mins:r,maxs:n}}(e.positions),s=a.mins,o=a.maxs,u=this.state.viewState;s&&o&&(u=Object.assign({},u,{target:[(s[0]+o[0])/2,(s[1]+o[1])/2,(s[2]+o[2])/2],zoom:Math.log2(window.innerWidth/(o[0]-s[0]))-1.5})),e.pointsCount=e.featureTableJson.POINTS_LENGTH,this.setState({featureTable:t,batchTable:r,viewState:u},this._rotateCamera)},r._getColor=function(e,t){var r=t.index,n=t.data,i=t.target;if(!this.state.tile)return null;var a,s,o,u,c=this.state,f=c.tile,l=f.colors,h=f.isRGB565,d=f.constantRGBA,p=f.batchIds,b=c.batchTable;if(l){if(h){var g=(a=n.colors.value[r],s=31&a,o=a>>5&63,u=a>>11&31,[s=Math.round(255*s/32),o=Math.round(255*o/64),u=Math.round(255*u/32)]);i[0]=g[0],i[1]=g[1],i[2]=g[2],i[3]=255}else i[0]=n.colors.value[3*r],i[1]=n.colors.value[3*r+1],i[2]=n.colors.value[3*r+2],i[3]=4===n.colors.size?n.colors[3*r+4]:255;return i}if(d)return d;if(p&&b){var y=p[r],v=b.getProperty(y,"dimensions").map(function(e){return 255*e});return[].concat(v,[255])}return[255,255,255]},r._renderPointCloud3DTile=function(){var e=this.state.tile,t=e.pointsCount,r=e.positions,n=e.colors,i=e.normals;return r&&new h.a({id:"3d-point-cloud-tile-layer",data:{colors:{value:n,size:4},normals:{value:r,size:3},length:r.length/3},coordinateSystem:l.a.IDENTITY,numInstances:t,instancePositions:r,getColor:this._getColor,getNormal:i?function(e,t){var r=t.index,n=t.data,i=t.target;return i[0]=n.normals[3*r],i[1]=n.normals[3*r+1],i[2]=n.normals[3*r+2],i}:[0,1,0],opacity:.8,pointSize:1.5})},r._renderInstanced3DTile=function(){return new k({id:"3d-model-tile-layer",data:[{},{}],coordinateSystem:l.a.METERS,pickable:!0,scenegraph:this.state.scenegraph.scenes[0],sizeScale:2,getPosition:function(e){return[0,0,0]},getOrientation:function(e){return[0,0,0]},getTranslation:[0,0,0],getScale:[1,1,1],getColor:[255,255,255,255],opacity:.8})},r._renderLayers=function(){var e=this.state.tile;switch(e&&e.type){case"pnts":return this._renderPointCloud3DTile();case"i3dm":case"b3dm":return this._renderInstanced3DTile();default:return null}},r._onSelectExample=function(e){var t=this,r=e.category,n=e.example;this.setState({category:r,example:n},function(){t.state.data&&r&&n&&t._loadExample(r,n)})},r._renderControlPanel=function(){var e=this.state,t=e.data,r=e.example,n=e.category;return u.a.createElement(Me,{data:t,category:n,example:r,onChange:this._onSelectExample})},r.render=function(){var e=this,t=this.state.viewState;return u.a.createElement("div",null,this._renderControlPanel(),u.a.createElement(f.a,{ref:function(t){return e._deckRef=t},width:"100%",height:"100%",views:new l.e,viewState:t,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}}))},t}(o.PureComponent);function He(e){Object(c.render)(u.a.createElement(ze,null),e)}},206:function(e,t,r){"use strict";r.d(t,"c",function(){return s}),r.d(t,"a",function(){return o}),r.d(t,"d",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"e",function(){return f});r(75),r(76);var n=function(e){return"boolean"==typeof e},i=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"==typeof e},s=function(e){return e&&"function"==typeof e[Symbol.iterator]},o=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]},u=function(e){return a(e)&&"done"in e&&"value"in e},c=function(e){return"undefined"!=typeof window&&e instanceof window.Response||e.arrayBuffer&&e.json&&e.body},f=function(e){return function(e){return a(e)&&i(e.tee)&&i(e.cancel)&&i(e.pipeTo)&&i(e.getReader)}(e)||function(e){return a(e)&&i(e.read)&&i(e.pipe)&&n(e.readable)}(e)}},210:function(e,t,r){"use strict";(function(e,n){r.d(t,"b",function(){return i}),r.d(t,"a",function(){return s});var i="object"!=typeof e||"[object process]"!==String(e)||e.browser,a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n&&n,document:"undefined"!=typeof document&&document},s=a.global||a.self||a.window}).call(this,r(122),r(78))},211:function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return s});r(31),r(11),r(203);var n=r(220),i=function(e){return e&&e instanceof ArrayBuffer},a=function(t){return t&&t instanceof e};function s(e){if(i(e))return e;if(a(e))return new Uint8Array(e).buffer;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return Object(n.a)(!1)}}).call(this,r(251).Buffer)},212:function(e,t,r){"use strict";r(7);var n=r(205),i=r.n(n),a=(r(208),r(209)),s=r.n(a),o=r(246),u=r(226),c=function(){function e(){}var t=e.prototype;return t.log=function(){},t.info=function(){},t.warn=function(){},t.error=function(){},e}(),f=r(225),l=r(220),h=(r(31),r(20),r(14),r(11),r(77),r(228),r(211)),d=new Map;function p(e,t,r){var n=function(e){var t=d.get(e);if(!t){var r=new Blob([e],{type:"application/javascript"});t=URL.createObjectURL(r),d.set(e,t)}return new Worker(t)}(e);r=function(e){null!==(e=Object.assign({},e)).log&&delete e.log;return e}(r);var i=function(e,t){return new Promise(function(r,i){n.onmessage=function(e){switch(e.data.type){case"done":r(e.data.result),n.terminate();break;case"error":i(new Error(e.data.message))}};var a=Object(h.a)(e);n.postMessage({arraybuffer:a,opts:t},[a])})};return t?i(t,r):i}r(75),r(76);var b=r(206),g=r(235),y="Cannot convert supplied data type";function v(e){return Object(b.b)(e)?e.url:null}function m(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var r=e.buffer||e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}throw new Error(y)}function _(e,t){return w.apply(this,arguments)}function w(){return(w=s()(i.a.mark(function e(t,r){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,n=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!n){e.next=6;break}return e.abrupt("return",m(t,r));case 6:if(!Object(b.b)(t)){e.next=15;break}if(!r.binary){e.next=13;break}return e.next=10,t.arrayBuffer();case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=t.text();case 14:return e.abrupt("return",e.t0);case 15:throw new Error(y);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return T.apply(this,arguments)}function T(){return(T=s()(i.a.mark(function e(t,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(b.d)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!Object(b.b)(t)){e.next=4;break}return e.abrupt("return",Object(g.a)(t.body));case 4:if(!Object(b.e)(t)){e.next=6;break}return e.abrupt("return",Object(g.a)(t));case 6:if(!Object(b.a)(t)){e.next=8;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 8:return e.abrupt("return",x(t,r));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e,t){return A.apply(this,arguments)}function A(){return(A=s()(i.a.mark(function e(t,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t))){e.next=2;break}return e.abrupt("return",i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buffer||t;case 2:case"end":return e.stop()}},e)})());case 2:if(!Object(b.d)(t)){e.next=4;break}return e.abrupt("return",t);case 4:if(!Object(b.c)(t)){e.next=6;break}return e.abrupt("return",t[Symbol.iterator]());case 6:throw new Error(y);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e,t,r,n){return S.apply(this,arguments)}function S(){return(S=s()(i.a.mark(function e(t,r,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||v(t),e.next=3,_(t,r);case 3:if(t=e.sent,!r.parseTextSync||"string"!=typeof t){e.next=7;break}return n.dataType="text",e.abrupt("return",r.parseTextSync(t,n,a,r));case 7:if(!r.parseSync){e.next=9;break}return e.abrupt("return",r.parseSync(t,n,a,r));case 9:if(!r.parse){e.next=13;break}return e.next=12,r.parse(t,n,a,r);case 12:return e.abrupt("return",e.sent);case 13:if(!r.worker){e.next=17;break}return e.next=16,p(r.worker,t,n);case 16:return e.abrupt("return",e.sent);case 17:return e.abrupt("return",Object(l.a)(!1));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t,r,n){return j.apply(this,arguments)}function j(){return(j=s()(i.a.mark(function e(t,r,n,a){var s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.parseInBatches){e.next=6;break}return e.next=3,O(t);case 3:return s=e.sent,o=r.parseInBatches(s,n,a,r),e.abrupt("return",o);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t,r,n){return C.apply(this,arguments)}function C(){return(C=s()(i.a.mark(function e(t,r,n,a){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)||Object(u.a)(r)||(a=n,n=r,r=null),r=r||Object(f.a)(),s=Array.isArray(r)?Object(o.a)(a,t,r):r){e.next=5;break}return e.abrupt("return",null);case 5:return Object(u.b)(s),n=P(n,s),e.next=9,E(t,s,n,a);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t,r,n){Array.isArray(t)||Object(u.a)(t)||(n=r,r=t,t=null),t=t||Object(f.a)();var i=Array.isArray(t)?Object(o.a)(n,e,t):t;return Object(u.b)(i),function(e,t,r,n){return e=m(e,t),t.parseTextSync&&"string"==typeof e?t.parseTextSync(e,r,n,t):t.parseSync?t.parseSync(e,r,n,t):Object(l.a)(!1)}(e,i,r=P(r,i),n)}function N(e,t,r,n){return L.apply(this,arguments)}function L(){return(L=s()(i.a.mark(function e(t,r,n,a){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(r)||Object(u.a)(r)||(a=n,n=r,r=null),r=r||Object(f.a)(),s=Array.isArray(r)?Object(o.a)(a,null,r):r,Object(u.b)(s),n=P(n,s),e.abrupt("return",I(t,s,n,a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e,t){return null===(e=Object.assign({},t.DEFAULT_OPTIONS,t.defaultOptions,t.options,e,{dataType:"arraybuffer"})).log&&(e.log=new c),"log"in e||(e.log=console),e}r.d(t,"a",function(){return k}),r.d(t,"c",function(){return B}),r.d(t,"b",function(){return N})},215:function(e,t,r){"use strict";r.d(t,"a",function(){return a});r(33),r(80),r(7);var n="",i={};function a(e){for(var t in i)if(e.startsWith(t)){var r=i[t];return e.replace(t,r)}return e+=n}},216:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});r(205),r(208),r(209),r(212),r(227),r(229),r(215);var n=r(210),i=n.a.TextEncoder,a=n.a.TextDecoder},220:function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,"a",function(){return n})},225:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return s});r(14),r(11),r(259),r(75),r(76),r(20);var n=r(226),i={};function a(e){var t=e=Array.isArray(e)?e:[e],r=Array.isArray(t),a=0;for(t=r?t:t[Symbol.iterator]();;){var s;if(r){if(a>=t.length)break;s=t[a++]}else{if((a=t.next()).done)break;s=a.value}var o=s;Object(n.b)(o);var u=o.extensions,c=Array.isArray(u),f=0;for(u=c?u:u[Symbol.iterator]();;){var l;if(c){if(f>=u.length)break;l=u[f++]}else{if((f=u.next()).done)break;l=f.value}i[l]=o}}}function s(){return Object.values(i)}},226:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});r(7);var n=r(220);function i(e){return!!e&&(Array.isArray(e)&&(e=e[0]),e.parseTextSync||e.parseSync||e.parse||e.loadAndParse||e.parseStream||e.parseInBatches||e.worker)}function a(e){var t;return Object(n.a)(i(e)),Array.isArray(e)&&(t=(e=e[0])[1],e=Object.assign({},e,{options:Object.assign({},e.options,{options:t})})),e.extension&&(e.extensions=e.extensions||[e.extension],delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Object(n.a)(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}},227:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(205),i=r.n(n),a=(r(208),r(209)),s=r.n(a),o=r(215);function u(e,t){return c.apply(this,arguments)}function c(){return(c=s()(i.a.mark(function e(t,r){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(t),e.abrupt("return",fetch(t,r));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}},229:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(205),i=r.n(n),a=(r(208),r(209)),s=r.n(a),o=r(227),u=r(226),c=r(246),f=r(212),l=r(225);function h(e,t,r){return d.apply(this,arguments)}function d(){return(d=s()(i.a.mark(function e(t,r,n){var a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)||Object(u.a)(r)||(n=r,r=null),r=r||Object(l.a)(),!(a=Array.isArray(r)?Object(c.a)(t,null,r):r)||!a.loadAndParse){e.next=7;break}return e.next=6,a.loadAndParse(t,n);case 6:return e.abrupt("return",e.sent);case 7:if("string"!=typeof(s=t)){e.next=12;break}return e.next=11,Object(o.a)(t,n);case 11:s=e.sent;case 12:return e.abrupt("return",Object(f.a)(s,r,n,t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}},230:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r(203);function n(e){return e+3&-4}},235:function(e,t,r){"use strict";r.d(t,"a",function(){return h});r(31),r(11),r(75),r(76);var n=r(209),i=r.n(n),a=r(205),s=r.n(a),o=(r(208),r(298)),u=r.n(o),c=r(299),f=r.n(c),l=r(210);function h(e){return"function"==typeof e[Symbol.asyncIterator]?e:"function"==typeof e.getIterator?e.getIterator():l.b?function(e){return d.apply(this,arguments)}(e):function(e){return p.apply(this,arguments)}(e)}function d(){return(d=f()(s.a.mark(function e(t){var r,n,i,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getReader(),e.prev=1;case 2:return e.next=5,u()(r.read());case 5:if(n=e.sent,i=n.done,a=n.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,a;case 12:e.next=2;break;case 14:return e.prev=14,r.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,,14,17]])}))).apply(this,arguments)}function p(){return(p=f()(s.a.mark(function e(t){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()(t);case 2:t=e.sent;case 3:if(null===(r=t.read())){e.next=9;break}return e.next=8,r;case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u()(b(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=i()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.once("readable",e)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}},246:function(e,t,r){"use strict";r.d(t,"a",function(){return a});r(75),r(76),r(20),r(81);var n=r(226),i=/[^.]+$/;function a(e,t,r){void 0===e&&(e="");var a=e.match(i);if(a&&a[0]){var s=function(e,t){t=t.toLowerCase();for(var r=e,i=Array.isArray(r),a=0,r=i?r:r[Symbol.iterator]();;){var s;if(i){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var o=s;Object(n.b)(o);for(var u=o.extensions,c=Array.isArray(u),f=0,u=c?u:u[Symbol.iterator]();;){var l;if(c){if(f>=u.length)break;l=u[f++]}else{if((f=u.next()).done)break;l=f.value}var h=l;if(h.toLowerCase()===t)return o}}return null}(r,a[0]);if(s)return s}var o=function(e,t){for(var r=e,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var s=a;if(s.testText&&s.testText(t))return s}return null}(r,t);return o||null}},248:function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"gltf/glb assertion failed.")}r.d(t,"a",function(){return n})},260:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r(80);function n(e,t){return e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:")?e:t.substr(0,t.lastIndexOf("/")+1)+e}},263:function(e,t,r){"use strict";r.d(t,"d",function(){return a}),r.d(t,"e",function(){return s}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"a",function(){return c});r(213),r(231),r(232),r(238),r(203),r(239),r(20),r(14),r(11),r(77),r(228);var n=["SCALAR","VEC2","VEC3","VEC4"],i=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]);function a(e){return n[e-1]||n[0]}function s(e){var t=i.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}var o={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},c={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}},264:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return a});var n="KHR_draco_mesh_compression",i="UBER_draco_point_cloud_compression",a="KHR_lights_punctual"},275:function(e,t){},281:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"a",function(){return p});r(203);var n=r(220),i=r(216),a=r(230),s=1735152710,o=12,u=8,c=1313821514,f=5130562,l=!0,h=!1;function d(e,t,r){void 0===t&&(t=0),void 0===r&&(r={});var n=new DataView(e),i=r.magic,a=void 0===i?s:i,o=n.getUint32(t,!1);return o===a||o===s}function p(e,t,r,d){void 0===r&&(r=0),void 0===d&&(d={});var p=new DataView(t);e.byteOffset=r,e.magic=p.getUint32(r+0,h),e.version=p.getUint32(r+4,l),e.byteLength=p.getUint32(r+8,l),e.type=function(e){return""+String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3))}(p);var b=d.magic,g=void 0===b?s:b;e.magic===s||e.magic===g||console.warn("Invalid GLB magic string "+e.type),Object(n.a)(2===e.version,"Invalid GLB version "+e.version+". Only .glb v2 supported"),Object(n.a)(e.byteLength>20);var y=p.getUint32(r+12,l),v=p.getUint32(r+16,l),m=v===c||0===v;Object(n.a)(m,"JSON chunk format "+v);var _=o+u,w=new Uint8Array(t,r+_,y),O=new i.a("utf8").decode(w);e.json=JSON.parse(O);var T=_+Object(a.a)(y);if(e.hasBinChunk=T+8<=e.byteLength,e.hasBinChunk){var x=p.getUint32(r+T+0,l),A=p.getUint32(r+T+4,l),E=A===f||1===A;Object(n.a)(E,"BIN chunk format "+A);var S=T+u;e.binChunkByteOffset=S,e.binChunkLength=x}return r+e.byteLength}},282:function(e,t,r){"use strict";r.d(t,"a",function(){return o});r(213),r(231),r(232),r(238),r(203),r(239);var n=r(220),i={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},a={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},s={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function o(e,t,r){r&&(e=function(e,t){for(var r=e.byteLength-t,n=new ArrayBuffer(r),i=new Uint8Array(e),a=new Uint8Array(n),s=0;s<r;s++)a[s]=i[t+s];return n}(e,r));for(var i=t.bufferViews||[],a=0;a<i.length;++a){var s=i[a];Object(n.a)(s.byteLength>=0)}return{accessors:u(e,i,t),images:c(e,i,t)}}function u(e,t,r){for(var i=r.accessors||[],a=[],s=0;s<i.length;++s){var o=i[s];Object(n.a)(o);var u=t[o.bufferView];if(u){var c=f(o,u),l=c.ArrayType,h=c.length,d=new l(e,u.byteOffset,h);d.accessor=o,a.push(d)}}return a}function c(e,t,r){for(var i=r.images||[],a=[],s=0;s<i.length;++s){var o=i[s];Object(n.a)(o);var u=t[o.bufferView];Object(n.a)(u);var c=new Uint8Array(e,u.byteOffset,u.byteLength);c.imate=o,a.push(c)}return a}function f(e,t){var r=s[e.componentType],o=i[e.type],u=a[e.componentType],c=e.count*o,f=e.count*o*u;return Object(n.a)(f>=0&&f<=t.byteLength),{ArrayType:r,length:c,byteLength:f}}},284:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});r(213),r(32);var n=r(263);function i(e){var t={};for(var r in e){var n=e[r];if("indices"!==r){var i=a(n);t[r]=i}}return t}function a(e,t){var r=function(e,t){var r=e,n=1,i=0;e&&e.value&&(r=e.value,n=e.size||1);r&&(ArrayBuffer.isView(r)||(r=function(e,t,r){void 0===r&&(r=!1);if(!e)return null;if(Array.isArray(e))return new t(e);if(r&&!(e instanceof t))return new t(e);return e}(r,Float32Array)),i=r.length/n);return{buffer:r,size:n,count:i}}(e),i=r.buffer,a=r.size;return{value:i,size:a,bufferView:null,byteOffset:0,count:r.count,type:Object(n.d)(a),componentType:Object(n.e)(i)}}},322:function(e,t,r){r(247)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},323:function(e,t,r){r(247)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},324:function(e,t,r){var n=r(15);n(n.P,"Array",{fill:r(301)}),r(59)("fill")},327:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,"KHR_draco_mesh_compression",function(){return A}),r.d(n,"KHR_lights_punctual",function(){return E});r(75),r(76),r(20),r(7);var i=r(205),a=r.n(i),s=(r(208),r(209)),o=r.n(s),u=r(227),c=r(282),f=r(248),l=r(260),h=r(281),d=(r(14),r(11),r(223),r(261)),p=r.n(d),b=(r(203),r(82),r(77),r(262),r(283),r(228),!1),g=!0,y=new Map([["image/png",{test:function(e){return e.byteLength>=24&&2303741511===e.getUint32(0,b)},getSize:function(e){return{width:e.getUint32(16,b),height:e.getUint32(20,b)}}}],["image/jpeg",{test:function(e){return e.byteLength>=2&&65496===e.getUint16(0,b)},getSize:function(e){if(e.byteLength<2||65496!==e.getUint16(0,b))return null;var t=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var r=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:r}}(),r=t.tableMarkers,n=t.sofMarkers,i=2;for(;i<e.byteLength;){var a=e.getUint16(i,b);if(n.has(a))return{height:e.getUint16(i+5,b),width:e.getUint16(i+7,b)};if(!r.has(a))return null;i+=2,i+=e.getUint16(i,b)}return null}}],["image/gif",{test:function(e){return e.byteLength>=10&&1195984440===e.getUint32(0,b)},getSize:function(e){return{width:e.getUint16(6,g),height:e.getUint16(8,g)}}}],["image/bmp",{test:function(e){return e.byteLength>=2&&16973===e.getUint16(0,b)},getSize:function(e){return{width:e.getUint32(18,g),height:e.getUint32(22,g)}}}]]);Array.from(y.keys()).join(", ");function v(e){var t=m(e),r=y.entries(),n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var s=a,o=s[0];if((0,s[1].test)(t))return o}return null}function m(e){if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return new DataView(e.buffer||e);throw new Error("toDataView")}r(216);function _(e){return e+3&-4}var w=r(263),O=function(){function e(t){if(t instanceof e)return t;t||(t={json:{version:2,buffers:[]},binary:null}),this.gltf=t}var t=e.prototype;return t.getApplicationData=function(e){return this.json[e]},t.getExtraData=function(e){return(this.json.extras||{})[e]},t.getExtension=function(e){var t=this.getUsedExtensions().find(function(t){return t===e}),r=this.json.extensions||{};return t?r[e]||!0:null},t.getRequiredExtension=function(e){return this.getRequiredExtensions().find(function(t){return t===e})?this.getExtension(e):null},t.getRequiredExtensions=function(){return this.json.extensionsRequired||[]},t.getUsedExtensions=function(){return this.json.extensionsUsed||[]},t.getObjectExtension=function(e,t){return(e.extensions||{})[t]},t.getScene=function(e){return this.getObject("scenes",e)},t.getNode=function(e){return this.getObject("nodes",e)},t.getSkin=function(e){return this.getObject("skins",e)},t.getMesh=function(e){return this.getObject("meshes",e)},t.getMaterial=function(e){return this.getObject("materials",e)},t.getAccessor=function(e){return this.getObject("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this.getObject("textures",e)},t.getSampler=function(e){return this.getObject("samplers",e)},t.getImage=function(e){return this.getObject("images",e)},t.getBufferView=function(e){return this.getObject("bufferViews",e)},t.getBuffer=function(e){return this.getObject("buffers",e)},t.getObject=function(e,t){if("object"==typeof t)return t;var r=this.gltf[e]&&this.gltf[e][t];return r||console.warn("glTF file error: Could not find "+e+"["+t+"]"),r},t.getBufferViewArray=function(e){var t=this.gltf.bufferViews[e];if(this.glbParser)return this.glbParser.getBufferView(t);var r=this.gltf.buffers[t.buffer].data,n=t.byteOffset||0;return new Uint8Array(r,n,t.byteLength)},t.addApplicationData=function(e,t){return this.json[e]=t,this},t.addExtraData=function(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this},t.addExtension=function(e,t){return Object(f.a)(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),this},t.addRequiredExtension=function(e,t){return Object(f.a)(t),this.addExtension(e,t),this.registerRequiredExtension(e),this},t.registerUsedExtension=function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(t){return t===e})||this.json.extensionsUsed.push(e)},t.registerRequiredExtension=function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(t){return t===e})||this.json.extensionsRequired.push(e)},t.removeExtension=function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]},t.setObjectExtension=function(e,t,r){(e.extensions||{})[t]=r},t.addMesh=function(e,t,r){void 0===r&&(r=4);var n={primitives:[{attributes:this._addAttributes(e),indices:t,mode:r}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(n),this.json.meshes.length-1},t.addPointCloud=function(e){var t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1},t.addImage=function(e,t){t=t||v(e);var r={bufferView:this.addBufferView(e),mimeType:t};return this.json.images=this.json.images||[],this.json.images.push(r),this.json.images.length-1},t.addBufferView=function(e){var t=e.byteLength||e.length;this.byteLength+=_(t),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var r={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1},t.addAccessor=function(e,t){var r={bufferView:e,type:Object(w.d)(t.size),componentType:t.componentType,count:t.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1},t.addBinaryBuffer=function(e,t){void 0===t&&(t={size:3});var r=this.addBufferView(e),n={size:t.size,componentType:Object(w.e)(e),count:Math.round(e.length/t.size)};return this.addAccessor(r,Object.assign(n,t))},t._removeStringFromArray=function(e,t){for(var r=!0;r;){var n=e.indexOf(t);n>-1?e.splice(n,1):r=!1}},p()(e,[{key:"json",get:function(){return this.gltf.json}}]),e}(),T=r(264),x=r(284),A=function(){function e(){}return e.decode=function(t,r){var n=new O(t),i=n.json.meshes||[],a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var u=o;e.decompressMesh(u,r)}n.removeExtension(T.a)},e.encode=function(t,r){var n=new O(t),i=n.json.meshes||[],a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var u=o;e.compressMesh(u,r),n.addRequiredExtension(T.a)}},e.compressMesh=function(e,t,r,n){var i;if(void 0===r&&(r=4),void 0===n&&(n={}),!n.DracoWriter||!n.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var a=n.DracoWriter.encodeSync({attributes:e}),s=n.DracoLoader.parseSync({attributes:e}),o=n._addFauxAttributes(s.attributes),u=n.addBufferView(a);return{primitives:[{attributes:o,mode:r,extensions:(i={},i[T.a]={bufferView:u,attributes:o},i)}]}},e.decompressMesh=function(t,r){void 0===r&&(r={});var n=t.primitives,i=Array.isArray(n),a=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s;if(e._decompressMeshPrimitive(o,r),!o.attributes||0===Object.keys(o.attributes).length)throw new Error("Empty glTF primitive: decompression failure?")}},e._decompressMeshPrimitive=function(e,t){var r=e.extensions&&e.extensions[T.a];if(r&&t.DracoLoader&&t.decompress){delete e.extensions[T.a];var n=this._getBufferViewArray(r.bufferView),i=t.DracoLoader.parseSync(n);e.attributes=Object(x.b)(i.attributes),i.indices&&(e.indices=Object(x.a)(i.indices))}},p()(e,null,[{key:"name",get:function(){return T.a}}]),e}(),E=function(){function e(){}return e.decode=function(e,t){var r=new O(e),n=r.getExtension(T.b);n&&(r.json.lights=n.lights,r.removeExtension(T.b));var i=r.nodes||[],a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var u=o,c=u.extensions&&u.extensions.KHR_lights_punctual;c&&(u.light=r._get("lights",c.light),delete u.extensions.KHR_lights_punctual)}},e.encode=function(e,t){var r=new O(e),n=r.json;if(n.lights){var i=r.addExtensions(T.b);Object(f.a)(!i.lights),i.lights=n.lights,delete n.lights}if(r.json.lights){var a=r.json.lights,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var u;if(s){if(o>=a.length)break;u=a[o++]}else{if((o=a.next()).done)break;u=o.value}var c=u,l=c.node;r.addObjectExtension(l,T.b,c)}delete r.json.lights}},p()(e,null,[{key:"name",get:function(){return T.b}}]),e}();r.d(t,"b",function(){return j}),r.d(t,"a",function(){return k});var S={fetchLinkedResources:!1,decompress:!1,DracoLoader:null,postProcess:!0,createImages:!1,log:console},I={fetchLinkedResources:!0,fetch:u.a,decompress:!1,DracoLoader:null,postProcess:!0,createImages:!1,log:console};function j(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i={}),i=Object.assign({},S,i);var a=t;a instanceof ArrayBuffer&&!Object(h.b)(a,r,i)&&(a=(new TextDecoder).decode(a));if(e.buffers=[],"string"==typeof a?e.json=JSON.parse(a):a instanceof ArrayBuffer?(r=Object(h.a)(e,a,r,i),e.hasBinChunk&&(e.buffers.push({arrayBuffer:a,byteOffset:e.binChunkByteOffset,byteLength:e.binChunkLength}),e.unpackedBuffers=Object(c.a)(e.buffers[0].arrayBuffer,e.json,e.buffers[0].byteOffset))):e.json=a,i.uri&&(e.baseUri=i.uri),i.fetchLinkedResources){var s=e.json.buffers||[],o=Array.isArray(s),u=0;for(s=o?s:s[Symbol.iterator]();;){var f;if(o){if(u>=s.length)break;f=s[u++]}else{if((u=s.next()).done)break;f=u.value}if(f.uri)throw new Error("parseGLTFSync: Cannot decode uri buffers")}}return function(e,t){for(var r in n){var i=r in t&&!t[r];if(!i){var a=n[r];a.decode(e,t)}}}(e,i),r}function k(e,t,r,n){return C.apply(this,arguments)}function C(){return(C=o()(a.a.mark(function e(t,r,n,i){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=0),void 0===i&&(i={}),i=Object.assign({},I,i),j(t,r,n,Object.assign({},i,{fetchLinkedResources:!1,postProcess:!1,decompress:!1})),!i.fetchLinkedResources){e.next=7;break}return e.next=7,B(t,i);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t){return N.apply(this,arguments)}function N(){return(N=o()(a.a.mark(function e(t,r){var n,i,s,o,u,c,h,d,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.json.buffers,i=Array.isArray(n),s=0,n=i?n:n[Symbol.iterator]();case 1:if(!i){e.next=7;break}if(!(s>=n.length)){e.next=4;break}return e.abrupt("break",26);case 4:o=n[s++],e.next=11;break;case 7:if(!(s=n.next()).done){e.next=10;break}return e.abrupt("break",26);case 10:o=s.value;case 11:if(!(u=o).uri){e.next=24;break}return c=r.fetch||window.fetch,Object(f.a)(c),h=Object(l.a)(u.uri,r.uri),e.next=18,c(h);case 18:return d=e.sent,e.next=21,d.arrayBuffer();case 21:p=e.sent,u.data=p,delete u.uri;case 24:e.next=1;break;case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}},374:function(e,t,r){"use strict";(function(e,n){r.d(t,"b",function(){return i}),r.d(t,"a",function(){return s});var i="object"!=typeof e||"[object process]"!==String(e)||e.browser,a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n&&n},s=a.global||a.self||a.window}).call(this,r(122),r(78))},375:function(e,t,r){"use strict";(function(e){r.d(t,"b",function(){return A}),r.d(t,"a",function(){return x});r(203),r(32);function n(e,t,r){return t<=e&&e<=r}e["encoding-indexes"]={};var i=Math.floor;function a(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function s(e){return 0<=e&&e<=127}var o=s,u=-1;function c(e){this.tokens=[].slice.call(e),this.tokens.reverse()}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():u},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var f=-1;function l(e,t){if(e)throw TypeError("Decoder error");return t||65533}function h(e){throw TypeError("The code point "+e+" could not be encoded.")}function d(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(b,e)?b[e]:null}var p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],b={};p.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){b[t]=e})})});var g,y,v={},m={};function _(e,t){return t&&t[e]||null}function w(e,t){var r=t.indexOf(e);return-1===r?null:r}function O(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var T="utf-8";function x(e,t){if(!(this instanceof x))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):T,t=a(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var r=d(e);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+e);if(!m[r.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");return this._encoding=r,Boolean(t.fatal)&&(this._error_mode="fatal"),Boolean(t.ignoreBOM)&&(this._ignoreBOM=!0),Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM),this}function A(t,r){if(!(this instanceof A))throw TypeError("Called as a function. Did you forget 'new'?");r=a(r),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(r.fatal)?"fatal":"replacement";if(Boolean(r.NONSTANDARD_allowLegacyEncoding)){var n=d(t=void 0!==t?String(t):T);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!v[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else this._encoding=d("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function E(e){var t=e.fatal,r=0,i=0,a=0,s=128,o=191;this.handler=function(e,c){if(c===u&&0!==a)return a=0,l(t);if(c===u)return f;if(0===a){if(n(c,0,127))return c;if(n(c,194,223))a=1,r=31&c;else if(n(c,224,239))224===c&&(s=160),237===c&&(o=159),a=2,r=15&c;else{if(!n(c,240,244))return l(t);240===c&&(s=144),244===c&&(o=143),a=3,r=7&c}return null}if(!n(c,s,o))return r=a=i=0,s=128,o=191,e.prepend(c),l(t);if(s=128,o=191,r=r<<6|63&c,(i+=1)!==a)return null;var h=r;return r=a=i=0,h}}function S(e){e.fatal;this.handler=function(e,t){if(t===u)return f;if(o(t))return t;var r,i;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);for(var a=[(t>>6*r)+i];r>0;){var s=t>>6*(r-1);a.push(128|63&s),r-=1}return a}}function I(e,t){var r=t.fatal;this.handler=function(t,n){if(n===u)return f;if(s(n))return n;var i=e[n-128];return null===i?l(r):i}}function j(e,t){t.fatal;this.handler=function(t,r){if(r===u)return f;if(o(r))return r;var n=w(r,e);return null===n&&h(r),n+128}}function k(e){var t=e.fatal,r=0,i=0,a=0;this.handler=function(e,o){if(o===u&&0===r&&0===i&&0===a)return f;var c;if(o!==u||0===r&&0===i&&0===a||(r=0,i=0,a=0,l(t)),0!==a){c=null,n(o,48,57)&&(c=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,r=0,n=0,i=O("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[0]<=e))break;r=a[0],n=a[1]}return n+e-r}(10*(126*(10*(r-129)+i-48)+a-129)+o-48));var h=[i,a,o];return r=0,i=0,a=0,null===c?(e.prepend(h),l(t)):c}if(0!==i)return n(o,129,254)?(a=o,null):(e.prepend([i,o]),r=0,i=0,l(t));if(0!==r){if(n(o,48,57))return i=o,null;var d=r,p=null;r=0;var b=o<127?64:65;return(n(o,64,126)||n(o,128,254))&&(p=190*(d-129)+(o-b)),null===(c=null===p?null:_(p,O("gb18030")))&&s(o)&&e.prepend(o),null===c?l(t):c}return s(o)?o:128===o?8364:n(o,129,254)?(r=o,null):l(t)}}function C(e,t){e.fatal;this.handler=function(e,r){if(r===u)return f;if(o(r))return r;if(58853===r)return h(r);if(t&&8364===r)return 128;var n=w(r,O("gb18030"));if(null!==n){var a=n%190;return[i(n/190)+129,a+(a<63?64:65)]}if(t)return h(r);n=function(e){if(59335===e)return 7457;var t,r=0,n=0,i=O("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[1]<=e))break;r=a[1],n=a[0]}return n+e-r}(r);var s=i(n/10/126/10),c=i((n-=10*s*126*10)/10/126),l=i((n-=10*c*126)/10);return[s+129,c+48,l+129,n-10*l+48]}}function B(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===u&&0!==r)return r=0,l(t);if(i===u&&0===r)return f;if(0!==r){var a=r,o=null;r=0;var c=i<127?64:98;switch((n(i,64,126)||n(i,161,254))&&(o=157*(a-129)+(i-c)),o){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var h=null===o?null:_(o,O("big5"));return null===h&&s(i)&&e.prepend(i),null===h?l(t):h}return s(i)?i:n(i,129,254)?(r=i,null):l(t)}}function N(e){e.fatal;this.handler=function(e,t){if(t===u)return f;if(o(t))return t;var r=function(e){var t=y=y||O("big5").map(function(e,t){return t<5024?null:e});return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):w(e,t)}(t);if(null===r)return h(t);var n=i(r/157)+129;if(n<161)return h(t);var a=r%157;return[n,a+(a<63?64:98)]}}function L(e){var t=e.fatal,r=!1,i=0;this.handler=function(e,a){if(a===u&&0!==i)return i=0,l(t);if(a===u&&0===i)return f;if(142===i&&n(a,161,223))return i=0,65216+a;if(143===i&&n(a,161,254))return r=!0,i=a,null;if(0!==i){var o=i;i=0;var c=null;return n(o,161,254)&&n(a,161,254)&&(c=_(94*(o-161)+(a-161),O(r?"jis0212":"jis0208"))),r=!1,n(a,161,254)||e.prepend(a),null===c?l(t):c}return s(a)?a:142===a||143===a||n(a,161,254)?(i=a,null):l(t)}}function P(e){e.fatal;this.handler=function(e,t){if(t===u)return f;if(o(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var r=w(t,O("jis0208"));return null===r?h(t):[i(r/94)+161,r%94+161]}}function U(e){var t=e.fatal,r=0,i=1,a=2,s=3,o=4,c=5,h=6,d=r,p=r,b=0,g=!1;this.handler=function(e,y){switch(d){default:case r:return 27===y?(d=c,null):n(y,0,127)&&14!==y&&15!==y&&27!==y?(g=!1,y):y===u?f:(g=!1,l(t));case i:return 27===y?(d=c,null):92===y?(g=!1,165):126===y?(g=!1,8254):n(y,0,127)&&14!==y&&15!==y&&27!==y&&92!==y&&126!==y?(g=!1,y):y===u?f:(g=!1,l(t));case a:return 27===y?(d=c,null):n(y,33,95)?(g=!1,65344+y):y===u?f:(g=!1,l(t));case s:return 27===y?(d=c,null):n(y,33,126)?(g=!1,b=y,d=o,null):y===u?f:(g=!1,l(t));case o:if(27===y)return d=c,l(t);if(n(y,33,126)){d=s;var v=_(94*(b-33)+y-33,O("jis0208"));return null===v?l(t):v}return y===u?(d=s,e.prepend(y),l(t)):(d=s,l(t));case c:return 36===y||40===y?(b=y,d=h,null):(e.prepend(y),g=!1,d=p,l(t));case h:var m=b;b=0;var w=null;if(40===m&&66===y&&(w=r),40===m&&74===y&&(w=i),40===m&&73===y&&(w=a),36!==m||64!==y&&66!==y||(w=s),null!==w){d=d=w;var T=g;return g=!0,T?l(t):null}return e.prepend([m,y]),g=!1,d=p,l(t)}}}function D(e){e.fatal;var t=0,r=1,n=2,a=t;this.handler=function(e,s){if(s===u&&a!==t)return e.prepend(s),a=t,[27,40,66];if(s===u&&a===t)return f;if(!(a!==t&&a!==r||14!==s&&15!==s&&27!==s))return h(65533);if(a===t&&o(s))return s;if(a===r&&(o(s)&&92!==s&&126!==s||165==s||8254==s)){if(o(s))return s;if(165===s)return 92;if(8254===s)return 126}if(o(s)&&a!==t)return e.prepend(s),a=t,[27,40,66];if((165===s||8254===s)&&a!==r)return e.prepend(s),a=r,[27,40,74];8722===s&&(s=65293);var c=w(s,O("jis0208"));return null===c?h(s):a!==n?(e.prepend(s),a=n,[27,36,66]):[i(c/94)+33,c%94+33]}}function R(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===u&&0!==r)return r=0,l(t);if(i===u&&0===r)return f;if(0!==r){var a=r,o=null;r=0;var c=i<127?64:65,h=a<160?129:193;if((n(i,64,126)||n(i,128,252))&&(o=188*(a-h)+i-c),n(o,8836,10715))return 48508+o;var d=null===o?null:_(o,O("jis0208"));return null===d&&s(i)&&e.prepend(i),null===d?l(t):d}return s(i)||128===i?i:n(i,161,223)?65216+i:n(i,129,159)||n(i,224,252)?(r=i,null):l(t)}}function M(e){e.fatal;this.handler=function(e,t){if(t===u)return f;if(o(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var r=function(e){return(g=g||O("jis0208").map(function(e,t){return n(t,8272,8835)?null:e})).indexOf(e)}(t);if(null===r)return h(t);var a=i(r/188),s=r%188;return[a+(a<31?129:193),s+(s<63?64:65)]}}function V(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===u&&0!==r)return r=0,l(t);if(i===u&&0===r)return f;if(0!==r){var a=r,o=null;r=0,n(i,65,254)&&(o=190*(a-129)+(i-65));var c=null===o?null:_(o,O("euc-kr"));return null===o&&s(i)&&e.prepend(i),null===c?l(t):c}return s(i)?i:n(i,129,254)?(r=i,null):l(t)}}function F(e){e.fatal;this.handler=function(e,t){if(t===u)return f;if(o(t))return t;var r=w(t,O("euc-kr"));return null===r?h(t):[i(r/190)+129,r%190+65]}}function G(e,t){var r=e>>8,n=255&e;return t?[r,n]:[n,r]}function z(e,t){var r=t.fatal,i=null,a=null;this.handler=function(t,s){if(s===u&&(null!==i||null!==a))return l(r);if(s===u&&null===i&&null===a)return f;if(null===i)return i=s,null;var o;if(o=e?(i<<8)+s:(s<<8)+i,i=null,null!==a){var c=a;return a=null,n(o,56320,57343)?65536+1024*(c-55296)+(o-56320):(t.prepend(G(o,e)),l(r))}return n(o,55296,56319)?(a=o,null):n(o,56320,57343)?l(r):o}}function H(e,t){t.fatal;this.handler=function(t,r){if(r===u)return f;if(n(r,0,65535))return G(r,e);var i=G(55296+(r-65536>>10),e),a=G(56320+(r-65536&1023),e);return i.concat(a)}}function q(e){e.fatal;this.handler=function(e,t){return t===u?f:s(t)?t:63360+t-128}}function J(e){e.fatal;this.handler=function(e,t){return t===u?f:o(t)?t:n(t,63360,63487)?t-63360+128:h(t)}}Object.defineProperty&&(Object.defineProperty(x.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(x.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(x.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),x.prototype.decode=function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=a(t),this._do_not_flush||(this._decoder=m[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,i=new c(r),s=[];;){var o=i.read();if(o===u)break;if((n=this._decoder.handler(i,o))===f)break;null!==n&&(Array.isArray(n)?s.push.apply(s,n):s.push(n))}if(!this._do_not_flush){do{if((n=this._decoder.handler(i,i.read()))===f)break;null!==n&&(Array.isArray(n)?s.push.apply(s,n):s.push(n))}while(!i.endOfStream());this._decoder=null}return function(e){var t,r;return t=["UTF-8","UTF-16LE","UTF-16BE"],r=this._encoding.name,-1===t.indexOf(r)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(e)}.call(this,s)},Object.defineProperty&&Object.defineProperty(A.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),A.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=a(t),this._do_not_flush||(this._encoder=v[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var r,n=new c(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var a=t.charCodeAt(n);if(a<55296||a>57343)i.push(a);else if(56320<=a&&a<=57343)i.push(65533);else if(55296<=a&&a<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var o=1023&a,u=1023&s;i.push(65536+(o<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(e)),i=[];;){var s=n.read();if(s===u)break;if((r=this._encoder.handler(n,s))===f)break;Array.isArray(r)?i.push.apply(i,r):i.push(r)}if(!this._do_not_flush){for(;(r=this._encoder.handler(n,n.read()))!==f;)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)},v["UTF-8"]=function(e){return new S(e)},m["UTF-8"]=function(e){return new E(e)},"encoding-indexes"in e&&p.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,r=O(t.toLowerCase());m[t]=function(e){return new I(r,e)},v[t]=function(e){return new j(r,e)}})}),m.GBK=function(e){return new k(e)},v.GBK=function(e){return new C(e,!0)},v.gb18030=function(e){return new C(e)},m.gb18030=function(e){return new k(e)},v.Big5=function(e){return new N(e)},m.Big5=function(e){return new B(e)},v["EUC-JP"]=function(e){return new P(e)},m["EUC-JP"]=function(e){return new L(e)},v["ISO-2022-JP"]=function(e){return new D(e)},m["ISO-2022-JP"]=function(e){return new U(e)},v.Shift_JIS=function(e){return new M(e)},m.Shift_JIS=function(e){return new R(e)},v["EUC-KR"]=function(e){return new F(e)},m["EUC-KR"]=function(e){return new V(e)},v["UTF-16BE"]=function(e){return new H(!0,e)},m["UTF-16BE"]=function(e){return new z(!0,e)},v["UTF-16LE"]=function(e){return new H(!1,e)},m["UTF-16LE"]=function(e){return new z(!1,e)},v["x-user-defined"]=function(e){return new J(e)},m["x-user-defined"]=function(e){return new q(e)}}).call(this,r(78))},376:function(e,t){},377:function(e,t){},378:function(e,t){},379:function(e,t){},381:function(e,t){e.exports=function(e){throw new Error('"'+e+'" is read-only')}}}]);