(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{242:function(t,e,n){"use strict";var r=n(39),i=n(15),a=n(38),u=n(138),o=n(135),s=n(27),c=n(390),h=n(136);i(i.S+i.F*!n(131)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,l=a(t),v="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,g=void 0!==y,k=0,m=h(l);if(g&&(y=r(y,d>2?arguments[2]:void 0,2)),null==m||v==Array&&o(m))for(n=new v(e=s(l.length));e>k;k++)c(n,k,g?y(l[k],k):l[k]);else for(f=m.call(l),n=new v;!(i=f.next()).done;k++)c(n,k,g?u(f,y,[i.value,k],!0):i.value);return n.length=k,n}})},245:function(t,e,n){n(257)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},258:function(t,e,n){n(257)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},259:function(t,e,n){n(257)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},276:function(t,e,n){"use strict";var r=n(336),i=n(310);t.exports=n(337)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},277:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f});var r={};function i(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function a(t){return Math.round(t/r.EPSILON)*r.EPSILON}function u(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===e?r.precision||4:e;return t=a(t),parseFloat(t.toPrecision(n))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function s(t,e){if(o(t)){for(var n=(i=t).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}var i;return e(t)}function c(t){return s(t,function(t){return t/180*Math.PI})}function h(t){return s(t,function(t){return 180*t/Math.PI})}function f(t,e){if(o(t)&&o(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!f(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},283:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI},284:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"b",function(){return u}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return h}),n.d(e,"l",function(){return f}),n.d(e,"k",function(){return l}),n.d(e,"h",function(){return v}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return y}),n.d(e,"a",function(){return g});var r=n(283);function i(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function a(t,e,n){var i=new r.a(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function c(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function h(t,e,n){var r=e[0],i=e[1],a=e[2],u=n[0],o=n[1],s=n[2];return t[0]=i*s-a*o,t[1]=a*u-r*s,t[2]=r*o-i*u,t}function f(t,e,n){var r=e[0],i=e[1],a=e[2],u=n[3]*r+n[7]*i+n[11]*a+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/u,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/u,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/u,t}function l(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function v(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function d(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function y(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function g(t,e){var n=a(t[0],t[1],t[2]),r=a(e[0],e[1],e[2]);s(n,n),s(r,r);var i=c(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}var k,m;k=new r.a(3),r.a!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),m=k},314:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n(283);function i(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function a(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function u(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var o,s;o=new r.a(2),r.a!=Float32Array&&(o[0]=0,o[1]=0),s=o},315:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(203),i=n(204),a=n(206),u=n(205),o=n(207),s=n(316),c=n(277),h=function(t,e){if(!t)throw new Error(e)},f=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(o.a)(e,t),Object(i.a)(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]+=i[a];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]-=i[a];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return h(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return h(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(c.a)(t)}}]),e}(s.a)},316:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(203),i=n(204),a=n(206),u=n(205),o=n(207),s=n(277);var c=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(o.a)(e,t),Object(i.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(s.b)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(s.e)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(s.d)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(s.b.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},342:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(203),i=n(204),a=n(206),u=n(205),o=n(207),s=n(315),c=n(314),h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,e),t=Object(a.a)(this,Object(u.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i),t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"cross",value:function(t){return c.a(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),e}(s.a)},343:function(t,e,n){"use strict";function r(t,e){return t.length===e&&t.every(Number.isFinite)}n.d(e,"a",function(){return r})},344:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(203),i=n(204),a=n(206),u=n(205),o=n(207),s=n(315),c=n(277),h=n(284),f=[0,0,0],l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,e),t=Object(a.a)(this,Object(u.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i,o),t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"angle",value:function(t){return h.a(this,t)}},{key:"cross",value:function(t){return h.c(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return h.h(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return h.i(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return h.j(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}}]),e}(s.a)},390:function(t,e,n){"use strict";var r=n(22),i=n(47);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},425:function(t,e,n){"use strict";var r=n(203),i=n(204),a=n(443),u=n(213),o=n(206),s=n(205),c=n(207),h=n(319),f=n(253),l=n(271);var v=n(270),d=n(275);function y(){var t=new l.a(4);return l.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function g(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function k(t,e,n){var r=e[0],i=e[1],a=e[2],u=e[3],o=n[0],s=n[1],c=n[2],h=n[3];return t[0]=r*h+u*o+i*c-a*s,t[1]=i*h+u*s+a*o-r*c,t[2]=a*h+u*c+r*s-i*o,t[3]=u*h-r*o-i*s-a*c,t}function m(t,e,n,r){var i,a,u,o,s,c=e[0],h=e[1],f=e[2],v=e[3],d=n[0],y=n[1],g=n[2],k=n[3];return(a=c*d+h*y+f*g+v*k)<0&&(a=-a,d=-d,y=-y,g=-g,k=-k),1-a>l.b?(i=Math.acos(a),u=Math.sin(i),o=Math.sin((1-r)*i)/u,s=Math.sin(r*i)/u):(o=1-r,s=r),t[0]=o*c+s*d,t[1]=o*h+s*y,t[2]=o*f+s*g,t[3]=o*v+s*k,t}function p(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,u=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*u+u]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+u]-e[3*u+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[u]=(e[3*u+i]+e[3*i+u])*n}return t}d.b,d.g,d.c;var E,M,b,A,O,S,T,_=d.m,w=d.a,N=d.l,j=d.d,L=d.i,x=d.h,P=d.n,C=d.k,R=(d.f,d.e,E=v.b(),M=v.e(1,0,0),b=v.e(0,1,0),function(t,e,n){var r=v.d(e,n);return r<-.999999?(v.c(E,M,e),v.f(E)<1e-6&&v.c(E,b,e),v.i(E,E),g(t,E,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(v.c(E,e,n),t[0]=E[0],t[1]=E[1],t[2]=E[2],t[3]=1+r,C(t,t))}),I=(A=y(),O=y(),S=new l.a(9),l.a!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,T=S,[0,0,0,1]);var V=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(r.a)(this,e),t=Object(o.a)(this,Object(s.a)(e).call(this,4)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i,a,u),t}return Object(c.a)(e,t),Object(i.a)(e,[{key:"fromMatrix3",value:function(t){return p(this,t),this.check()}},{key:"fromValues",value:function(t,e,n,r){return this.set(t,e,n,r)}},{key:"identity",value:function(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}},{key:"length",value:function(){return x(this)}},{key:"squaredLength",value:function(t){return P(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return j(this,t)}},{key:"rotationTo",value:function(t,e){return R(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return w(this,t),this.check()}},{key:"calculateW",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}},{key:"conjugate",value:function(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}},{key:"invert",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],u=n*n+r*r+i*i+a*a,o=u?1/u:0;t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=a*o}(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return L(this,t,e,n),this.check()}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return k(this,this,t),this.check()}},{key:"normalize",value:function(){return C(this,this),this.check()}},{key:"rotateX",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);t[0]=r*s+u*o,t[1]=i*s+a*o,t[2]=a*s-i*o,t[3]=u*s-r*o}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);t[0]=r*s-a*o,t[1]=i*s+u*o,t[2]=a*s+r*o,t[3]=u*s-i*o}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);t[0]=r*s+i*o,t[1]=i*s-r*o,t[2]=a*s+u*o,t[3]=u*s-a*o}(this,this,t),this.check()}},{key:"scale",value:function(t){return N(this,this,t),this.check()}},{key:"set",value:function(t,e,n,r){return _(this,t,e,n,r),this.check()}},{key:"setAxisAngle",value:function(t,e){return g(this,t,e),this.check()}},{key:"slerp",value:function(t){var e=t.start;return m(this,void 0===e?I:e,t.target,t.ratio),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(f.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(f.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(f.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(f.a)(t)}}]),e}(h.a),F={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},B={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function q(t){if(!t._animation){var e=B[t.componentType],n=F[t.type],r=n*t.count,i=t.bufferView.data,a=new e(i.buffer,i.byteOffset+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(a);else{for(var u=[],o=0;o<a.length;o+=n)u.push(Array.from(a.slice(o,o+n)));t._animation=u}}return t._animation}var U=new a.a;var D=new V;function H(t,e,n,r){var i=e.input,a=e.interpolation,o=e.output,s=t%i[i.length-1],c=i.findIndex(function(t){return t>=s}),h=Math.max(0,c-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:u.C.warn("Bad animation path ".concat(r))()}Object(u.t)(n[r].length===o[h].length);var f=i[h],l=i[c];switch(a){case"STEP":!function(t,e,n){for(var r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,o[h]);break;case"LINEAR":if(l>f){var v=(s-f)/(l-f);!function(t,e,n,r,i){if("rotation"===e){D.slerp({start:n,target:r,ratio:i});for(var a=0;a<D.length;a++)t[e][a]=D[a]}else for(var u=0;u<n.length;u++)t[e][u]=i*r[u]+(1-i)*n[u]}(n,r,o[h],o[c],v)}break;case"CUBICSPLINE":if(l>f){var d=(s-f)/(l-f),y=l-f;!function(t,e,n){for(var r=n.p0,i=n.outTangent0,a=n.inTangent1,u=n.p1,o=n.tDiff,s=n.ratio,c=0;c<t[e].length;c++){var h=i[c]*o,f=a[c]*o;t[e][c]=(2*Math.pow(s,3)-3*Math.pow(s,2)+1)*r[c]+(Math.pow(s,3)-2*Math.pow(s,2)+s)*h+(-2*Math.pow(s,3)+3*Math.pow(s,2))*u[c]+(Math.pow(s,3)-Math.pow(s,2))*f}}(n,r,{p0:o[3*h+1],outTangent0:o[3*h+2],inTangent1:o[3*c+0],p1:o[3*c+1],tDiff:y,ratio:d})}break;default:u.C.warn("Interpolation ".concat(a," not supported"))()}}var G=function(){function t(e){Object(r.a)(this,t),this.startTime=0,this.playing=!0,this.speed=1,Object.assign(this,e)}return Object(i.a)(t,[{key:"animate",value:function(t){if(this.playing){var e=(t/1e3-this.startTime)*this.speed;this.channels.forEach(function(t){var n=t.sampler,r=t.target,i=t.path;H(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){var n=U.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)})}}}]),t}(),X=function(){function t(e){Object(r.a)(this,t),this.animations=e.animations.map(function(t,n){var r=t.name||"Animation-".concat(n),i=t.samplers.map(function(t){var n=t.input,r=t.interpolation,i=void 0===r?"LINEAR":r,a=t.output;return{input:q(e.accessors[n]),interpolation:i,output:q(e.accessors[a])}}),a=t.channels.map(function(t){var n=t.sampler,r=t.target;return{sampler:i[n],target:e.nodes[r.node],path:r.path}});return new G({name:r,channels:a})})}return Object(i.a)(t,[{key:"animate",value:function(t){this.setTime(t)}},{key:"setTime",value:function(t){this.animations.forEach(function(e){return e.animate(t)})}},{key:"getAnimations",value:function(){return this.animations}}]),t}(),Y=n(249),z=n(209),Q=function(){function t(e,n){var i=n.attributes,a=n.material,u=n.pbrDebug,o=n.imageBasedLightingEnvironment,s=n.lights,c=n.useTangents;Object(r.a)(this,t),this.gl=e,this.defines={USE_TEX_LOD:1,MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),u&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(u,"PBR_DEBUG"),a&&this.parseMaterial(a)}return Object(i.a)(t,[{key:"defineIfPresent",value:function(t,e){t&&(this.defines[e]=1)}},{key:"parseTexture",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},i=new u.o(this.gl,{id:t.name||t.id,parameters:r,pixelStore:Object(z.a)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1),data:t.texture.source.getImageAsync()});this.uniforms[e]=i,this.defineIfPresent(n,n),this.generatedTextures.push(i)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var e=t.metallicFactor,n=void 0===e?1:e,r=t.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[n,i]}},{key:"parseMaterial",value:function(t){if(t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var e=t.normalTexture.scale,n=void 0===e?1:e;this.uniforms.u_NormalScale=n}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=t.occlusionTexture.strength,i=void 0===r?1:r;this.uniforms.u_OcclusionStrength=i}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){var a=t.alphaCutoff,o=void 0===a?.5:a;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=o}else"BLEND"===t.alphaMode&&(u.C.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),t}(),Z="\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n",J="\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n";function K(t,e){return Object(u.A)(t)?"#version 300 es\n".concat(e):e}var W={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},tt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.options=Object.assign({},$,n)}return Object(i.a)(t,[{key:"instantiate",value:function(t){var e=this;return this.gltf=t,(t.scenes||[]).map(function(t){return e.createScene(t)})}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new X(this.gltf):null}},{key:"createScene",value:function(t){var e=this,n=(t.nodes||[]).map(function(t){return e.createNode(t)});return new u.i({id:t.name||t.id,children:n})}},{key:"createNode",value:function(t){var e=this;if(!t._node){var n=(t.children||[]).map(function(t){return e.createNode(t)});t.mesh&&n.push(this.createMesh(t.mesh));var r=new u.i({id:t.name||t.id,children:n});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var i=(new a.a).fromQuaternion(t.rotation);r.matrix.multiplyRight(i)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}},{key:"createMesh",value:function(t){var e=this;if(!t._mesh){var n=(t.primitives||[]).map(function(n,r){return e.createPrimitive(n,r,t)}),r=new u.i({id:t.name||t.id,children:n});t._mesh=r}return t._mesh}},{key:"getVertexCount",value:function(t){u.C.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(t,e,n){return function(t,e){var n=e.id,r=e.drawMode,i=e.vertexCount,a=e.attributes,o=e.modelOptions,s=new Q(t,e);u.C.info(4,"createGLTFModel defines: ",s.defines)();var c=[];c.push.apply(c,Object(Y.a)(s.generatedTextures)),c.push.apply(c,Object(Y.a)(Object.values(a).map(function(t){return t.buffer})));var h=new u.k(t,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[u.E],defines:s.defines,parameters:s.parameters,vs:K(t,Z),fs:K(t,J),managedResources:c},o));return h.setProps({attributes:a}),h.setUniforms(s.uniforms),h}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}},{key:"createAttributes",value:function(t,e){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n.createAccessor(t[e],n.createBuffer(t[e],n.gl.ARRAY_BUFFER))}),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),u.C.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}},{key:"createBuffer",value:function(t,e){t.bufferView||(t.bufferView={});var n=t.bufferView;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new u.c(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}},{key:"createAccessor",value:function(t,e){return new u.r({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:W[t.type]})}},{key:"createSampler",value:function(t){return t}},{key:"needsPOT",value:function(){return!1}}]),t}();function et(t,e,n){var r=new tt(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}n.d(e,"a",function(){return et})},441:function(t,e,n){"use strict";var r=n(216),i=n(249),a=n(203),u=n(204),o=n(206),s=n(205),c=n(207),h=n(316),f=n(277),l=n(343),v=n(342),d=n(344),y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(a.a)(this,e),t=Object(o.a)(this,Object(s.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,u),t}return Object(c.a)(e,t),Object(u.a)(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(f.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(f.a)(t)}}]),e}(n(315).a),g=n(283);function k(t,e,n){var r=e[0],i=e[1],a=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],f=e[8],l=e[9],v=e[10],d=e[11],y=e[12],g=e[13],k=e[14],m=e[15],p=n[0],E=n[1],M=n[2],b=n[3];return t[0]=p*r+E*o+M*f+b*y,t[1]=p*i+E*s+M*l+b*g,t[2]=p*a+E*c+M*v+b*k,t[3]=p*u+E*h+M*d+b*m,p=n[4],E=n[5],M=n[6],b=n[7],t[4]=p*r+E*o+M*f+b*y,t[5]=p*i+E*s+M*l+b*g,t[6]=p*a+E*c+M*v+b*k,t[7]=p*u+E*h+M*d+b*m,p=n[8],E=n[9],M=n[10],b=n[11],t[8]=p*r+E*o+M*f+b*y,t[9]=p*i+E*s+M*l+b*g,t[10]=p*a+E*c+M*v+b*k,t[11]=p*u+E*h+M*d+b*m,p=n[12],E=n[13],M=n[14],b=n[15],t[12]=p*r+E*o+M*f+b*y,t[13]=p*i+E*s+M*l+b*g,t[14]=p*a+E*c+M*v+b*k,t[15]=p*u+E*h+M*d+b*m,t}function m(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var p=n(314),E=n(284);function M(t,e,n){var r=e[0],i=e[1],a=e[2],u=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*u,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*u,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*u,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*u,t}var b,A;b=new g.a(4),g.a!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),A=b;n.d(e,"a",function(){return S});var O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var S=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Object(a.a)(this,e),t=Object(o.a)(this,Object(s.a)(e).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return Object(c.a)(e,t),Object(u.a)(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,l=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=s,this[3]=l,this[4]=e,this[5]=a,this[6]=c,this[7]=v,this[8]=n,this[9]=u,this[10]=h,this[11]=d,this[12]=r,this[13]=o,this[14]=f,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,l=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=u,this[7]=o,this[8]=s,this[9]=c,this[10]=h,this[11]=f,this[12]=l,this[13]=v,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,Object(i.a)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[t][e]=Object(f.a)(n):this[e][t]=Object(f.a)(n),this}},{key:"determinant",value:function(){return e=(t=this)[0],n=t[1],r=t[2],i=t[3],a=t[4],u=t[5],o=t[6],s=t[7],c=t[8],h=t[9],f=t[10],l=t[11],v=t[12],d=t[13],y=t[14],g=t[15],(e*u-n*a)*(f*g-l*y)-(e*o-r*a)*(h*g-l*d)+(e*s-i*a)*(h*y-f*d)+(n*o-r*u)*(c*g-l*v)-(n*s-i*u)*(c*y-f*v)+(r*s-i*o)*(c*d-h*v);var t,e,n,r,i,a,u,o,s,c,h,f,l,v,d,y,g}},{key:"identity",value:function(){return this.copy(O)}},{key:"fromQuaternion",value:function(t){return function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],u=n+n,o=r+r,s=i+i,c=n*u,h=r*u,f=r*o,l=i*u,v=i*o,d=i*s,y=a*u,g=a*o,k=a*s;t[0]=1-f-d,t[1]=h+k,t[2]=l-g,t[3]=0,t[4]=h-k,t[5]=1-c-d,t[6]=v+y,t[7]=0,t[8]=l+g,t[9]=v-y,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}},{key:"frustum",value:function(t){return function(t,e,n,r,i,a,u){var o=1/(n-e),s=1/(i-r),c=1/(a-u);t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(i+r)*s,t[10]=(u+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*a*2*c,t[15]=0}(this,t.left,t.right,t.bottom,t.top,t.near,t.far),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up;return function(t,e,n,r){var i,a,u,o,s,c,h,f,l,v,d=e[0],y=e[1],k=e[2],m=r[0],p=r[1],E=r[2],M=n[0],b=n[1],A=n[2];Math.abs(d-M)<g.b&&Math.abs(y-b)<g.b&&Math.abs(k-A)<g.b?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(h=d-M,f=y-b,l=k-A,i=p*(l*=v=1/Math.sqrt(h*h+f*f+l*l))-E*(f*=v),a=E*(h*=v)-m*l,u=m*f-p*h,(v=Math.sqrt(i*i+a*a+u*u))?(i*=v=1/v,a*=v,u*=v):(i=0,a=0,u=0),o=f*u-l*a,s=l*i-h*u,c=h*a-f*i,(v=Math.sqrt(o*o+s*s+c*c))?(o*=v=1/v,s*=v,c*=v):(o=0,s=0,c=0),t[0]=i,t[1]=o,t[2]=h,t[3]=0,t[4]=a,t[5]=s,t[6]=f,t[7]=0,t[8]=u,t[9]=c,t[10]=l,t[11]=0,t[12]=-(i*d+a*y+u*k),t[13]=-(o*d+s*y+c*k),t[14]=-(h*d+f*y+l*k),t[15]=1)}(this,e,r,void 0===i?[0,1,0]:i),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,a=t.near,u=void 0===a?.1:a,o=t.far;return function(t,e,n,r,i,a,u){var o=1/(e-n),s=1/(r-i),c=1/(a-u);t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*o,t[13]=(i+r)*s,t[14]=(u+a)*c,t[15]=1}(this,e,n,r,i,u,void 0===o?500:o),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,a=void 0===i?1:i,u=t.focalDistance,o=void 0===u?1:u,s=t.near,c=void 0===s?.1:s,h=t.far,f=void 0===h?500:h;if(r>2*Math.PI)throw Error("radians");var l=r/2,v=o*Math.tan(l),d=v*a;return(new e).ortho({left:-d,right:d,bottom:-v,top:v,near:c,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,a=void 0===i?1:i,u=t.near,o=void 0===u?.1:u,s=t.far,c=void 0===s?500:s;if((e=e||r)>2*Math.PI)throw Error("radians");return function(t,e,n,r,i){var a,u=1/Math.tan(e/2);t[0]=u/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r)}(this,e,a,o,c),this.check()}},{key:"transpose",value:function(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}},{key:"invert",value:function(){return function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8],f=e[9],l=e[10],v=e[11],d=e[12],y=e[13],g=e[14],k=e[15],m=n*o-r*u,p=n*s-i*u,E=n*c-a*u,M=r*s-i*o,b=r*c-a*o,A=i*c-a*s,O=h*y-f*d,S=h*g-l*d,T=h*k-v*d,_=f*g-l*y,w=f*k-v*y,N=l*k-v*g,j=m*N-p*w+E*_+M*T-b*S+A*O;j&&(j=1/j,t[0]=(o*N-s*w+c*_)*j,t[1]=(i*w-r*N-a*_)*j,t[2]=(y*A-g*b+k*M)*j,t[3]=(l*b-f*A-v*M)*j,t[4]=(s*T-u*N-c*S)*j,t[5]=(n*N-i*T+a*S)*j,t[6]=(g*E-d*A-k*p)*j,t[7]=(h*A-l*E+v*p)*j,t[8]=(u*w-o*T+c*O)*j,t[9]=(r*T-n*w-a*O)*j,t[10]=(d*b-y*E+k*m)*j,t[11]=(f*E-h*b-v*m)*j,t[12]=(o*S-u*_-s*O)*j,t[13]=(n*_-r*S+i*O)*j,t[14]=(y*p-d*M-g*m)*j,t[15]=(h*M-f*p+l*m)*j)}(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return k(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return k(this,this,t),this.check()}},{key:"rotateX",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],u=e[5],o=e[6],s=e[7],c=e[8],h=e[9],f=e[10],l=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=u*i+h*r,t[6]=o*i+f*r,t[7]=s*i+l*r,t[8]=c*i-a*r,t[9]=h*i-u*r,t[10]=f*i-o*r,t[11]=l*i-s*r}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],u=e[1],o=e[2],s=e[3],c=e[8],h=e[9],f=e[10],l=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=u*i-h*r,t[2]=o*i-f*r,t[3]=s*i-l*r,t[8]=a*r+c*i,t[9]=u*r+h*i,t[10]=o*r+f*i,t[11]=s*r+l*i}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],u=e[1],o=e[2],s=e[3],c=e[4],h=e[5],f=e[6],l=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=u*i+h*r,t[2]=o*i+f*r,t[3]=s*i+l*r,t[4]=c*i-a*r,t[5]=h*i-u*r,t[6]=f*i-o*r,t[7]=l*i-s*r}(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(t,e){return function(t,e,n,r){var i,a,u,o,s,c,h,f,l,v,d,y,k,m,p,E,M,b,A,O,S,T,_,w,N=r[0],j=r[1],L=r[2],x=Math.sqrt(N*N+j*j+L*L);x<g.b||(N*=x=1/x,j*=x,L*=x,i=Math.sin(n),u=1-(a=Math.cos(n)),o=e[0],s=e[1],c=e[2],h=e[3],f=e[4],l=e[5],v=e[6],d=e[7],y=e[8],k=e[9],m=e[10],p=e[11],E=N*N*u+a,M=j*N*u+L*i,b=L*N*u-j*i,A=N*j*u-L*i,O=j*j*u+a,S=L*j*u+N*i,T=N*L*u+j*i,_=j*L*u-N*i,w=L*L*u+a,t[0]=o*E+f*M+y*b,t[1]=s*E+l*M+k*b,t[2]=c*E+v*M+m*b,t[3]=h*E+d*M+p*b,t[4]=o*A+f*O+y*S,t[5]=s*A+l*O+k*S,t[6]=c*A+v*O+m*S,t[7]=h*A+d*O+p*S,t[8]=o*T+f*_+y*w,t[9]=s*T+l*_+k*w,t[10]=c*T+v*_+m*w,t[11]=h*T+d*_+p*w,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?m(this,this,t):m(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return function(t,e,n){var r,i,a,u,o,s,c,h,f,l,v,d,y=n[0],g=n[1],k=n[2];e===t?(t[12]=e[0]*y+e[4]*g+e[8]*k+e[12],t[13]=e[1]*y+e[5]*g+e[9]*k+e[13],t[14]=e[2]*y+e[6]*g+e[10]*k+e[14],t[15]=e[3]*y+e[7]*g+e[11]*k+e[15]):(r=e[0],i=e[1],a=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],f=e[8],l=e[9],v=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=u,t[4]=o,t[5]=s,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=v,t[11]=d,t[12]=r*y+o*g+f*k+e[12],t[13]=i*y+s*g+l*k+e[13],t[14]=a*y+c*g+v*k+e[14],t[15]=u*y+h*g+d*k+e[15])}(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new v.a,p.c(e,t,this),Object(l.a)(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new d.a,E.l(e,t,this),Object(l.a)(e,3),e}},{key:"transformVector4",value:function(t,e){return M(e=e||new y,t,this),Object(l.a)(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:M(e=e||new v.a,[t[0],t[1],0,n],this),e.length=2,Object(l.a)(e,2);break;case 3:M(e=e||new d.a,[t[0],t[1],t[2],n],this),e.length=3,Object(l.a)(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");M(e=e||new y,t,this),Object(l.a)(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(h.a)}}]);