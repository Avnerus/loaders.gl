(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{281:function(e,t,n){"use strict";n.r(t);n(15),n(3),n(39),n(2);var r=n(292),i=n.n(r),a=(n(293),n(0)),o=n.n(a),s=n(94),u=n(543),c=n(562),l=n(411),h=n(497),f=(n(343),n(10),n(7),n(4),n(5),n(321),n(129),n(370),n(457)),d=n(554),p=n(352),y=n(565),m=n(563),v=n(544),_=n(521),g=n(522),b=n(523),T=n(524),w=n.n(T),x=(n(288),n(130),n(448)),E=n.n(x),S=n(525),O=n.n(S),A=n(526);function I(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){I(a,r,i,o,s,"next",e)}function s(e){I(a,r,i,o,s,"throw",e)}o(void 0)})}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(e,t){this.url=e,this.options=t,this.bodyUsed=!1,this._headers=null}var t,n,r,a=e.prototype;return a.arrayBuffer=function(){var e=k(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.bodyUsed=!0,e.abrupt("return",Object(A.b)(this.url,this.options));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.text=function(){var e=k(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.arrayBuffer();case 2:return t=e.sent,n=new TextDecoder,e.abrupt("return",n.decode(t));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.json=function(){var e=k(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._getHeaders=function(){var e={};if(this.httpResponse){var t=this.httpResponse.getHeaders();for(var n in t){var r=e[n];e[n]=String(r)}}else{var i=this._getContentLength();Number.isFinite(i)&&(e["Content-Length"]=i)}return new O.a(e)},a._getContentLength=function(){return(e=this.url).startsWith("http:")||e.startsWith("https:")?null:function(e){return e.startsWith("data:")}(this.url)?this.url.length-"data:".length:E.a.statSync(this.url).size;var e},t=e,(n=[{key:"headers",get:function(){this._headers=this._headers||this._getHeaders()}},{key:"body",get:function(){var e=this.url,t=this.options;return this.bodyUsed=!0,Object(A.a)(e,t)}}])&&L(t.prototype,n),r&&L(t,r),e}(),C=n(533),N=n.n(C),D=n(534),U=n(535);"TextEncoder"in _.a||!g.b||(_.a.TextEncoder=g.b),"TextDecoder"in _.a||!g.a||(_.a.TextDecoder=g.a),_.b||"atob"in _.a||!b.atob||(_.a.atob=b.atob),_.b||"btoa"in _.a||!b.btoa||(_.a.btoa=b.btoa),_.b||"Headers"in _.a||!w.a||(_.a.Headers=w.a),_.b||"Response"in _.a||!P||(_.a.Respone=P),_.b||"fetch"in _.a||!N.a||(_.a.fetch=N.a),_.b||"_encodeImageNode"in _.a||!D.encodeImageNode||(_.a._encodeImageNode=D.encodeImageNode),_.b||"_parseImageNode"in _.a||!U.parseImageNode||(_.a._parseImageNode=U.parseImageNode);var B=n(330),R=n(312),M=n(374),F=n(378),j=(n(9),{COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"}),V=(Object.keys(j),{UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5}),G={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},H=0,q=1,z=(n(289),n(317));function J(e,t,n){Object(z.a)(e instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(e,t,n);return r.decode(i)}function W(e,t){void 0===t&&(t=0);var n=new DataView(e);return""+String.fromCharCode(n.getUint8(t+0))+String.fromCharCode(n.getUint8(t+1))+String.fromCharCode(n.getUint8(t+2))+String.fromCharCode(n.getUint8(t+3))}var Y,Z={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Q=Object.assign({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},{},Z),K=n(372),X=(n(308),n(315),n(316),n(304),n(302),n(291),n(362),(Y={})[Z.DOUBLE]=Float64Array,Y[Z.FLOAT]=Float32Array,Y[Z.UNSIGNED_SHORT]=Uint16Array,Y[Z.UNSIGNED_INT]=Uint32Array,Y[Z.UNSIGNED_BYTE]=Uint8Array,Y[Z.BYTE]=Int8Array,Y[Z.SHORT]=Int16Array,Y[Z.INT]=Int32Array,Y),$={DOUBLE:Z.DOUBLE,FLOAT:Z.FLOAT,UNSIGNED_SHORT:Z.UNSIGNED_SHORT,UNSIGNED_INT:Z.UNSIGNED_INT,UNSIGNED_BYTE:Z.UNSIGNED_BYTE,BYTE:Z.BYTE,SHORT:Z.SHORT,INT:Z.INT},ee=function(){function e(){}return e.fromTypedArray=function(e){for(var t in e=ArrayBuffer.isView(e)?e.constructor:e,X){if(X[t]===e)return t}throw new Error("Failed to convert GL type")},e.fromName=function(e){var t=$[e];if(!t)throw new Error("Failed to convert GL type");return t},e.getArrayType=function(e,t){switch(void 0===t&&(t=!1),e){case Z.UNSIGNED_SHORT_5_6_5:case Z.UNSIGNED_SHORT_4_4_4_4:case Z.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var n=X[e];if(!n)throw new Error("Failed to convert GL type");return n}},e.getByteSize=function(t){return e.getArrayType(t).BYTES_PER_ELEMENT},e.validate=function(t){return Boolean(e.getArrayType(t))},e.createTypedArray=function(t,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=(n.byteLength-r)/e.getByteSize(t)),new(e.getArrayType(t))(n,r,i)},e}(),te=function(){function e(e,t){this.json=e,this.buffer=t,this.featuresLength=0,this._cachedTypedArrays={}}var t=e.prototype;return t.getExtension=function(e){return this.json.extensions&&this.json.extensions[e]},t.hasProperty=function(e){return Boolean(this.json[e])},t.getGlobalProperty=function(e,t,n){void 0===t&&(t=Q.UNSIGNED_INT),void 0===n&&(n=1);var r=this.json[e];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(e,t,n,1,r.byteOffset):r},t.getPropertyArray=function(e,t,n){var r=this.json[e];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(t=ee.fromName(r.componentType)),this._getTypedArrayFromBinary(e,t,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(e,t,r)},t.getProperty=function(e,t,n,r,i){var a=this.json[e];if(!a)return a;var o=this.getPropertyArray(e,t,n);if(1===n)return o[r];for(var s=0;s<n;++s)i[s]=o[n*r+s];return i},t._getTypedArrayFromBinary=function(e,t,n,r,i){var a=this._cachedTypedArrays,o=a[e];return o||(o=ee.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+i,r*n),a[e]=o),o},t._getTypedArrayFromArray=function(e,t,n){var r=this._cachedTypedArrays,i=r[e];return i||(i=ee.createTypedArray(t,n),r[e]=i),i},e}();n(73),n(131),n(40);function ne(e,t){if(!e)throw new Error(t||"3d-tile loader: assertion failed.")}var re={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ie={SCALAR:function(e,t){return e[t]},VEC2:function(e,t){return[e[2*t+0],e[2*t+1]]},VEC3:function(e,t){return[e[3*t+0],e[3*t+1],e[3*t+2]]},VEC4:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT2:function(e,t){return[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]]},MAT3:function(e,t){return[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]]},MAT4:function(e,t){return[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]}},ae={SCALAR:function(e,t,n){t[n]=e},VEC2:function(e,t,n){t[2*n+0]=e[0],t[2*n+1]=e[1]},VEC3:function(e,t,n){t[3*n+0]=e[0],t[3*n+1]=e[1],t[3*n+2]=e[2]},VEC4:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT2:function(e,t,n){t[4*n+0]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]},MAT3:function(e,t,n){t[9*n+0]=e[0],t[9*n+1]=e[1],t[9*n+2]=e[2],t[9*n+3]=e[3],t[9*n+4]=e[4],t[9*n+5]=e[5],t[9*n+6]=e[6],t[9*n+7]=e[7],t[9*n+8]=e[8],t[9*n+9]=e[9]},MAT4:function(e,t,n){t[16*n+0]=e[0],t[16*n+1]=e[1],t[16*n+2]=e[2],t[16*n+3]=e[3],t[16*n+4]=e[4],t[16*n+5]=e[5],t[16*n+6]=e[6],t[16*n+7]=e[7],t[16*n+8]=e[8],t[16*n+9]=e[9],t[16*n+10]=e[10],t[16*n+11]=e[11],t[16*n+12]=e[12],t[16*n+13]=e[13],t[16*n+14]=e[14],t[16*n+15]=e[15]}};n(345);function oe(e){throw new Error('"'+e+'" is read-only')}var se=function(e){return void 0!==e};function ue(e,t,n){if(!t)return null;var r=e.getExtension("3DTILES_batch_table_hierarchy"),i=t.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(e,t){var n,r,i,a,o=e.instancesLength,s=e.classes,u=e.classIds,c=e.parentCounts,l=e.parentIds,h=o;se(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),oe("classIds"),u=i.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,o));if(se(c))for(se(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),oe("parentCounts"),c=i.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,o)),a=new Uint16Array(o),oe("parentIdsLength"),h=0,n=0;n<o;++n)a[n]=h,h+=(oe("parentIdsLength"),c[n]);se(l)&&se(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),oe("parentIds"),l=i.createArrayBufferView(t.buffer,t.byteOffset+l.byteOffset,h));var f=s.length;for(n=0;n<f;++n){var d=s[n].length,p=s[n].instances,y=getBinaryProperties(d,p,t);s[n].instances=combine(y,p)}var m=new Array(f).fill(0),v=new Uint16Array(o);for(n=0;n<o;++n)r=u[n],v[n]=m[r],++m[r];var _={classes:s,classIds:u,classIndexes:v,parentCounts:c,parentIndexes:a,parentIds:l};return function(e){for(var t=e.classIds.length,n=0;n<t;++n)le(e,n,stack)}(_),_}(r,n):null}function ce(e,t,n){if(e){var r=e.parentCounts;return e.parentIds?n(e,t):r>0?function(e,t,n){var r=e.classIds,i=e.parentCounts,a=e.parentIds,o=e.parentIndexes,s=r.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,l=scratchStack;l.length=0,l.push(t);for(;l.length>0;)if(t=l.pop(),u[t]!==c){u[t]=c;var h=n(e,t);if(se(h))return h;for(var f=i[t],d=o[t],p=0;p<f;++p){var y=a[d+p];y!==t&&l.push(y)}}return null}(e,t,n):function(e,t,n){var r=!0;for(;r;){var i=n(e,t);if(se(i))return i;var a=e.parentIds[t];r=a!==t,t=a}throw new Error("traverseHierarchySingleParent")}(e,t,n)}}function le(e,t,n){var r=e.parentCounts,i=e.parentIds,a=e.parentIndexes,o=e.classIds.length;if(se(i)){assert(t<o,"Parent index "+t+" exceeds the total number of instances: "+o),assert(-1===n.indexOf(t),"Circular dependency detected in the batch table hierarchy."),n.push(t);for(var s=se(r)?r[t]:1,u=se(r)?a[t]:t,c=0;c<s;++c){var l=i[u+c];l!==t&&le(e,l,n)}n.pop(t)}}function he(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var fe=function(e){return void 0!==e},de=function(e){return e},pe={HIERARCHY:!0,extensions:!0,extras:!0},ye=function(){function e(e,t,n,r){for(var i in void 0===r&&(r={}),ne(n>=0),this.json=e||{},this.binary=t,this.featureCount=n,this._extensions=this.json&&this.json.extensions||{},this._properties={},this.json)pe[i]||(this._properties[i]=this.json[i]);this._binaryProperties=this._initializeBinaryProperties(),r["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=ue(this,this.json,this.binary))}var t=e.prototype;return t.getExtension=function(e){return this.json&&this.json.extensions&&this.json.extensions[e]},t.memorySizeInBytes=function(){return 0},t.isClass=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._hierarchy){var n=ce(this._hierarchy,e,function(e,n){var r=e.classIds[n];return e.classes[r].name===t});return fe(n)}return!1},t.isExactClass=function(e,t){return ne("string"==typeof t,t),this.getExactClassName(e)===t},t.getExactClassName=function(e){if(this._checkBatchId(e),this._hierarchy){var t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}},t.hasProperty=function(e,t){return this._checkBatchId(e),ne("string"==typeof t,t),fe(this._properties[t])||this._hasPropertyInHierarchy(e,t)},t.getPropertyNames=function(e,t){var n;this._checkBatchId(e),(t=fe(t)?t:[]).length=0;var r=Object.keys(this._properties);return(n=t).push.apply(n,he(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t},t.getProperty=function(e,t){if(this._checkBatchId(e),ne("string"==typeof t,t),this._binaryProperties){var n=this._binaryProperties[t];if(fe(n))return this._getBinaryProperty(n,e)}var r=this._properties[t];if(fe(r))return de(r[e]);if(this._hierarchy){var i=this._getHierarchyProperty(e,t);if(fe(i))return i}},t.setProperty=function(e,t,n){var r=this.featureCount;if(this._checkBatchId(e,r),ne("string"==typeof t,t),this._binaryProperties){var i=this._binaryProperties[t];if(i)return void this._setBinaryProperty(i,e,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,e,t,n)){var a=this._properties[t];fe(a)||(this._properties[t]=new Array(r),a=this._properties[t]),a[e]=de(n)}},t._checkBatchId=function(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")},t._getBinaryProperty=function(e,t){return e.unpack(e.typedArray,t)},t._setBinaryProperty=function(e,t,n){e.pack(n,e.typedArray,t)},t._initializeBinaryProperties=function(){var e=null;for(var t in this._properties){var n=this._properties[t],r=this._initializeBinaryProperty(t,n);r&&((e=e||{})[t]=r)}return e},t._initializeBinaryProperty=function(e,t){if("byteOffset"in t){var n=t;ne(this.binary,"Property "+e+" requires a batch table binary."),ne(n.type,"Property "+e+" requires a type.");var r=function(e,t,n,r){var i=e.componentType;ne(e.componentType);var a="string"==typeof i?ee.fromName(i):i,o=re[e.type],s=ie[e.type],u=ae[e.type];return n+=e.byteOffset,{values:ee.createTypedArray(a,t,n,o*r),type:a,size:o,unpacker:s,packer:u}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null},t._hasPropertyInHierarchy=function(e,t){if(!this._hierarchy)return!1;var n=ce(this._hierarchy,e,function(e,n){var r=e.classIds[n],i=e.classes[r].instances;return fe(i[t])});return fe(n)},t._getPropertyNamesInHierarchy=function(e,t){ce(this._hierarchy,e,function(e,n){var r=e.classIds[n],i=e.classes[r].instances;for(var a in i)i.hasOwnProperty(a)&&-1===t.indexOf(a)&&t.push(a)})},t._getHierarchyProperty=function(e,t){var n=this;return ce(this._hierarchy,e,function(e,r){var i=e.classIds[r],a=e.classes[i],o=e.classIndexes[r],s=a.instances[t];return fe(s)?fe(s.typedArray)?n._getBinaryProperty(s,o):de(s[o]):null})},t._setHierarchyProperty=function(e,t,n,r){var i=this,a=ce(this._hierarchy,t,function(e,a){var o=e.classIds[a],s=e.classes[o],u=e.classIndexes[a],c=s.instances[n];return!!fe(c)&&(ne(a===t,'Inherited property "'+n+'" is read-only.'),fe(c.typedArray)?i._setBinaryProperty(c,u,r):c[u]=de(r),!0)});return fe(a)},e}(),me=4;function ve(e,t,n){void 0===n&&(n=0);var r=new DataView(t);if(e.magic=r.getUint32(n,!0),n+=me,e.version=r.getUint32(n,!0),n+=me,e.byteLength=r.getUint32(n,!0),n+=me,1!==e.version)throw new Error("3D Tile Version "+e.version+" not supported");return n}var _e=4;function ge(e,t,n){var r=new DataView(t);return e.featureTableJsonByteLength=r.getUint32(n,!0),n+=_e,e.featureTableBinaryByteLength=r.getUint32(n,!0),n+=_e,e.batchTableJsonByteLength=r.getUint32(n,!0),n+=_e,e.batchTableBinaryByteLength=r.getUint32(n,!0),n+=_e}function be(e,t,n,r){return n=function(e,t,n,r){var i=e.featureTableJsonByteLength,a=e.featureTableBinaryByteLength;if(e.featureTableJson={BATCH_LENGTH:0},i>0){var o=J(t,n,i);e.featureTableJson=JSON.parse(o)}return n+=i,e.featureTableBinary=new Uint8Array(t,n,a),n+=a}(e,t,n),n=function(e,t,n,r){var i=e.batchTableJsonByteLength,a=e.batchTableBinaryByteLength;if(i>0){var o=J(t,n,i);e.batchTableJson=JSON.parse(o),n+=i,a>0&&(e.batchTableBinary=new Uint8Array(t,n,a),e.batchTableBinary=new Uint8Array(e.batchTableBinary),n+=a)}return n}(e,t,n)}function Te(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function we(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Te(a,r,i,o,s,"next",e)}function s(e){Te(a,r,i,o,s,"throw",e)}o(void 0)})}}function xe(e,t,n,r){return Ee.apply(this,arguments)}function Ee(){return(Ee=we(i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ve(t,n,r),r=ge(t,n,r),r=be(t,n,r),e.next=5,Oe(t,a);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Se(e,t,n,r){return n=be(e,t,n=ge(e,t,n=ve(e,t,n))),function(e){var t=Ie(e).featureTable;ke(e,t),Le(e,t),Pe(e,t)}(e),n}function Oe(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=we(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie(t),a=r.featureTable,o=r.batchTable,e.next=3,Ce(t,a,o,n);case 3:ke(t,a),Le(t,a),Pe(t,a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(e){var t=new te(e.featureTableJson,e.featureTableBinary),n=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");t.featuresLength=n,e.featuresLength=n,e.pointsLength=n,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",Q.FLOAT,3),e.positions=null,e.colors=null,e.normals=null,e.batchIds=null,e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1;var r=function(e,t){var n=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",Q.UNSIGNED_SHORT,1),e.batchIds)){var r=t.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=e.batchTableJson,a=e.batchTableBinary;n=new ye(i,a,r)}return n}(e,t);return{featureTable:t,batchTable:r}}function ke(e,t){if(!e.positions)if(t.hasProperty("POSITION"))e.positions=t.getPropertyArray("POSITION",Q.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){if(e.positions=t.getPropertyArray("POSITION_QUANTIZED",Q.UNSIGNED_SHORT,3),e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Q.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Q.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.")}if(!e.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function Le(e,t){e.colors||(t.hasProperty("RGBA")?(e.colors=t.getPropertyArray("RGBA",Q.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?e.colors=t.getPropertyArray("RGB",Q.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(e.colors=t.getPropertyArray("RGB565",Q.UNSIGNED_SHORT,1),e.isRGB565=!0)),t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",Q.UNSIGNED_BYTE,4))}function Pe(e,t){e.normals||(t.hasProperty("NORMAL")?e.normals=t.getPropertyArray("NORMAL",Q.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(e.normals=t.getPropertyArray("NORMAL_OCT16P",Q.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0))}function Ce(e,t,n,r){return Ne.apply(this,arguments)}function Ne(){return(Ne=we(i.a.mark(function e(t,n,r,a){var o,s,u,c,l,h,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((c=r&&r.getExtension("3DTILES_draco_point_compression"))&&(u=c.properties),!(l=n.getExtension("3DTILES_draco_point_compression"))){e.next=15;break}if(s=l.properties,h=l.byteOffset,f=l.byteLength,s&&Number.isFinite(h)&&f){e.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:o=t.featureTableBinary.slice(h,h+f),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA);case 15:if(!o){e.next=19;break}return t.draco={buffer:o,properties:Object.assign({},s,{},u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},e.next=19,De(t,a);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function De(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=we(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,f,d,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.draco)||!r.buffer){e.next=23;break}if(a=null,!n.DracoLoader){e.next=9;break}return e.next=6,Object(R.a)(r.buffer,n.DracoLoader);case 6:a=e.sent,e.next=10;break;case 9:a=(new K.a).parseSync(r.buffer);case 10:o=a.attributes.POSITION&&a.attributes.POSITION.value,s=a.attributes.COLOR_0&&a.attributes.COLOR_0.value,u=a.attributes.NORMAL&&a.attributes.NORMAL.value,c=a.attributes.BATCH_ID&&a.attributes.BATCH_ID.value,l=o&&a.attributes.POSITION.value.quantization,f=u&&a.attributes.NORMAL.value.quantization,l&&(d=a.POSITION.data.quantization,p=d.range,t.quantizedVolumeScale=new h.a(p,p,p),t.quantizedVolumeOffset=new h.a(d.minValues),t.quantizedRange=(1<<d.quantizationBits)-1,t.isQuantizedDraco=!0),f&&(t.octEncodedRange=(1<<a.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0),t.positions=o,t.colors=s,t.normals=u,t.batchIds=c,delete t.draco;case 23:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(8);var Be={URI:0,EMBEDDED:1};function Re(e,t,n){var r=e.byteOffset+e.byteLength-n;if(0===r)throw new Error("glTF byte length must be greater than 0.");var i=new Uint8Array(t).subarray(n,n+r),a=new Uint8Array(i);return e.gltfArrayBuffer=a.buffer,e.gltfByteOffset=0,e.gltfByteLength=r,e.byteOffset+e.byteLength}function Me(e,t,n){switch(t){case Be.URI:var r=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),i=(new TextDecoder).decode(r);e.gltfUrl=i.replace(/[\s\0]+$/,"");break;case Be.EMBEDDED:e.gltf={};break;default:throw new Error("i3dm: glTF format "+t+": Must be 0 (uri) or 1 (embedded)")}}function Fe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function je(e,t,n,r){return Ve.apply(this,arguments)}function Ve(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ge(t,n,r,a));case 1:case"end":return e.stop()}},e)}),(Ve=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Fe(a,r,i,o,s,"next",e)}function s(e){Fe(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function Ge(e,t,n,r){n=Re(e,t,n=be(e,t,n=ge(e,t,n=ve(e,t,n))));var i=new te(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=i.getGlobalProperty("RTC_CENTER",Q.FLOAT,3),Me(e,Be.EMBEDDED),n}var He=n(560),qe=n(566);function ze(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Je(e,t,n,r){return We.apply(this,arguments)}function We(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ye(t,n,r,a));case 1:case"end":return e.stop()}},e)}),(We=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){ze(a,r,i,o,s,"next",e)}function s(e){ze(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function Ye(e,t,n,r){if(n=ve(e,t,n),1!==e.version)throw new Error("Instanced 3D Model version "+e.version+" is not supported");n=ge(e,t,n);var i=new DataView(t);if(e.gltfFormat=i.getUint32(n,!0),n=Re(e,t,n=be(e,t,n+=4)),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var a=new te(e.featureTableJson,e.featureTableBinary),o=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=o,!Number.isFinite(o))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=a.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=a.getGlobalProperty("RTC_CENTER",Q.FLOAT,3);new ye(e.batchTableJson,e.batchTableBinary,o);return Me(e,e.gltfFormat),function(e,t,n,r){for(var i=[new Array(r),e._batchTable][0],a=new h.a,o=(new h.a,new h.a,new h.a,new He.a),s=new qe.a,u=new h.a,c={},l=new d.a,f=[],p=[],y=new h.a,m=new h.a,v=0;v<r;v++){var _=void 0;if(t.hasProperty("POSITION"))_=t.getProperty("POSITION",Q.FLOAT,3,v,a);else if(t.hasProperty("POSITION_QUANTIZED")){_=t.getProperty("POSITION_QUANTIZED",Q.UNSIGNED_SHORT,3,v,a);var g=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Q.FLOAT,3,y);if(!g)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var b=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Q.FLOAT,3,m);if(!b)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var T=0;T<3;T++)_[T]=_[T]/65535*b[T]+g[T]}if(!_)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");a.copy(_),e.rtcCenter&&a.add(e.rtcCenter),c.translation=a,e.normalUp=t.getProperty("NORMAL_UP",Q.FLOAT,3,v,f),e.normalRight=t.getProperty("NORMAL_RIGHT",Q.FLOAT,3,v,p);if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=t.getProperty("NORMAL_UP_OCT32P",Q.UNSIGNED_SHORT,2,f),e.octNormalRight=t.getProperty("NORMAL_RIGHT_OCT32P",Q.UNSIGNED_SHORT,2,p),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(F.a.WGS84.eastNorthUpToFixedFrame(a,l),l.getRotation(o)):o.identity()}0,s.fromMatrix3(o),c.rotation=s,u.set(1,1,1);var w=t.getProperty("SCALE",Q.FLOAT,1,v);Number.isFinite(w)&&u.multiplyByScalar(w);var x=t.getProperty("SCALE_NON_UNIFORM",Q.FLOAT,3,v,f);x&&u.scale(x),c.scale=u;var E=t.getProperty("BATCH_ID",Q.UNSIGNED_SHORT,1,v);void 0===E&&(E=v),l.fromQuaternion(c.rotation),l.scale(c.scale),l.translate(c.translation);var S=l.clone();i[v]={modelMatrix:S,batchId:E}}e.instances=i}(e,a,0,o),n}function Ze(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Qe(e,t,n,r,i){return Ke.apply(this,arguments)}function Ke(){var e;return e=i.a.mark(function e(t,n,r,a,o){var s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=ve(t,n,r),s=new DataView(n),t.tilesLength=s.getUint32(r,!0),r+=4,t.tiles=[];case 5:if(!(t.tiles.length<t.tilesLength&&t.byteLength-r>12)){e.next=13;break}return u={},t.tiles.push(u),e.next=10,o(n,r,a,u);case 10:r=e.sent,e.next=5;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e)}),(Ke=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Ze(a,r,i,o,s,"next",e)}function s(e){Ze(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function Xe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function $e(e,t,n,r){return et.apply(this,arguments)}function et(){var e;return e=i.a.mark(function e(t,n,r,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0===n&&(n=0),void 0===r&&(r={}),void 0===a&&(a={}),a.byteOffset=n,a.type=W(t,n),e.t0=a.type,e.next=e.t0===j.COMPOSITE?8:e.t0===j.BATCHED_3D_MODEL?9:e.t0===j.INSTANCED_3D_MODEL?10:e.t0===j.POINT_CLOUD?11:14;break;case 8:return e.abrupt("return",Qe(a,t,n,r,$e));case 9:return e.abrupt("return",je(a,t,n,r));case 10:return e.abrupt("return",Je(a,t,n,r));case 11:return e.next=13,xe(a,t,n,r);case 13:return e.abrupt("return",e.sent);case 14:throw new Error("3DTileLoader: unknown type "+a.type);case 15:case"end":return e.stop()}},e)}),(et=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Xe(a,r,i,o,s,"next",e)}function s(e){Xe(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}function tt(e,t,n,r){switch(void 0===t&&(t=0),void 0===n&&(n={}),void 0===r&&(r={}),r.byteOffset=t,r.type=W(e,t),r.type){case j.COMPOSITE:return function(e,t,n,r,i){n=ve(e,t,n);var a=new DataView(t);for(e.tilesLength=a.getUint32(n,!0),n+=4,e.tiles=[];e.tiles.length<e.tilesLength&&e.byteLength-n>12;){var o={};e.tiles.push(o),n=i(t,n,r,o)}return n}(r,e,t,n,tt);case j.BATCHED_3D_MODEL:return Ge(r,e,t);case j.INSTANCED_3D_MODEL:return Ye(r,e,t);case j.POINT_CLOUD:return Se(r,e,t);default:throw new Error("3DTileLoader: unknown type "+r.type)}}function nt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function rt(){var e;return e=i.a.mark(function e(t,n,r,a){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},0,e.next=4,$e(t,0,n,o);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}),(rt=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){nt(a,r,i,o,s,"next",e)}function s(e){nt(a,r,i,o,s,"throw",e)}o(void 0)})}).apply(this,arguments)}var it={name:"3D Tiles",extensions:["cmpt","pnts","b3dm","i3dm"],mimeType:"application/octet-stream",test:["cmpt","pnts","b3dm","i3dm"],parse:function(e,t,n,r){return rt.apply(this,arguments)},parseSync:function(e,t,n,r){var i={};return tt(e,0,t,i),i},binary:!0},at={name:"3D Tileset",extensions:["json"],testText:function(e){return e.indexOf(!1)},parseTextSync:JSON.parse},ot=(n(334),n(300),n(337)),st=n(545);var ut=function(e){return void 0!==e},ct=(new He.a,new h.a);new He.a,new h.a,new d.a;function lt(e,t,n){if(ne(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,n){var r=new h.a(e[0],e[1],e[2]),i=new He.a(e.slice(3,e.length));if(t.transform(r,r),i=new He.a(t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]).multiplyRight(i),ut(n))return n.center=r,n.halfAxes=i,n;return new st.b(r,i)}(e.box,t,n);if(e.region){var r=e.region,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=new h.a(Object(ot.c)((i+o)/2),Object(ot.c)((s+a)/2),(u+c)/2);return n=n||{},Object.assign(n,e,{center:l}),n}if(e.sphere)return function(e,t,n){var r=new h.a(e[0],e[1],e[2]);t.transform(r,r);var i=t.getScale(ct),a=Math.max(Math.max(i[0],i[1]),i[2]),o=e[3]*a;if(ut(n))return n.center=r,n.radius=o,n;return new st.a(r,o)}(e.sphere,t,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}var ht=n(328);function ft(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function dt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){ft(a,r,i,o,s,"next",e)}function s(e){ft(a,r,i,o,s,"throw",e)}o(void 0)})}}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var yt=function(e){return void 0!==e},mt=new Date,vt=new h.a,_t=function(){function e(e,t,n,r){ne("object"==typeof n),this._tileset=e,this._header=n,this.cacheNode=void 0,this._content=null,this._contentState=V.UNLOADED,this._gpuMemoryUsageInBytes=0,this.children=[],this.parent=r,this.refine=this._getRefine(n.refine),this.userData=null,"geometricError"in n?this.geometricError=n.geometricError:(this.geometricError=this.parent&&this.parent.geometricError||e._geometricError,console.warn("3D Tile: Required prop geometricError is undefined. Using parent error")),this._initializeTransforms(n),this._initializeBoundingVolumes(n),this._initializeContent(n),this._initializeCache(n),this._optimChildrenWithinParent=G.NOT_COMPUTED,this._initializeRenderingState(),Object.seal(this)}var t,n,r,a=e.prototype;return a.destroy=function(){this._header=null},a.isDestroyed=function(){return null===this._header},a.getScreenSpaceError=function(e,t){var n=this._tileset,r=this.parent&&this.parent.geometricError||n._geometricError,i=t?r:this.geometricError;if(0===i)return 0;var a=Math.max(this._distanceToCamera,1e-7),o=i*e.height/(a*e.sseDenominator);return o-=this._getDynamicScreenSpaceError(a)},a._getDynamicScreenSpaceError=function(e){var t=this._tileset;if(t.dynamicScreenSpaceError&&t._dynamicScreenSpaceErrorComputedDensity){var n=t._dynamicScreenSpaceErrorComputedDensity,r=t.dynamicScreenSpaceErrorFactor;return function(e,t){var n=e*t;return 1-Math.exp(-n*n)}(e,n)*r}return 0},a.loadContent=function(){var e=dt(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this._content){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.requestContent(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.requestContent=function(){var e=dt(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:return this.contentExpired&&(this.expireDate=void 0),e.prev=4,this._contentState=V.LOADING,n=this.uri,e.next=9,Object(ht.a)(n,this._tileset.fetchOptions);case 9:return r=e.sent,e.next=12,r.arrayBuffer();case 12:return a=e.sent,e.next=15,it.parse(a,{DracoLoader:t});case 15:return this._content=e.sent,this._contentState=V.READY,this._contentLoaded(),e.abrupt("return",!0);case 21:return e.prev=21,e.t0=e.catch(4),this._contentState=V.FAILED,this.tileset.onTileLoadFailed({tile:this,url:this.url,message:e.t0.message||e.t0.toString()}),e.abrupt("return",!1);case 26:case"end":return e.stop()}},e,this,[[4,21]])}));return function(t){return e.apply(this,arguments)}}(),a.unloadContent=function(){this.hasRenderContent&&(this._content&&this._content.destroy&&this._content.destroy(),this._content=null,this._contentState=V.UNLOADED)},a.updateVisibility=function(e){var t=this._tileset;this._updatedVisibilityFrame!==t._updatedVisibilityFrame&&(this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visible=!0,this._inRequestVolume=!0,this._updatedVisibilityFrame=t._updatedVisibilityFrame)},a.updateExpiration=function(){if(yt(this.expireDate)&&this.contentReady&&!this.hasEmptyContent){var e=Date.now(mt);Date.lessThan(this.expireDate,e)&&(this._contentState=V.EXPIRED,this._expiredContent=this._content)}},a.visibility=function(e,t){return!0},a.contentVisibility=function(e){return!0},a.distanceToTile=function(e){var t=this._boundingVolume;return Math.sqrt(t.distanceSquaredTo(e.camera.position))},a.cameraSpaceZDepth=function(e){var t=e.camera,n=this._boundingVolume.boundingVolume,r=h.a.subtract(n.center,t.position,vt);return h.a.dot(t.direction,r)},a.insideViewerRequestVolume=function(e){var t=this._viewerRequestVolume;return!t||0===t.distanceToCamera(e)},a._initializeCache=function(e){this.cacheNode=void 0;var t,n,r=e.expire;yt(r)&&(t=r.duration,yt(r.date)&&(n=Date.fromIso8601(r.date))),this.expireDuration=t,this.expireDate=n},a._initializeTransforms=function(e){this.transform=e.transform?new d.a(e.transform):new d.a;var t=this.parent,n=this._tileset,r=t&&t.computedTransform?t.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new d.a(r).multiplyRight(this.transform);var i=t&&t._initialTransform?t._initialTransform.clone():new d.a;this._initialTransform=new d.a(i).multiplyRight(this.transform)},a._initializeBoundingVolumes=function(e){this._boundingVolume=lt(e.boundingVolume,this.computedTransform),this._contentBoundingVolume=null,this._viewerRequestVolume=null,e.content&&e.content.boundingVolume&&(this._contentBoundingVolume=lt(e.boundingVolume,this.computedTransform)),e.viewerRequestVolume&&(this._viewerRequestVolume=lt(e.viewerRequestVolume,this.computedTransform))},a._initializeContent=function(e){this._content={_tileset:this._tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=V.UNLOADED,this._expiredContent=void 0,this._serverKey=null,this.hasTilesetContent=!1,e.content&&(this.contentUri=e.content.uri||e.content.url,"url"in e&&(console.warn('Tileset 3D: "content.url" property deprecated. Use "content.uri" instead.'),this.contentUri=e.url),this._content=null,this.hasEmptyContent=!1,this.contentState=V.UNLOADED)},a._initializeRenderingState=function(){this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._priority=0},a._getRefine=function(e){switch(e){case"REPLACE":case"replace":return q;case"ADD":case"add":return H;default:return this.parent?this.parent.refine:q}},a._isTileset=function(e){return"tilesetVersion"in e},a._contentLoaded=function(){switch(this._content.type){case"vctr":case"geom":tileset._disableSkipLevelOfDetail=!0}this._isTileset(this._content)?this.hasTilesetContent=!0:this._updateGPUMemoryUsageInBytes()},a._updateGPUMemoryUsageInBytes=function(){this._gpuMemoryUsageInBytes=this._content.byteLength},a._updateTransform=function(e){void 0===e&&(e=new d.a);var t=e.clone().multiply(this.transform);if(!t.equals(this.computedTransform)){this.computedTransform=t;var n=this._header,r=this._header.content;this._boundingVolume=lt(n.boundingVolume,this.computedTransform,this._boundingVolume),this._contentBoundingVolume&&(this._contentBoundingVolume=lt(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),this._viewerRequestVolume&&(this._viewerRequestVolume=lt(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume))}},t=e,(n=[{key:"gpuMemoryUsageInBytes",get:function(){return this._gpuMemoryUsageInBytes}},{key:"tileset",get:function(){return this._tileset}},{key:"depth",get:function(){return this._depth}},{key:"selectedFrame",get:function(){return this._selectedFrame}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"content",get:function(){return this._content}},{key:"contentReady",get:function(){return this._contentState===V.READY}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"contentAvailable",get:function(){return this.contentReady&&this.hasRenderContent||yt(this._expiredContent)&&!this.contentFailed}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this._contentState===V.UNLOADED}},{key:"contentExpired",get:function(){return this._contentState===V.EXPIRED}},{key:"contentFailed",get:function(){return this._contentState===V.FAILED}},{key:"url",get:function(){return this.tileset.getTileUrl(this.contentUri)}},{key:"uri",get:function(){return this.tileset.getTileUrl(this.contentUri)}},{key:"boundingVolume",get:function(){return this._boundingVolume}},{key:"contentBoundingVolume",get:function(){return this._contentBoundingVolume||this._boundingVolume}},{key:"boundingSphere",get:function(){return this._boundingVolume.boundingSphere}},{key:"extras",get:function(){return this._header.extras}}])&&pt(t.prototype,n),r&&pt(t,r),e}();function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bt=function(){function e(e){void 0===e&&(e=0),this._array=new Array(e),this._length=e}var t,n,r,i=e.prototype;return i.get=function(e){return ne(e<this._array.length),this._array[e]},i.set=function(e,t){ne(e>=0),e>=this.length&&(this.length=e+1),this._array[e]=t},i.peek=function(){return this._array[this._length-1]},i.push=function(e){var t=this.length++;this._array[t]=e},i.pop=function(){return this._array[--this.length]},i.reserve=function(e){ne(e>=0),e>this._array.length&&(this._array.length=e)},i.resize=function(e){ne(e>=0),this.length=e},i.trim=function(e){void 0===e&&(e=this.length),this._array.length=e},t=e,(n=[{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}}])&&gt(t.prototype,n),r&&gt(t,r),e}(),Tt=function(){function e(){this.traversal={stack:new bt,stackMaximumLength:0},this.emptyTraversal={stack:new bt,stackMaximumLength:0}}var t=e.prototype;return t.traverse=function(e,t){e._requestedTiles.length=0,e.selectedTiles.length=0,e._emptyTiles.length=0,e._selectedTilesToStyle.length=0,e._hasMixedContent=!1;var n=e.root;if(this.updateTile(e,n,t),!n.isVisibleAndInRequestVolume)return!1;if(n.getScreenSpaceError(t,!0)<=e.maximumScreenSpaceError)return!1;var r=e.maximumScreenSpaceError;return this.executeTraversal(e,r,t),this.traversal.stack.trim(this.traversal.stackMaximumLength),this.emptyTraversal.stack.trim(this.emptyTraversal.stackMaximumLength),!0},t.selectTile=function(e,t,n){t._selectedFrame=n.frameNumber,e.selectedTiles.push(t)},t.selectDesiredTile=function(e,t,n){if(e._skipLevelOfDetail){var r=t.contentAvailable?t:t._ancestorWithContentAvailable;r?r._shouldSelect=!0:this.selectDescendants(e,t,n)}else t.contentAvailable&&this.selectTile(e,t,n)},t.visitTile=function(e,t,n){++e._statistics.visited,t._visitedFrame=n.frameNumber},t.touchTile=function(e,t,n){e._cache.touch(t),t._touchedFrame=n.frameNumber},t.getPriority=function(e,t){switch(t.refine){case H:return t._distanceToCamera;case q:var n=t.parent,r=n&&(!e._skipLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-r;default:return ne(!1)}},t.loadTile=function(e,t,n){(t.hasUnloadedContent||t.contentExpired)&&(t._requestedFrame=n.frameNumber,t._priority=this.getPriority(e,t),e._requestedTiles.push(t))},t.updateTileVisibility=function(e,t,n){t.updateVisibility(n)},t.updateTile=function(e,t,n){this.updateTileVisibility(e,t,n),t.updateExpiration()},t.updateAndPushChildren=function(e,t,n,r){var i=t.children,a=Array.isArray(i),o=0;for(i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var u=s;this.updateTile(e,u,r),n.push(u)}return!0},t.canTraverse=function(e,t){return!(0===t.children.length||e.depthLimit<t.depth)&&(t.hasTilesetContent?!t.contentExpired:t._screenSpaceError>e.maximumScreenSpaceError)},t.executeTraversal=function(e,t,n){var r=this.traversal,i=r.stack;for(i.push(e.root);i.length>0;){r.stackMaximumLength=Math.max(r.stackMaximumLength,i.length);var a=i.pop(),o=a.refine===H,s=a.refine===q,u=a.parent,c=!u||u._refines,l=!1;this.canTraverse(e,a)&&(l=this.updateAndPushChildren(e,a,i,n)&&c);var h=!l&&c;a.hasRenderContent?o?(this.loadTile(e,a,n),this.selectDesiredTile(e,a,n)):s&&(this.loadTile(e,a,n),h&&this.selectDesiredTile(e,a,n)):(e._emptyTiles.push(a),this.loadTile(e,a,n),h&&this.selectDesiredTile(e,a,n)),this.touchTile(e,a,n),a._refines=l}},e}(),wt=function(e,t,n){this.item=e,this.previous=t,this.next=n};function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Et=function(e){return void 0!==e},St=function(){function e(){this.head=void 0,this.tail=void 0,this._length=0}var t,n,r,i=e.prototype;return i.add=function(e){var t=new wt(e,this.tail,void 0);return Et(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},i.remove=function(e){Et(e)&&(Et(e.previous)&&Et(e.next)?(e.previous.next=e.next,e.next.previous=e.previous):Et(e.previous)?(e.previous.next=void 0,this.tail=e.previous):Et(e.next)?(e.next.previous=void 0,this.head=e.next):(this.head=void 0,this.tail=void 0),e.next=void 0,e.previous=void 0,--this._length)},i.splice=function(e,t){if(e!==t){this.remove(t);var n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e}},t=e,(n=[{key:"length",get:function(){return this._length}}])&&xt(t.prototype,n),r&&xt(t,r),e}(),Ot=function(e){return void 0!==e},At=function(){function e(){this._list=new St,this._sentinel=this._list.add(),this._trimTiles=!1}var t=e.prototype;return t.reset=function(){this._list.splice(this._list.tail,this._sentinel)},t.touch=function(e){var t=e.cacheNode;Ot(t)&&this._list.splice(this._sentinel,t)},t.add=function(e){Ot(e.cacheNode)||(e.cacheNode=this._list.add(e),e.tileset.incrementGPUMemoryUsage(e.gpuMemoryUsageInBytes))},t.unloadTile=function(e,t,n){var r=t.cacheNode;Ot(r)&&(this._list.remove(r),t.cacheNode=void 0,e.decrementGPUMemoryUsage(t.gpuMemoryUsageInBytes),t.unloadContent(),n&&n(e,t))},t.unloadTiles=function(e,t){var n=this._trimTiles;this._trimTiles=!1;for(var r=this._list,i=1024*e.maximumMemoryUsage*1024,a=this._sentinel,o=r.head;o!==a&&(e.gpuMemoryUsageInBytes>i||n);){var s=o.item;o=o.next,this.unloadTile(e,s,t)}},t.trim=function(){this._trimTiles=!0},e}();function It(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lt=6378137,Pt=6378137,Ct=6356752.314245179;var Nt={basePath:"",ellipsoid:F.a.WGS84,cullWithChildrenBounds:!0,maximumScreenSpaceError:16,maximumMemoryUsage:512,modelMatrix:new d.a,dynamicScreenSpaceError:!1,dynamicScreenSpaceErrorDensity:.00278,dynamicScreenSpaceErrorFactor:4,dynamicScreenSpaceErrorHeightFalloff:.25,skipLevelOfDetail:!1,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,onLoadProgress:function(){},onAllTilesLoaded:function(){},initialTilesLoaded:function(){},onTileLoad:function(){},onTileUnload:function(){},onTileLoadFailed:function(e){e.tile;var t=e.message,n=e.url;console.error("A 3D tile failed to load: "+n+" "+t)},onTileVisible:function(){}};var Dt=function(){function e(e,t,n){void 0===n&&(n={});var r=(n=Object.assign({},Nt,{},n)).cullWithChildrenBounds;ne(e),this._url=t,this._basePath=function(e){var t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""}(t),this._root=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._traverser=new Tt,this._cache=new At,this._processingQueue=[],this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._extras=void 0,this._credits=void 0,this.DracoLoader=n.DracoLoader,this.fetchOptions=n.fetchOptions,this._cullWithChildrenBounds=r,this._allTilesAdditive=!0,this._hasMixedContent=!1,this._maximumScreenSpaceError=n.maximumScreenSpaceError,this._maximumMemoryUsage=n.maximumMemoryUsage,this._modelMatrix=n.modelMatrix,this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._readyPromise=Promise.resolve(),this._classificationType=n.classificationType,this._ellipsoid=n.ellipsoid,this._dynamicScreenSpaceErrorComputedDensity=0,this.onLoadProgress=n.onLoadProgress,this.onAllTilesLoaded=n.onAllTilesLoaded,this.initialTilesLoaded=n.initialTilesLoaded,this.onTileLoad=n.onTileLoad,this.onTileUnload=n.onTileUnload,this.onTileLoadFailed=n.onTileLoadFailed,this.onTileVisible=n.onTileVisible,this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this._gpuMemoryUsageInBytes=0,this.initializeTileSet(e,n),this.props={},Object.assign(this.props,n)}var t,n,r,a=e.prototype;return a.destroy=function(){var e=[];for(this._root&&e.push(this._root);e.length>0;){var t=o.children,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i;e.push(a)}var o=e.pop();o.destroy()}this._root=null},a.initializeTileSet=function(e,t){this._root=this.installTileset(e,null);var n=e.asset;this._asset=n,this._properties=e.properties,this._geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this._extras=e.extras,this._credits={}},a.getTileUrl=function(e){return e.startsWith("data:")?e:this.basePath+"/"+e+this.queryParams},a.hasExtension=function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)},a.installTileset=function(e,t){var n=e.asset;if(!n)throw new Error("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");this._queryParams={},"tilesetVersion"in n&&(this._queryParams.v=n.tilesetVersion);var r=new _t(this,null,e.root,t);t&&(t.children.push(r),r._depth=t._depth+1);var i=[];for(i.push(r);i.length>0;){var a=i.pop(),o=a._header.children||[],s=Array.isArray(o),u=0;for(o=s?o:o[Symbol.iterator]();;){var c;if(s){if(u>=o.length)break;c=o[u++]}else{if((u=o.next()).done)break;c=u.value}var l=new _t(this,null,c,a);a.children.push(l),l._depth=a._depth+1,i.push(l)}}return r},a.trimLoadedTiles=function(){this._cache.trim()},a.decrementGPUMemoryUsage=function(e){this._gpuMemoryUsageInBytes-=e},a.incrementGPUMemoryUsage=function(e){this._gpuMemoryUsageInBytes+=e},a.addTileToCache=function(e){this._cache.add(e)},a.update=function(e){this._updatedVisibilityFrame++,this._cache.reset(),this._traverser.traverse(this,e);var t=this._requestedTiles,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i;this._requestContent(a)}this._cache.unloadTiles(this)},a._requestContent=function(){var e,t=(e=i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contentExpired,e.next=3,t.requestContent(this.DracoLoader);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:n&&t.hasTilesetContent&&this._destroySubtree(t);try{this.onTileLoad(t)}catch(r){this.onTileLoadFailed({tile:t,url:t.url,message:r.message||r.toString()})}case 8:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){It(a,r,i,o,s,"next",e)}function s(e){It(a,r,i,o,s,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}(),a._getCartographicCenterAndZoom=function(e){var t=this._root,n=t.boundingVolume.center;return n?((e=e||new h.a).copy(n),F.a.WGS84.cartesianToCartographic(e,e),e[2]=function(e){var t=e.halfAxes,n=e.radius,r=e.width,i=e.height;if(t){var a=t[0],o=t[4],s=t[8];return(Math.log2(Lt/a/2)+Math.log2(Pt/o/2)+Math.log2(Ct/s/2))/3}return n?Math.log2(Ct/n):i&&r?(Math.log2(Lt/r)+Math.log2(Pt/i))/2:18}(t.boundingVolume),e):(console.warn("center was not pre-calculated for the root tile"),e)},a._destroySubtree=function(e){var t=e,n=[];for(n.push(t);n.length>0;){var r=(e=n.pop()).children,i=Array.isArray(r),a=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(a>=r.length)break;o=r[a++]}else{if((a=r.next()).done)break;o=a.value}var s=o;n.push(s)}e!==t&&this._destroyTile(e)}t.children=[]},a._destroyTile=function(e){this._cache.unloadTile(this,e),this.onTileUnload(e),e.unloadContent(),e.destroy()},a._unloadTiles=function(){var e=this;this._cache.unloadTiles(this,function(t){e.onTileUnload(t),t.unloadContent()})},t=e,(n=[{key:"asset",get:function(){return this._asset}},{key:"properties",get:function(){return this._properties}},{key:"ready",get:function(){return Boolean(this._root)}},{key:"readyPromise",get:function(){return this._readyPromise.promise}},{key:"tilesLoaded",get:function(){return this._tilesLoaded}},{key:"url",get:function(){return this._url}},{key:"basePath",get:function(){return this._basePath}},{key:"queryParams",get:function(){for(var e=[],t=0,n=Object.keys(this._queryParams);t<n.length;t++){var r=n[t];e.push(r+"="+this._queryParams[r])}return e.length?"?"+e.join("&"):""}},{key:"maximumScreenSpaceError",get:function(){return this._maximumScreenSpaceError},set:function(e){ne(e>=0),this._maximumScreenSpaceError=e}},{key:"maximumMemoryUsage",get:function(){return this._maximumMemoryUsage},set:function(e){ne(e>0),this._maximumMemoryUsage=e}},{key:"root",get:function(){return this._root}},{key:"boundingSphere",get:function(){return this._checkReady(),this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},{key:"modelMatrix",get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=new d.a(e)}},{key:"timeSinceLoad",get:function(){return this._timeSinceLoad}},{key:"gpuMemoryUsageInBytes",get:function(){return this._gpuMemoryUsageInBytes}},{key:"ellipsoid",get:function(){return this._ellipsoid}},{key:"extras",get:function(){return this._extras}}])&&kt(t.prototype,n),r&&kt(t,r),e}(),Ut=n(351);function Bt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Rt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){Bt(a,r,i,o,s,"next",e)}function s(e){Bt(a,r,i,o,s,"throw",e)}o(void 0)})}}var Mt="https://api.cesium.com/v1/assets";function Ft(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Rt(i.a.mark(function e(t,n){var r,a,o,s,u,c,l,h,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=19;break}return e.next=3,Vt(t);case 3:r=e.sent,a=r.items,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();case 5:if(!o){e.next=11;break}if(!(s>=a.length)){e.next=8;break}return e.abrupt("break",19);case 8:u=a[s++],e.next=15;break;case 11:if(!(s=a.next()).done){e.next=14;break}return e.abrupt("break",19);case 14:u=s.value;case 15:"3DTILES"===(c=u).type&&(n=c.id);case 17:e.next=5;break;case 19:return e.next=21,Ht(t,n);case 21:return l=e.sent,h=l.type,f=l.url,ne("3DTILES"===h&&f),l.headers={Authorization:"Bearer "+l.accessToken},e.abrupt("return",l);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Rt(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(t),n=Mt,r={Authorization:"Bearer "+t},e.next=5,fetch(n,{headers:r});case 5:if((a=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,Object(Ut.a)(a);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.next=14,a.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Rt(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(t,n),r=Mt+"/"+n+"/endpoint",a={Authorization:"Bearer "+t},e.next=5,fetch(r,{headers:a});case 5:if((o=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=10,Object(Ut.a)(o);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.next=14,o.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Jt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){zt(a,r,i,o,s,"next",e)}function s(e){zt(a,r,i,o,s,"throw",e)}o(void 0)})}}Object(B.b)([it,at,v.a]);var Wt=[202,112,41,255],Yt={tilesetUrl:null,ionAssetId:null,ionAccessToken:null,isWGS84:!1,color:Wt,depthLimit:Number.MAX_SAFE_INTEGER,onTileLoaded:function(){},onTilesetLoaded:function(){}},Zt=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initializeState=function(){this.state={layerMap:{},layers:[],tileset3d:null}},a._loadTileset=function(){var e=Jt(i.a.mark(function e(t,n,r){var a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!t){e.next=9;break}return e.next=4,fetch(t,n);case 4:return o=e.sent,e.next=7,o.json();case 7:s=e.sent,a=new Dt(s,t,Object.assign({onTileLoad:this.props.onTileLoaded,DracoLoader:M.a,fetchOptions:n},r));case 9:a&&(a.depthLimit=this.props.depthLimit),this.setState({tileset3d:a,layerMap:{},layers:[]}),a&&this.props.onTilesetLoaded(a);case 12:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),a._loadTilesetFromIon=function(){var e=Jt(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(t,n);case 2:return r=e.sent,a=r.url,o=r.headers,e.next=6,this._loadTileset(a,{headers:o},r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a.shouldUpdateState=function(e){return e.changeFlags.somethingChanged},a.updateState=function(e){var t=e.props,n=e.oldProps;e.context,e.changeFlags;t.tilesetUrl&&t.tilesetUrl!==n.tilesetUrl?this._loadTileset(t.tilesetUrl):!t.ionAccessToken&&!t.ionAssetId||t.ionAccessToken===n.ionAccessToken&&t.ionAssetId===n.ionAssetId||this._loadTilesetFromIon(t.ionAccessToken,t.ionAssetId);var r=this.state.tileset3d;this._updateTileset(r)},a._updateTileset=function(e){var t=this.context,n=t.animationProps,r=t.viewport;if(n&&r&&e){var i=n.height,a=n.tick,o=r.cameraDirection,s=r.cameraUp,u=new h.a(r.cameraPosition).subtract(r.center).scale(r.distanceScales.metersPerPixel),c=[r.longitude,r.latitude,0],l=F.a.WGS84.cartographicToCartesian(c,new h.a),f=F.a.WGS84.eastNorthUpToFixedFrame(l),d={camera:{position:f.transform(u),direction:f.transformAsVector(o),up:f.transformAsVector(s)},height:i,frameNumber:a,sseDenominator:1.15};e.update(d,M.a),this._updateLayers(d),this._selectLayers(d)}},a._selectLayers=function(e){for(var t=this.state.layerMap,n=e.frameNumber,r=[],i=0,a=Object.values(t);i<a.length;i++){var o=a[i],s=o.tile,u=o.layer;s.selectedFrame===n?(u.props.visible||(u=u.clone({visible:!0}),t[s.contentUri].layer=u),r.push(u)):s.contentUnloaded?delete t[s.contentUri]:u.props.visible&&(u=u.clone({visible:!1}),t[s.contentUri].layer=u)}this.setState({layers:r})},a._updateLayers=function(e){var t=this.state,n=t.tileset3d,r=t.layerMap,i=n.selectedTiles.filter(function(e){return!(e.contentUri in r)}),a=Array.isArray(i),o=0;for(i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{if((o=i.next()).done)break;s=o.value}var u=s;this._unpackTile(u);var c=this._render3DTileLayer(u);n.addTileToCache(u),r[u.contentUri]={layer:c,tile:u}}},a._unpackTile=function(e){var t=e.content;if(t)switch(t.type){case"pnts":this._unpackPointCloud3DTile(e);break;case"i3dm":this._unpackInstanced3DTile(e);break;case"b3dm":this._unpackBatched3DTile(e);break;default:throw console.warn("Error unpacking 3D tile",t.type,t),new Error("Tile3DLayer: Error unpacking 3D tile "+t.type)}},a._unpackPointCloud3DTile=function(e){var t=e.content,n=new te(t.featureTableJson,t.featureTableBinary),r=null;if(t.batchIds){var i=t.batchTableJson,a=t.batchTableBinary;r=new ye(i,a,n.getGlobalProperty("BATCH_LENGTH"))}var o=t.positions;e.userData={pointsCount:t.featureTableJson.POINTS_LENGTH,positions:o,featureTable:n,batchTable:r,transform:e._initialTransform},this._loadColors(e)},a._loadColors=function(e){var t=e.content,n=t.batchIds,r=t.colors,i=t.isRGB565,a=t.constantRGBA;a&&(e.userData.color=a);var o,s,u,c,l=e.userData,h=l.batchTable,f=l.pointsCount,d=r;if(i){d=new Uint8ClampedArray(4*f);for(var p=0;p<f;p++){var y=(o=r[p],s=void 0,u=void 0,c=void 0,s=31&o,u=o>>5&63,c=o>>11&31,[s=Math.round(255*s/32),u=Math.round(255*u/64),c=Math.round(255*c/32)]);d[4*p]=y[0],d[4*p+1]=y[1],d[4*p+2]=y[2],d[4*p+3]=255}}if(r&&r.length===3*f){d=new Uint8ClampedArray(4*f);for(var m=0;m<f;m++)d[4*m]=r[3*m],d[4*m+1]=r[3*m+1],d[4*m+2]=r[3*m+2],d[4*m+3]=255}if(n&&h){d=new Uint8ClampedArray(4*f);for(var v=0;v<f;v++){var _=n[v],g=h.getProperty(_,"dimensions").map(function(e){return 255*e});d[4*v]=g[0],d[4*v+1]=g[1],d[4*v+2]=g[2],d[4*v+3]=255}}e.userData.colors=d},a._unpackInstanced3DTile=function(e){if(e.content.gltfArrayBuffer&&(e.userData={gltfUrl:Object(R.a)(e.content.gltfArrayBuffer)}),e.content.gltfUrl){var t=e.tileset.getTileUrl(e.content.gltfUrl);e.userData={gltfUrl:t}}},a._unpackBatched3DTile=function(e){},a._resolveTransformProps=function(e){if(!e||!e.content)return{};var t=e.content.rtcCenter,n=e.userData,r=n.transform,i=n.positions,a={},o=new d.a(r);t&&o.translate(t);var s=[i[0],i[1],i[2]],u=o.transform(s,new h.a),c=F.a.WGS84.cartesianToCartographic(u,new h.a),l=F.a.WGS84.eastNorthUpToFixedFrame(u);return o=new d.a(l.invert()).multiplyRight(o),a.coordinateOrigin=c,a.modelMatrix=o,a.coordinateSystem=p.a.METER_OFFSETS,a},a._getColorProps=function(e){var t=this,n=e.userData,r=n.colors,i=n.color;return r?{instanceColors:r}:{getColor:function(){return i||t.props.color||Wt}}},a._render3DTileLayer=function(e){if(!e.content||!e.userData)return null;var t;switch(e.content.type){case"pnts":t=this._renderPointCloud3DTileLayer(e);break;case"i3dm":case"b3dm":t=this._renderInstanced3DTileLayer(e)}if(!t)throw new Error("Tile3DLayer: Failed to render layer of type "+e.content.type);return t},a._renderInstanced3DTileLayer=function(e){var t=e.userData.gltfUrl,n=this._resolveTransformProps(e);return new m.a(Object.assign({id:"3d-model-tile-layer-"+e.contentUri,data:[{},{}],coordinateSystem:p.a.METERS,pickable:!0,scenegraph:t,sizeScale:1,getColor:[0,0,100,100],opacity:.6},n))},a._renderPointCloud3DTileLayer=function(e){var t=e.content,n=t.positions,r=t.normals,i=e.userData.pointsCount,a=this._resolveTransformProps(e),o=this._getColorProps(e);return n&&new y.a(Object.assign({id:"3d-point-cloud-tile-layer-"+e.contentUri,data:{length:n.length/3},numInstances:i,instancePositions:n},o,{instanceNormals:r,opacity:.8,pointSize:1.5},a))},a.renderLayers=function(){return Object.values(this.state.layerMap).map(function(e){return e.layer})},r}(f.a);Zt.layerName="Tile3DLayer",Zt.defaultProps=Yt;n(26);var Qt=n(275);var Kt=Qt.a.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),Xt=Qt.a.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),$t=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i._renderByCategories=function(){var e=this.props,t=e.category,n=e.name,r=e.onChange,i=e.data,a=Object.keys(i),s=t+"."+n;return o.a.createElement(Xt,{value:s,onChange:function(e){var t=e.target.value.split(".");r({category:t[0],name:t[1]})}},a.map(function(e,t){var n=i[e].examples;return o.a.createElement("optgroup",{key:t,label:e},Object.keys(n).map(function(t,n){var r=e+"."+t;return o.a.createElement("option",{key:n,value:r},t)}))}))},i._renderDropped=function(){var e=this.props.droppedFile;return e?o.a.createElement("div",null,"Dropped file: ",JSON.stringify(e.name)):null},i.render=function(){return o.a.createElement(Kt,null,this._renderByCategories(),this._renderDropped(),this.props.children)},r}(a.PureComponent);function en(e,t){e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length&&t(e.dataTransfer.files[0])}}$t.defaultProps={droppedFile:null,onChange:function(){}};var tn=n(555),nn=n(294);function rn(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function an(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){rn(a,r,i,o,s,"next",e)}function s(e){rn(a,r,i,o,s,"throw",e)}o(void 0)})}}n.d(t,"INITIAL_VIEW_STATE",function(){return fn}),n.d(t,"default",function(){return dn}),n.d(t,"renderToDOM",function(){return pn});var on="https://raw.githubusercontent.com/uber-web/loaders.gl/master",sn={}.IonAccessToken,un="additional",cn="royalExhibitionBuilding",ln=new h.a,hn={name:"additional",examples:{royalExhibitionBuilding:{tilesetUrl:"https://raw.githubusercontent.com/uber-common/deck.gl-data/master/3d-tiles/RoyalExhibitionBuilding/tileset.json",depthLimit:2,color:[115,101,152,200]},"St Helen (Cesium ion)":{ionAssetId:33301,ionAccessToken:sn}}},fn=Object.assign({},{latitude:40.04248558075302,longitude:-75.61213987669433},{pitch:60,bearing:0,minZoom:2,maxZoom:30,zoom:17}),dn=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={viewState:fn,featureTable:null,batchTable:null,droppedFile:null,examplesByCategory:null,tilesetExampleProps:{},category:un,name:cn,tileCount:0,pointCount:0},n._deckRef=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=an(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._memWidget=(t=this._memWidgetContainer,new tn.a(nn.D.get("Memory Usage"),{framesPerUpdate:60,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"},container:t})),en(this._deckRef.deckCanvas,function(e,t){alert("File drop of tilesets not yet implemented")}),e.next=4,this._loadExampleIndex();case 4:return e.next=6,this._loadInitialTileset();case 6:case"end":return e.stop()}var t},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadExampleIndex=function(){var e=an(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/uber-web/loaders.gl/master/modules/3d-tiles/test/data/index.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({examplesByCategory:Object.assign({},n,{additional:hn,custom:{name:"Custom",examples:{"Custom Tileset":{},"ION Tileset":{}}}})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadInitialTileset=function(){var e=an(i.a.mark(function e(){var t,n,r,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(window.location.href),n=t.searchParams.get("ionAssetId"),r=t.searchParams.get("ionAccessToken"),!n&&!r){e.next=8;break}return r=r||sn,e.next=7,this._loadTilesetFromIonAsset(r,n);case 7:return e.abrupt("return");case 8:if(!(a=t.searchParams.get("tileset"))){e.next=13;break}return e.next=12,this._loadTilesetFromUrl(a);case 12:return e.abrupt("return");case 13:return o=this.state,s=o.category,u=o.name,e.next=16,this._loadExampleTileset(s,u);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a._loadExampleTileset=function(){var e=an(i.a.mark(function e(t,n){var r,a,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.state.examplesByCategory,"additional"===t?o=hn.examples[n]:(s=r[t].examples[n])&&s.tileset&&(a=on+"/"+s.path+"/"+s.tileset,o={tilesetUrl:a,isWGS84:!0}),this.setState({tilesetExampleProps:o});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a._loadTilesetFromIonAsset=function(){var e=an(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({tilesetExampleProps:{ionAccessToken:t,ionAssetId:n},category:"custom",name:"ION Tileset"});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),a._loadTilesetFromUrl=function(){var e=an(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({tilesetExampleProps:{tilesetUrl:t},category:"custom",name:"Custom Tileset"});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._onSelectExample=function(){var e=an(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,r=t.name,this.setState({category:n,name:r}),e.next=4,this._loadExampleTileset(n,r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._renderControlPanel=function(){var e=this.state,t=e.examplesByCategory,n=e.category,r=e.name,i=e.viewState;return t?o.a.createElement($t,{data:t,category:n,name:r,onChange:this._onSelectExample.bind(this)},o.a.createElement("div",null,"Loaded ",0|this.state.tileCount," tiles ",(this.state.pointCount/1e6).toFixed(2)," M points"),o.a.createElement("div",null," ",i.longitude.toFixed(5)," ",i.latitude.toFixed(5)," ",i.zoom," ")):null},a._onTilesetLoaded=function(e){e._getCartographicCenterAndZoom(ln),this.setState({viewState:Object.assign({},this.state.viewState,{longitude:ln[0],latitude:ln[1],zoom:ln[2]})}),this.forceUpdate()},a._onTileLoaded=function(e){var t=e.content.pointsLength||0;this.setState({tileCount:this.state.tileCount+1,pointCount:this.state.pointCount+t})},a._onViewStateChange=function(e){var t=e.viewState;this.setState({viewState:t})},a._renderLayer=function(){var e=this.state.tilesetExampleProps;if(!e)return null;var t=e.tilesetUrl,n=e.ionAssetId,r=e.ionAccessToken,i=e.coordinateOrigin,a=e.depthLimit,o=void 0===a?2:a,s=e.color;return new Zt({id:"tile-3d-layer",tilesetUrl:t,ionAssetId:n,ionAccessToken:r,coordinateOrigin:i,depthLimit:o,color:void 0===s?[255,0,0,255]:s,onTileLoaded:this._onTileLoaded.bind(this),onTilesetLoaded:this._onTilesetLoaded.bind(this)})},a._renderStats=function(){var e=this;return o.a.createElement("div",{style:{position:"absolute",padding:12,zIndex:"10000",maxWidth:300,background:"#000",color:"#fff"},ref:function(t){return e._memWidgetContainer=t}})},a.render=function(){var e=this,t=this.state.viewState,n=this._renderLayer();return o.a.createElement("div",null,this._renderStats(),this._renderControlPanel(),o.a.createElement(c.a,{ref:function(t){return e._deckRef=t},layers:[n],initialViewState:fn,viewState:t,onViewStateChange:this._onViewStateChange.bind(this),controller:{type:l.a,maxPitch:85},onAfterRender:function(){return e._memWidget&&e._memWidget.update()}},o.a.createElement(u.a,{mapStyle:"mapbox://styles/mapbox/light-v9",mapboxApiAccessToken:"pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoiY2pwY3owbGFxMDVwNTNxcXdwMms2OWtzbiJ9.1PPVl0VLUQgqrosrI2nUhg"})))},r}(a.PureComponent);function pn(e){Object(s.render)(o.a.createElement(dn,null),e)}},351:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(132),n(133),n(39),n(2);var r=n(292),i=n.n(r);n(293);function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return s.apply(this,arguments)}function s(){var e;return e=i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource "+t.url+" ("+t.status+"): ",e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,t.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},e,null,[[1,13]])}),(s=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}).apply(this,arguments)}},448:function(e,t){},521:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i="object"!=typeof e||"[object process]"!==String(e)||e.browser,a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r},o=a.global||a.self||a.window}).call(this,n(309),n(97))},522:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return S}),n.d(t,"a",function(){return E});n(289),n(15);function r(e,t,n){return t<=e&&e<=n}e["encoding-indexes"]={};var i=Math.floor;function a(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){return 0<=e&&e<=127}var s=o,u=-1;function c(e){this.tokens=[].slice.call(e),this.tokens.reverse()}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():u},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var l=-1;function h(e,t){if(e)throw TypeError("Decoder error");return t||65533}function f(e){throw TypeError("The code point "+e+" could not be encoded.")}function d(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(y,e)?y[e]:null}var p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],y={};p.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){y[t]=e})})});var m,v,_={},g={};function b(e,t){return t&&t[e]||null}function T(e,t){var n=t.indexOf(e);return-1===n?null:n}function w(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var x="utf-8";function E(e,t){if(!(this instanceof E))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):x,t=a(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=d(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!g[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");return this._encoding=n,Boolean(t.fatal)&&(this._error_mode="fatal"),Boolean(t.ignoreBOM)&&(this._ignoreBOM=!0),Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM),this}function S(t,n){if(!(this instanceof S))throw TypeError("Called as a function. Did you forget 'new'?");n=a(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var r=d(t=void 0!==t?String(t):x);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!_[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=r}else this._encoding=d("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function O(e){var t=e.fatal,n=0,i=0,a=0,o=128,s=191;this.handler=function(e,c){if(c===u&&0!==a)return a=0,h(t);if(c===u)return l;if(0===a){if(r(c,0,127))return c;if(r(c,194,223))a=1,n=31&c;else if(r(c,224,239))224===c&&(o=160),237===c&&(s=159),a=2,n=15&c;else{if(!r(c,240,244))return h(t);240===c&&(o=144),244===c&&(s=143),a=3,n=7&c}return null}if(!r(c,o,s))return n=a=i=0,o=128,s=191,e.prepend(c),h(t);if(o=128,s=191,n=n<<6|63&c,(i+=1)!==a)return null;var f=n;return n=a=i=0,f}}function A(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var a=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);a.push(128|63&o),n-=1}return a}}function I(e,t){var n=t.fatal;this.handler=function(t,r){if(r===u)return l;if(o(r))return r;var i=e[r-128];return null===i?h(n):i}}function k(e,t){t.fatal;this.handler=function(t,n){if(n===u)return l;if(s(n))return n;var r=T(n,e);return null===r&&f(n),r+128}}function L(e){var t=e.fatal,n=0,i=0,a=0;this.handler=function(e,s){if(s===u&&0===n&&0===i&&0===a)return l;var c;if(s!==u||0===n&&0===i&&0===a||(n=0,i=0,a=0,h(t)),0!==a){c=null,r(s,48,57)&&(c=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,n=0,r=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[0]<=e))break;n=a[0],r=a[1]}return r+e-n}(10*(126*(10*(n-129)+i-48)+a-129)+s-48));var f=[i,a,s];return n=0,i=0,a=0,null===c?(e.prepend(f),h(t)):c}if(0!==i)return r(s,129,254)?(a=s,null):(e.prepend([i,s]),n=0,i=0,h(t));if(0!==n){if(r(s,48,57))return i=s,null;var d=n,p=null;n=0;var y=s<127?64:65;return(r(s,64,126)||r(s,128,254))&&(p=190*(d-129)+(s-y)),null===(c=null===p?null:b(p,w("gb18030")))&&o(s)&&e.prepend(s),null===c?h(t):c}return o(s)?s:128===s?8364:r(s,129,254)?(n=s,null):h(t)}}function P(e,t){e.fatal;this.handler=function(e,n){if(n===u)return l;if(s(n))return n;if(58853===n)return f(n);if(t&&8364===n)return 128;var r=T(n,w("gb18030"));if(null!==r){var a=r%190;return[i(r/190)+129,a+(a<63?64:65)]}if(t)return f(n);r=function(e){if(59335===e)return 7457;var t,n=0,r=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var a=i[t];if(!(a[1]<=e))break;n=a[1],r=a[0]}return r+e-n}(n);var o=i(r/10/126/10),c=i((r-=10*o*126*10)/10/126),h=i((r-=10*c*126)/10);return[o+129,c+48,h+129,r-10*h+48]}}function C(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0;var c=i<127?64:98;switch((r(i,64,126)||r(i,161,254))&&(s=157*(a-129)+(i-c)),s){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var f=null===s?null:b(s,w("big5"));return null===f&&o(i)&&e.prepend(i),null===f?h(t):f}return o(i)?i:r(i,129,254)?(n=i,null):h(t)}}function N(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n=function(e){var t=v=v||w("big5").map(function(e,t){return t<5024?null:e});return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):T(e,t)}(t);if(null===n)return f(t);var r=i(n/157)+129;if(r<161)return f(t);var a=n%157;return[r,a+(a<63?64:98)]}}function D(e){var t=e.fatal,n=!1,i=0;this.handler=function(e,a){if(a===u&&0!==i)return i=0,h(t);if(a===u&&0===i)return l;if(142===i&&r(a,161,223))return i=0,65216+a;if(143===i&&r(a,161,254))return n=!0,i=a,null;if(0!==i){var s=i;i=0;var c=null;return r(s,161,254)&&r(a,161,254)&&(c=b(94*(s-161)+(a-161),w(n?"jis0212":"jis0208"))),n=!1,r(a,161,254)||e.prepend(a),null===c?h(t):c}return o(a)?a:142===a||143===a||r(a,161,254)?(i=a,null):h(t)}}function U(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;if(165===t)return 92;if(8254===t)return 126;if(r(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var n=T(t,w("jis0208"));return null===n?f(t):[i(n/94)+161,n%94+161]}}function B(e){var t=e.fatal,n=0,i=1,a=2,o=3,s=4,c=5,f=6,d=n,p=n,y=0,m=!1;this.handler=function(e,v){switch(d){default:case n:return 27===v?(d=c,null):r(v,0,127)&&14!==v&&15!==v&&27!==v?(m=!1,v):v===u?l:(m=!1,h(t));case i:return 27===v?(d=c,null):92===v?(m=!1,165):126===v?(m=!1,8254):r(v,0,127)&&14!==v&&15!==v&&27!==v&&92!==v&&126!==v?(m=!1,v):v===u?l:(m=!1,h(t));case a:return 27===v?(d=c,null):r(v,33,95)?(m=!1,65344+v):v===u?l:(m=!1,h(t));case o:return 27===v?(d=c,null):r(v,33,126)?(m=!1,y=v,d=s,null):v===u?l:(m=!1,h(t));case s:if(27===v)return d=c,h(t);if(r(v,33,126)){d=o;var _=b(94*(y-33)+v-33,w("jis0208"));return null===_?h(t):_}return v===u?(d=o,e.prepend(v),h(t)):(d=o,h(t));case c:return 36===v||40===v?(y=v,d=f,null):(e.prepend(v),m=!1,d=p,h(t));case f:var g=y;y=0;var T=null;if(40===g&&66===v&&(T=n),40===g&&74===v&&(T=i),40===g&&73===v&&(T=a),36!==g||64!==v&&66!==v||(T=o),null!==T){d=d=T;var x=m;return m=!0,x?h(t):null}return e.prepend([g,v]),m=!1,d=p,h(t)}}}function R(e){e.fatal;var t=0,n=1,r=2,a=t;this.handler=function(e,o){if(o===u&&a!==t)return e.prepend(o),a=t,[27,40,66];if(o===u&&a===t)return l;if(!(a!==t&&a!==n||14!==o&&15!==o&&27!==o))return f(65533);if(a===t&&s(o))return o;if(a===n&&(s(o)&&92!==o&&126!==o||165==o||8254==o)){if(s(o))return o;if(165===o)return 92;if(8254===o)return 126}if(s(o)&&a!==t)return e.prepend(o),a=t,[27,40,66];if((165===o||8254===o)&&a!==n)return e.prepend(o),a=n,[27,40,74];8722===o&&(o=65293);var c=T(o,w("jis0208"));return null===c?f(o):a!==r?(e.prepend(o),a=r,[27,36,66]):[i(c/94)+33,c%94+33]}}function M(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0;var c=i<127?64:65,f=a<160?129:193;if((r(i,64,126)||r(i,128,252))&&(s=188*(a-f)+i-c),r(s,8836,10715))return 48508+s;var d=null===s?null:b(s,w("jis0208"));return null===d&&o(i)&&e.prepend(i),null===d?h(t):d}return o(i)||128===i?i:r(i,161,223)?65216+i:r(i,129,159)||r(i,224,252)?(n=i,null):h(t)}}function F(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(r(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var n=function(e){return(m=m||w("jis0208").map(function(e,t){return r(t,8272,8835)?null:e})).indexOf(e)}(t);if(null===n)return f(t);var a=i(n/188),o=n%188;return[a+(a<31?129:193),o+(o<63?64:65)]}}function j(e){var t=e.fatal,n=0;this.handler=function(e,i){if(i===u&&0!==n)return n=0,h(t);if(i===u&&0===n)return l;if(0!==n){var a=n,s=null;n=0,r(i,65,254)&&(s=190*(a-129)+(i-65));var c=null===s?null:b(s,w("euc-kr"));return null===s&&o(i)&&e.prepend(i),null===c?h(t):c}return o(i)?i:r(i,129,254)?(n=i,null):h(t)}}function V(e){e.fatal;this.handler=function(e,t){if(t===u)return l;if(s(t))return t;var n=T(t,w("euc-kr"));return null===n?f(t):[i(n/190)+129,n%190+65]}}function G(e,t){var n=e>>8,r=255&e;return t?[n,r]:[r,n]}function H(e,t){var n=t.fatal,i=null,a=null;this.handler=function(t,o){if(o===u&&(null!==i||null!==a))return h(n);if(o===u&&null===i&&null===a)return l;if(null===i)return i=o,null;var s;if(s=e?(i<<8)+o:(o<<8)+i,i=null,null!==a){var c=a;return a=null,r(s,56320,57343)?65536+1024*(c-55296)+(s-56320):(t.prepend(G(s,e)),h(n))}return r(s,55296,56319)?(a=s,null):r(s,56320,57343)?h(n):s}}function q(e,t){t.fatal;this.handler=function(t,n){if(n===u)return l;if(r(n,0,65535))return G(n,e);var i=G(55296+(n-65536>>10),e),a=G(56320+(n-65536&1023),e);return i.concat(a)}}function z(e){e.fatal;this.handler=function(e,t){return t===u?l:o(t)?t:63360+t-128}}function J(e){e.fatal;this.handler=function(e,t){return t===u?l:s(t)?t:r(t,63360,63487)?t-63360+128:f(t)}}Object.defineProperty&&(Object.defineProperty(E.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(E.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(E.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),E.prototype.decode=function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=a(t),this._do_not_flush||(this._decoder=g[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var r,i=new c(n),o=[];;){var s=i.read();if(s===u)break;if((r=this._decoder.handler(i,s))===l)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(i,i.read()))===l)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!i.endOfStream());this._decoder=null}return function(e){var t,n;return t=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===t.indexOf(n)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(e)}.call(this,o)},Object.defineProperty&&Object.defineProperty(S.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),S.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=a(t),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new c(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var a=t.charCodeAt(r);if(a<55296||a>57343)i.push(a);else if(56320<=a&&a<=57343)i.push(65533);else if(55296<=a&&a<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var s=1023&a,u=1023&o;i.push(65536+(s<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(e)),i=[];;){var o=r.read();if(o===u)break;if((n=this._encoder.handler(r,o))===l)break;Array.isArray(n)?i.push.apply(i,n):i.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(r,r.read()))!==l;)Array.isArray(n)?i.push.apply(i,n):i.push(n);this._encoder=null}return new Uint8Array(i)},_["UTF-8"]=function(e){return new A(e)},g["UTF-8"]=function(e){return new O(e)},"encoding-indexes"in e&&p.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,n=w(t.toLowerCase());g[t]=function(e){return new I(n,e)},_[t]=function(e){return new k(n,e)}})}),g.GBK=function(e){return new L(e)},_.GBK=function(e){return new P(e,!0)},_.gb18030=function(e){return new P(e)},g.gb18030=function(e){return new L(e)},_.Big5=function(e){return new N(e)},g.Big5=function(e){return new C(e)},_["EUC-JP"]=function(e){return new U(e)},g["EUC-JP"]=function(e){return new D(e)},_["ISO-2022-JP"]=function(e){return new R(e)},g["ISO-2022-JP"]=function(e){return new B(e)},_.Shift_JIS=function(e){return new F(e)},g.Shift_JIS=function(e){return new M(e)},_["EUC-KR"]=function(e){return new V(e)},g["EUC-KR"]=function(e){return new j(e)},_["UTF-16BE"]=function(e){return new q(!0,e)},g["UTF-16BE"]=function(e){return new H(!0,e)},_["UTF-16LE"]=function(e){return new q(!1,e)},g["UTF-16LE"]=function(e){return new H(!1,e)},_["x-user-defined"]=function(e){return new J(e)},g["x-user-defined"]=function(e){return new z(e)}}).call(this,n(97))},523:function(e,t){},524:function(e,t){},525:function(e,t){},526:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return w}),n.d(t,"a",function(){return E});n(3),n(130),n(39),n(2);var r=n(292),i=n.n(r),a=(n(293),n(448)),o=n.n(a),s=n(527),u=n.n(s),c=n(528),l=n.n(c),h=n(529),f=n.n(h),d=n(530),p=n(531),y=n.n(p),m=n(532);function v(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)})}}var g={dataType:"arraybuffer"},b=function(e){return e.startsWith("data:")},T=function(e){return e.startsWith("http:")||e.startsWith("https:")};function w(e,t){return x.apply(this,arguments)}function x(){return(x=_(i.a.mark(function t(n,r){var a,s,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r={}),r=O(r),!b(n)){t.next=4;break}return t.abrupt("return",Promise.resolve(y()(n)));case 4:if(!T(n)){t.next=6;break}return t.abrupt("return",new Promise(function(e,t){r=Object.assign({},new URL(n),{},r),(n.startsWith("https:")?l.a.request:u.a.request)(n,function(n){return Object(m.concatenateReadStream)(n).then(e,t)})}));case 6:return a=n&&n.lastIndexOf("?"),n=a>=0?n.substr(0,a):n,s=f.a.promisify(o.a.readFile),t.next=11,s(n,r);case 11:return c=t.sent,t.abrupt("return",c instanceof e?Object(d.toArrayBuffer)(c):c);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function E(e,t){return S.apply(this,arguments)}function S(){return(S=_(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b(t)){e.next=2;break}return e.abrupt("return",y()(t));case 2:if(T(t)){e.next=4;break}return e.abrupt("return",o.a.createReadStream(t,n));case 4:return e.abrupt("return",new Promise(function(e,r){n=Object.assign({},new URL(t),{},n),(t.startsWith("https:")?l.a.request:u.a.request)(t,function(t){return e(t)})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return void 0===e&&(e={}),(e=Object.assign({},g,e)).responseType=e.responseType||e.dataType,o.a&&(e.encoding=e.encoding||("text"===e.dataType?"utf8":null)),e}}).call(this,n(360).Buffer)},527:function(e,t){},528:function(e,t){},529:function(e,t){},530:function(e,t){},531:function(e,t){},532:function(e,t){},533:function(e,t){},534:function(e,t){},535:function(e,t){},538:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return a});"object"!=typeof e||"[object process]"!==String(e)||e.browser;var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r&&r},a=i.global||i.self||i.window}).call(this,n(309),n(97))},568:function(e,t,n){"use strict";n(289),n(39),n(2);var r=n(292),i=n.n(r),a=(n(293),n(538));n(463);function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}a.a._parseImageNode;function u(e,t){return c.apply(this,arguments)}function c(){return(c=s(i.a.mark(function e(t,n){var r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\.svg((\?|#).*)?$/.test(t)){e.next=10;break}return e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,a.text();case 6:o=e.sent,r="data:image/svg+xml;base64,"+btoa(o),e.next=13;break;case 10:return e.next=12,t;case 12:r=e.sent;case 13:return e.next=15,new Promise(function(e,i){try{var a=new Image;a.onload=function(){return e(a)},a.onerror=function(e){return i(new Error("Could not load image "+t+": "+e))},a.crossOrigin=n&&n.crossOrigin||"anonymous",a.src=r}catch(o){i(o)}});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"a",function(){return h});var l=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],h={extensions:l,loadAndParse:u}}}]);