(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{197:function(e,t,n){"use strict";n.r(t);var r,i=n(2),o=n.n(i),s=n(0),a=n.n(s),u=n(336),c=(n(78),n(288),n(80),n(31),n(11),n(7),n(82),n(30),n(212)),f=n.n(c),l=(n(220),n(16)),h=n.n(l),g=n(221),d=n.n(g),p=n(356),m=n(339),v=n.n(m),b=n(203),y=n(352),_=n(353),w=n(342),x=n(354),A=n(245),E=((r={})[v.a.TEXTURE_CUBE_MAP_POSITIVE_X]="right",r[v.a.TEXTURE_CUBE_MAP_NEGATIVE_X]="left",r[v.a.TEXTURE_CUBE_MAP_POSITIVE_Y]="top",r[v.a.TEXTURE_CUBE_MAP_NEGATIVE_Y]="bottom",r[v.a.TEXTURE_CUBE_MAP_POSITIVE_Z]="front",r[v.a.TEXTURE_CUBE_MAP_NEGATIVE_Z]="back",r),S="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/",T="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/",B=T+"model-index.json",O="DamagedHelmet/glTF-Binary/DamagedHelmet.glb";var L={default:{directionalLights:[{color:[255,255,255],direction:[0,.5,.5],intensity:1}]},ambient:{ambientLight:{color:[255,255,255],intensity:1}},directional1:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},directional3:{directionalLights:[{color:[255,0,0],direction:[1,0,0],intensity:1},{color:[0,0,255],direction:[0,0,1],intensity:1},{color:[0,255,0],direction:[0,1,0],intensity:1}]},point1far:{pointLights:[{color:[255,0,0],position:[200,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}},point1near:{pointLights:[{color:[255,0,0],position:[10,0,0],attenuation:[0,0,.01],intensity:1}],ambientLight:{color:[255,255,255],intensity:1}}},j={pbrDebug:!0,imageBasedLightingEnvironment:null,lights:!1};function U(e,t,n){return C.apply(this,arguments)}function C(){return(C=d()(f.a.mark(function e(t,n,r){var i,o,s,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(t,y.a,Object.assign({},r,{gl:n}));case 2:return i=e.sent,o=i.gltf,s=i.scenes,a=i.animator,s[0].traverse(function(e,t){t.worldMatrix;return b.A.info(4,"Using model: ",e)()}),e.abrupt("return",{scenes:s,animator:a,gltf:o});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R=function(e){function t(t){var n,r=void 0===t?{}:t,i=r.modelFile,o=void 0===i?null:i,s=r.initialZoom,a=void 0===s?2:s;return(n=e.call(this)||this).scenes=[],n.animator=null,n.gl=null,n.modelFile=o,n.glOptions={webgl2:!0,alpha:!1},n.mouse={lastX:0,lastY:0},n.translate=a,n.rotation=[0,0],n.rotationStart=[0,0],n.u_ScaleDiffBaseMR=[0,0,0,0],n.u_ScaleFGDSpec=[0,0,0,0],n.onInitialize=n.onInitialize.bind(h()(n)),n.onRender=n.onRender.bind(h()(n)),n}o()(t,e),t.getInfo=function(){return'\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Model<br/>\n  <select id="modelSelector" style="border: 1px solid gray;">\n    <option value="DamagedHelmet/glTF-Binary/DamagedHelmet.glb">Default</option>\n  </select>\n  <br>\n</div>\n<div>\n  Show<br/>\n  <select id="showSelector" style="border: 1px solid gray;">\n    <option value="0 0 0 0 0 0 0 0">Final Result</option>\n\n    <option value="0 1 0 0 0 0 0 0">Base Color</option>\n    <option value="0 0 1 0 0 0 0 0">Metallic</option>\n    <option value="0 0 0 1 0 0 0 0">Roughness</option>\n    <option value="1 0 0 0 0 0 0 0">Diffuse</option>\n\n    <option value="0 0 0 0 1 0 0 0">Specular Reflection</option>\n    <option value="0 0 0 0 0 1 0 0">Geometric Occlusion</option>\n    <option value="0 0 0 0 0 0 1 0">Microfacet Distribution</option>\n    <option value="0 0 0 0 0 0 0 1">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights<br/>\n  <select id="lightSelector" style="border: 1px solid gray;">\n    <option value="default">Default</option>\n    <option value="ambient">Ambient Only</option>\n    <option value="directional1">1x Directional (Red) + Ambient</option>\n    <option value="directional3">3x Directional (RGB)</option>\n    <option value="point1far">1x Point Light Far (Red) + Ambient</option>\n    <option value="point1near">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light<br/>\n  <select id="iblSelector" style="border: 1px solid gray;">\n    <option value="exclusive">On (Exclusive)</option>\n    <option value="addition">On (Addition to Regular)</option>\n    <option value="off">Off (Only Regular)</option>\n  </select>\n  <br/>\n</div>\n<p><img src="https://img.shields.io/badge/WebVR-Supported-orange.svg" /></p>\n'};var n=t.prototype;return n.initializeEventHandling=function(e){var t=this;e.onwheel=function(e){t.translate+=e.deltaY/10,t.translate<.5&&(t.translate=.5),e.preventDefault()},e.onpointerdown=function(n){t.mouse.lastX=n.clientX,t.mouse.lastY=n.clientY,t.rotationStart[0]=t.rotation[0],t.rotationStart[1]=t.rotation[1],e.setPointerCapture(n.pointerId),n.preventDefault()},e.onpointermove=function(e){if(e.buttons){var n=e.clientX-t.mouse.lastX,r=e.clientY-t.mouse.lastY;t.rotation[0]=t.rotationStart[0]+r/100,t.rotation[1]=t.rotationStart[1]+n/100}},e.ondragover=function(e){e.dataTransfer.dropEffect="link",e.preventDefault()},e.ondrop=function(e){(e.preventDefault(),e.dataTransfer.files&&1===e.dataTransfer.files.length)&&(t._deleteScenes(),U(new Promise(function(t){var n=new window.FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e.dataTransfer.files[0])}),t.gl,t.loadOptions).then(function(e){return Object.assign(t,e)}))}},n.onInitialize=function(e){var t=this,n=e.gl,r=e.canvas;if(Object(b.I)(n,{depthTest:!0,blend:!1}),this.loadOptions=Object.assign({},j),this.environment=new _.a(n,{brdfLutUrl:S+"/brdfLUT.png",getTexUrl:function(e,t,n){return S+"/papermill/"+e+"/"+e+"_"+E[t]+"_"+n+".jpg"}}),this.loadOptions.imageBasedLightingEnvironment=this.environment,this.gl=n,this.modelFile){U(this.modelFile,this.gl,{pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0}).then(function(e){return Object.assign(t,e)})}else{var i=document.getElementById("modelSelector"),o=i&&i.value||O;U(T+o,this.gl,this.loadOptions).then(function(e){return Object.assign(t,e)}),i&&(i.onchange=function(e){t._deleteScenes();var n=i&&i.value||O;U(T+n,t.gl,t.loadOptions).then(function(e){return Object.assign(t,e)})}),window.fetch(B).then(function(e){return e.json()}).then(function(e){return function(e,t){if(t){var n=["glTF-Binary","glTF-Embedded","glTF"];e.forEach(function(e){var r=e.name,i=e.variants,o=n.find(function(e){return i[e]}),s=document.createElement("option");s.text=r+" ("+o+")",s.value=r+"/"+o+"/"+i[o],t.appendChild(s)})}}(e,i)})}var s=document.getElementById("showSelector");s&&(s.onchange=function(e){var n=s.value.split(" ").map(function(e){return parseFloat(e)});t.u_ScaleDiffBaseMR=n.slice(0,4),t.u_ScaleFGDSpec=n.slice(4)});var a=document.getElementById("lightSelector");a&&(a.onchange=function(e){t.light=a.value});var u=document.getElementById("iblSelector");u&&(u.onchange=function(e){t._updateLightSettings(u.value),t._rebuildModel()}),this.initializeEventHandling(r)},n._updateLightSettings=function(e){switch(e){case"exclusive":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!1});break;case"addition":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:this.environment,lights:!0});break;case"off":Object.assign(this.loadOptions,{imageBasedLightingEnvironment:null,lights:!0})}},n._rebuildModel=function(){(this.gltf.meshes||[]).forEach(function(e){return delete e._mesh}),(this.gltf.nodes||[]).forEach(function(e){return delete e._node}),(this.gltf.bufferViews||[]).forEach(function(e){return delete e.lumaBuffers}),this._deleteScenes(),Object.assign(this,Object(w.a)(this.gl,this.gltf,this.loadOptions))},n._deleteScenes=function(){this.scenes.forEach(function(e){return e.delete()}),this.scenes=[],b.B.get("Resource Counts").forEach(function(e){var t=e.name,n=e.count;b.A.info(3,t+": "+n)()})},n.applyLight=function(e){e.updateModuleSettings({lightSources:L[this.light||"default"]})},n.onRender=function(e){var t=this,n=e.gl,r=e.time,i=e.aspect,o=e.viewMatrix,s=e.projectionMatrix;Object(b.s)(n,{color:[.2,.2,.2,1],depth:!0});var a=this.rotation,u=a[0],c=a[1],f=[-this.translate*Math.sin(c)*Math.cos(-u),-this.translate*Math.sin(-u),this.translate*Math.cos(c)*Math.cos(-u)],l=new x.a(o?Array.from(o):null).translate([0,0,-this.translate]).rotateX(u).rotateY(c),h=s?new x.a(Array.from(s)):(new x.a).perspective({fov:Object(A.e)(40),aspect:i,near:.1,far:9e3});if(!this.scenes.length)return!1;this.animator&&this.animator.animate(r);var g=!0;return this.scenes[0].traverse(function(e,n){var r=n.worldMatrix,i=new x.a(h).multiplyRight(l).multiplyRight(r);t.applyLight(e),g=g&&e.draw({uniforms:{u_Camera:f,u_MVPMatrix:i,u_ModelMatrix:r,u_NormalMatrix:new x.a(r).invert().transpose(),u_ScaleDiffBaseMR:t.u_ScaleDiffBaseMR,u_ScaleFGDSpec:t.u_ScaleFGDSpec},parameters:e.props.parameters})}),g},t}(b.b);if("undefined"!=typeof window&&!window.website){var k=new R;k.start();var M=document.createElement("div");M.innerHTML=k.getInfo(),document.body.appendChild(M)}n.d(t,"default",function(){return P});var P=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){return a.a.createElement(u.a,{AnimationLoop:R})},t}(a.a.Component)},336:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});n(30);var r=n(2),i=n.n(r),o=n(0),s=n.n(o),a=n(3),u=n.n(a),c=n(203),f=n(359),l=n(351),h=n(337);void 0===e||e.navigator||(e.navigator={}),"undefined"!=typeof window&&(window.website=!0);var g={EXAMPLE_NOT_SUPPPORTED:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},d={position:"fixed",fontSize:"12px",zIndex:1e4,color:"#fff",background:"#000",padding:"8px",opacity:.8},p={example:u.a.object,canvas:u.a.string},m=function(e){function t(t){var n,r=(n=e.call(this,t)||this).props.AnimationLoop;return n.animationLoop=new r,n}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.showStats;this.animationLoop._setDisplay(new f.a);var t=this.props.path;if(t){Object(c.J)("https://raw.githubusercontent.com/uber/loaders.gl/master/"+t)}this.animationLoop.start(this.props),e&&this._showStats(this.animationLoop)},n.componentWillUnmount=function(){this.animationLoop.stop(this.props),this.animationLoop.delete(),this.animationLoop=null},n._showStats=function(e){var t=this,n=new l.a(e.stats,{container:this.refs.renderStats,title:"Render Time",css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"CPU Time":"averageTime","GPU Time":"averageTime","Frame Rate":"fps"},resetOnUpdate:{"CPU Time":!0,"GPU Time":!0,"Frame Rate":!0}});c.B.get("Memory Usage").reset();var r=new l.a(c.B.get("Memory Usage"),{container:this.refs.memStats,css:{header:{fontWeight:"bold"}},framesPerUpdate:60,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"}});this.animationFrame=window.requestAnimationFrame(function e(){n.update(),r.update(),t.animationFrame=window.requestAnimationFrame(e)})},n._stopStats=function(){window.cancelAnimationFrame(this.animationFrame)},n.render=function(){var e=this.props,t=e.name,n=e.panel,r=void 0===n||n,i=e.stats,o=e.sourceLink;if(this.animationLoop.isSupported&&!this.animationLoop.isSupported()){var a=this.animationLoop.getAltText?this.animationLoop.getAltText():"THIS EXAMPLE IS NOT SUPPORTED";return s.a.createElement("div",{style:g.EXAMPLE_NOT_SUPPPORTED},s.a.createElement("h2",null," ",a," "))}var u=this.props.AnimationLoop.getInfo()||this.animationLoop.getInfo&&this.animationLoop.getInfo();return s.a.createElement("div",{className:"fg",style:{width:"100%",height:"100%",padding:0,border:0}},i?s.a.createElement("div",{ref:"stats",className:"stats",style:d},s.a.createElement("div",{ref:"renderStats",className:"renderStats"}),s.a.createElement("div",{ref:"memStats",className:"memStats"})):null,s.a.createElement("canvas",{id:this.props.canvas,style:{width:"100%",height:"100%",padding:0,border:0}}),r?s.a.createElement(h.a,{name:t,controls:u,sourceLink:o}):null)},t}(o.Component);m.propTypes=p,m.defaultProps={canvas:"example-canvas"},m.displayName="AnimationLoop"}).call(this,n(77))},337:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(30);var r=n(2),i=n.n(r),o=n(0),s=n.n(o),a=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.controls,r=e.sourceLink;return s.a.createElement("div",{className:"options-panel top-right",tabIndex:"0"},s.a.createElement("h3",null,t),s.a.createElement("div",{className:"control-panel",dangerouslySetInnerHTML:{__html:n}}),r&&s.a.createElement("div",{className:"source-link"},s.a.createElement("a",{href:r,target:"_new"},"View Code ↗")))},t}(o.PureComponent)},355:function(e,t,n){"use strict";n(205),n(214),n(75),n(76),n(31),n(19),n(14),n(11),n(78),n(82),n(7);var r=n(212),i=n.n(r),o=(n(220),n(221)),s=n.n(o),a=n(343),u=n(278),c=(n(216),n(225),n(222),n(229),n(230),n(254)),f={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},l={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function g(e,t,n){n&&(e=function(e,t){for(var n=e.byteLength-t,r=new ArrayBuffer(n),i=new Uint8Array(e),o=new Uint8Array(r),s=0;s<n;s++)o[s]=i[t+s];return r}(e,n));for(var r=t.bufferViews||[],i=0;i<r.length;++i){var o=r[i];Object(c.a)(o.byteLength>=0)}return{accessors:d(e,r,t),images:p(e,r,t)}}function d(e,t,n){for(var r=n.accessors||[],i=[],o=0;o<r.length;++o){var s=r[o];Object(c.a)(s);var a=t[s.bufferView];if(a){var u=m(s,a),f=u.ArrayType,l=u.length,h=new f(e,a.byteOffset,l);h.accessor=s,i.push(h)}}return i}function p(e,t,n){for(var r=n.images||[],i=[],o=0;o<r.length;++o){var s=r[o];Object(c.a)(s);var a=t[s.bufferView];Object(c.a)(a);var u=new Uint8Array(e,a.byteOffset,a.byteLength);u.imate=s,i.push(u)}return i}function m(e,t){var n=h[e.componentType],r=f[e.type],i=l[e.componentType],o=e.count*r,s=e.count*r*i;return Object(c.a)(s>=0&&s<=t.byteLength),{ArrayType:n,length:o,byteLength:s}}n(79);function v(e,t,n){return void 0===n&&(n={}),function e(t,n,r,i){void 0===i&&(i={});var o=t;var s=function(e,t){var n=function(e){if("string"==typeof e){if(0===e.indexOf("##/"))return e.slice(1);var t=e.match(/#\/([a-z]+)\/([0-9]+)/);if(t){var n=parseInt(t[2],10);return[t[1],n]}if(t=e.match(/\$\$\$([0-9]+)/)){var r=parseInt(t[1],10);return["accessors",r]}}return null}(e);if(n){var r=n[0],i=n[1],o=t[r]&&t[r][i];if(o)return o;console.error("Invalid JSON pointer "+e+": #/"+r+"/"+i)}return null}(o,r);if(s)return s;if(Array.isArray(o))return o.map(function(t){return e(t,n,r,i)});if(null!==o&&"object"==typeof o){var a={};for(var u in o)a[u]=e(o[u],n,r,i);return a}return o}(e,e,t,n)}var b=n(328),y=1735152710,_=12,w=8,x=1313821514,A=5130562,E=!0,S=!1;function T(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r={});var i=new DataView(t);e.byteOffset=n,e.magic=i.getUint32(n+0,S),e.version=i.getUint32(n+4,E),e.byteLength=i.getUint32(n+8,E),e.type=function(e){return""+String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3))}(i);var o=r.magic,s=void 0===o?y:o;e.magic===y||e.magic===s||console.warn("Invalid GLB magic string "+e.type),Object(c.a)(2===e.version,"Invalid GLB version "+e.version+". Only .glb v2 supported"),Object(c.a)(e.byteLength>20),e.jsonChunkLength=i.getUint32(n+12,E),e.jsonChunkFormat=i.getUint32(n+16,E);var a=e.jsonChunkFormat===x||0===e.jsonChunkFormat;Object(c.a)(a,"JSON chunk format "+e.jsonChunkFormat),e.jsonChunkByteOffset=_+w;var f=new Uint8Array(t,n+e.jsonChunkByteOffset,e.jsonChunkLength),l=new u.TextDecoder("utf8").decode(f);e.json=JSON.parse(l);var h=e.jsonChunkByteOffset+Object(b.b)(e.jsonChunkLength);if(e.hasBinChunk=h+8<=e.byteLength,e.binChunkByteOffset=0,e.binChunkLength=0,e.hasBinChunk){e.binChunkLength=i.getUint32(n+h+0,E),e.binChunkFormat=i.getUint32(n+h+4,E);var g=e.binChunkFormat===A||1===e.binChunkFormat;Object(c.a)(g,"BIN chunk format "+e.binChunkFormat),e.binChunkByteOffset=h+w}return n+e.byteLength}n(255);var B=["SCALAR","VEC2","VEC3","VEC4"],O=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]);function L(e){return B[e-1]||B[0]}function j(e){var t=O.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}var U={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},R={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k=function(){function e(){}e.isGLB=function(e,t){void 0===t&&(t={});return function(e,t,n){void 0===t&&(t=0),void 0===n&&(n={});var r=n.magic,i=void 0===r?y:r,o=e.getUint32(t,!1);return o===i||o===y}(new DataView(e),0)};var t=e.prototype;return t.parse=function(e,t){return void 0===t&&(t={}),this.parseSync(e,t)},t.parseSync=function(e,t){if(void 0===t&&(t={}),this.glbArrayBuffer=e,this.binaryByteOffset=null,this.packedJson=null,this.json=null,null===this.json&&null===this.binaryByteOffset){T(this,this.glbArrayBuffer,0,t),this.binaryByteOffset=this.binChunkByteOffset,this.packedJson=this.json,this.unpackedBuffers=g(this.glbArrayBuffer,this.json,this.binaryByteOffset),this.json=v(this.json,this.unpackedBuffers)}return this},t.getApplicationData=function(e){return this.json[e]},t.getJSON=function(){return this.json},t.getArrayBuffer=function(){return this.glbArrayBuffer},t.getBinaryByteOffset=function(){return this.binaryByteOffset},t.getBufferView=function(e){var t=(e.byteOffset||0)+this.binaryByteOffset;return new Uint8Array(this.glbArrayBuffer,t,e.byteLength)},t.getBuffer=function(e){var t=R[e.componentType],n=U[e.type],r=C[e.componentType],i=e.count*n,o=e.count*n*r,s=this.json.bufferViews[e.bufferView];!function(e,t){if(!e)throw new Error(t||"gltf/glb assertion failed.")}(o>=0&&e.byteOffset+o<=s.byteLength);var a=s.byteOffset+this.binaryByteOffset+e.byteOffset;return new t(this.glbArrayBuffer,a,i)},t.getImageData=function(e){return{typedArray:this.getBufferView(e.bufferView),mimeType:e.mimeType||"image/jpeg"}},t.getImage=function(e){var t=this.getBufferView(e.bufferView),n=e.mimeType||"image/jpeg",r=new Blob([t],{type:n}),i=(self.URL||self.webkitURL).createObjectURL(r),o=new Image;return o.src=i,o},t.getImageAsync=function(e){var t=this;return new Promise(function(n){var r=t.getBufferView(e.bufferView),i=e.mimeType||"image/jpeg",o=new Blob([r],{type:i}),s=(self.URL||self.webkitURL).createObjectURL(o),a=new Image;a.onload=function(){return n(a)},a.src=s})},e}();n(219);function M(e,t){return e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:")?e:t.substr(0,t.lastIndexOf("/")+1)+e}var P={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},V={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},I={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243};var F=function(){function e(){}var t=e.prototype;return t.postProcess=function(e,t,n){return void 0===n&&(n={}),this.gltf=e,this.glbParser=t,this._resolveToTree(n),this.gltf},t._resolveToTree=function(e){var t=this;void 0===e&&(e={});var n=this.gltf;return(n.bufferViews||[]).forEach(function(e,n){return t._resolveBufferView(e,n)}),(n.images||[]).forEach(function(n,r){return t._resolveImage(n,r,e)}),(n.samplers||[]).forEach(function(e,n){return t._resolveSampler(e,n)}),(n.textures||[]).forEach(function(e,n){return t._resolveTexture(e,n)}),(n.accessors||[]).forEach(function(e,n){return t._resolveAccessor(e,n)}),(n.materials||[]).forEach(function(e,n){return t._resolveMaterial(e,n)}),(n.meshes||[]).forEach(function(e,n){return t._resolveMesh(e,n)}),(n.nodes||[]).forEach(function(e,n){return t._resolveNode(e,n)}),(n.skins||[]).forEach(function(e,n){return t._resolveSkin(e,n)}),(n.scenes||[]).forEach(function(e,n){return t._resolveScene(e,n)}),void 0!==n.scene&&(n.scene=n.scenes[this.gltf.scene]),this._process_extension_KHR_lights_punctual(),n},t.getScene=function(e){return this._get("scenes",e)},t.getNode=function(e){return this._get("nodes",e)},t.getSkin=function(e){return this._get("skins",e)},t.getMesh=function(e){return this._get("meshes",e)},t.getMaterial=function(e){return this._get("materials",e)},t.getAccessor=function(e){return this._get("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this._get("textures",e)},t.getSampler=function(e){return this._get("samplers",e)},t.getImage=function(e){return this._get("images",e)},t.getBufferView=function(e){return this._get("bufferViews",e)},t.getBuffer=function(e){return this._get("buffers",e)},t._get=function(e,t){if("object"==typeof t)return t;var n=this.gltf[e]&&this.gltf[e][t];return n||console.warn("glTF file error: Could not find "+e+"["+t+"]"),n},t._resolveScene=function(e,t){var n=this;e.id="scene-"+t,e.nodes=(e.nodes||[]).map(function(e){return n.getNode(e)})},t._resolveNode=function(e,t){var n=this;e.id="node-"+t,e.children=(e.children||[]).map(function(e){return n.getNode(e)}),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin))},t._resolveSkin=function(e,t){e.id="skin-"+t,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices)},t._resolveMesh=function(e,t){e.id="mesh-"+t;var n=e.primitives,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var s=o;for(var a in s.attributes)s.attributes[a]=this.getAccessor(s.attributes[a]);void 0!==s.indices&&(s.indices=this.getAccessor(s.indices)),void 0!==s.material&&(s.material=this.getMaterial(s.material))}},t._resolveMaterial=function(e,t){if(e.id="material-"+t,e.normalTexture&&(e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){var n=e.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}},t._resolveAccessor=function(e,t){e.id="accessor-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=V[e],e.components=P[e],e.bytesPerElement=e.bytesPerComponent*e.components},t._resolveTexture=function(e,t){e.id="texture-"+t,e.sampler=this.getSampler(e.sampler),e.source=this.getImage(e.source)},t._resolveSampler=function(e,t){for(var n in e.id="sampler-"+t,e.parameters={},e){var r=this._enumSamplerParameter(n);void 0!==r&&(e.parameters[r]=e[n])}},t._enumSamplerParameter=function(e){return I[e]},t._resolveImage=function(e,t,n){var r=this;e.id="image-"+t,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var i=n.createImages;void 0===i||i?e.image=this.glbParser.getImage(e):e.getImageAsync=function(){return r.glbParser?r.glbParser.getImageAsync(e):e.uri?new Promise(function(t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.src=M(e.uri,n.uri)}):null}},t._resolveBufferView=function(e,t){if(e.id="bufferView-"+t,e.buffer=this.getBuffer(e.buffer),this.glbParser)e.data=this.glbParser.getBufferView(e);else{var n=e.byteOffset||0;e.data=new Uint8Array(e.buffer.data,n,e.byteLength)}},t._resolveCamera=function(e){e.perspective,e.orthographic},t._process_extension_KHR_lights_punctual=function(){var e=this.gltf,t=e.extensions&&e.extensions.KHR_lights_punctual;t&&(e.lights=t.lights),this._removeExtension("KHR_lights_punctual");var n=e.nodes||[],r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var s=o,a=s.extensions&&s.extensions.KHR_lights_punctual;a&&(s.light=this._get("lights",a.light),delete s.extensions.KHR_lights_punctual)}delete e.lights},t._removeExtension=function(e){this.gltf.extensionsRequired&&this._removeStringFromArray(this.gltf.extensionsRequired,e),this.gltf.extensionsUsed&&this._removeStringFromArray(this.gltf.extensionsUsed,e),this.gltf.extensions&&delete this.gltf.extensions[e]},t._removeStringFromArray=function(e,t){for(var n=!0;n;){var r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}},e}();n(30);function D(e,t){var n=function(e,t){var n=e,r=1,i=0;e&&e.value&&(n=e.value,r=e.size||1);n&&(ArrayBuffer.isView(n)||(n=function(e,t,n){void 0===n&&(n=!1);if(!e)return null;if(Array.isArray(e))return new t(e);if(n&&!(e instanceof t))return new t(e);return e}(n,Float32Array)),i=n.length/r);return{buffer:n,size:r,count:i}}(e),r=n.buffer,i=n.size;return{value:r,size:i,bufferView:null,byteOffset:0,count:n.count,type:L(i),componentType:j(r)}}var N={fetchLinkedResources:!0,fetch:a.a,decompress:!1,DracoLoader:null,postProcess:!0,createImages:!1,log:console},H=function(){function e(){}var t=e.prototype;return t.parse=function(){var e=s()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),n=Object.assign({},N,n),this.parseSync(t,Object.assign({},n,{postProcess:!1,decompress:!1})),!n.fetchLinkedResources){e.next=6;break}return e.next=6,this._loadLinkedAssets(n);case 6:return n.decompress&&this._decompressMeshes(n),n.postProcess&&(new F).postProcess(this.gltf,this.glbParser,n),e.abrupt("return",this.gltf);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.parseSync=function(e,t){(void 0===t&&(t={}),t=Object.assign({},N,t),e instanceof ArrayBuffer&&!k.isGLB(e,t))&&(e=(new u.TextDecoder).decode(e));("string"==typeof e&&(e=JSON.parse(e)),e instanceof ArrayBuffer?(this.glbParser=new k,this.gltf=this.glbParser.parseSync(e).json,this.json=this.gltf):(this.glbParser=null,this.gltf=e,this.json=e),t.decompress&&this._decompressMeshes(t),t.postProcess)&&(new F).postProcess(this.gltf,this.glbParser,t);return this.gltf},t.getApplicationData=function(e){return this.json[e]},t.getExtraData=function(e){return(this.json.extras||{})[e]},t.getExtension=function(e){var t=this.getUsedExtensions().find(function(t){return t===e}),n=this.json.extensions||{};return t?n[e]||!0:null},t.getRequiredExtension=function(e){return this.getRequiredExtensions().find(function(t){return t===e})?this.getExtension(e):null},t.getRequiredExtensions=function(){return this.json.extensionsRequired||[]},t.getUsedExtensions=function(){return this.json.extensionsUsed||[]},t.getScene=function(e){return this._get("scenes",e)},t.getNode=function(e){return this._get("nodes",e)},t.getSkin=function(e){return this._get("skins",e)},t.getMesh=function(e){return this._get("meshes",e)},t.getMaterial=function(e){return this._get("materials",e)},t.getAccessor=function(e){return this._get("accessors",e)},t.getCamera=function(e){return null},t.getTexture=function(e){return this._get("textures",e)},t.getSampler=function(e){return this._get("samplers",e)},t.getImage=function(e){return this._get("images",e)},t.getBufferView=function(e){return this._get("bufferViews",e)},t.getBuffer=function(e){return this._get("buffers",e)},t._get=function(e,t){if("object"==typeof t)return t;var n=this.gltf[e]&&this.gltf[e][t];return n||console.warn("glTF file error: Could not find "+e+"["+t+"]"),n},t._loadLinkedAssets=function(){var e=s()(i.a.mark(function e(t){var n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.gltf.buffers.map(function(e){return n._loadBuffer(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._loadBuffer=function(){var e=s()(i.a.mark(function e(t,n){var r,o,s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.uri){e.next=11;break}return r=n.fetch||window.fetch,o=M(t.uri,n.uri),e.next=5,r(o);case 5:return s=e.sent,e.next=8,s.arrayBuffer();case 8:a=e.sent,t.data=a,t.uri=null;case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),t._decompressMeshes=function(e){if(e.DracoLoader&&e.decompress){var t=this.gltf.meshes||[],n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i.primitives,s=Array.isArray(o),a=0;for(o=s?o:o[Symbol.iterator]();;){var u;if(s){if(a>=o.length)break;u=o[a++]}else{if((a=o.next()).done)break;u=a.value}var c=u;if(this._decompressKhronosDracoPrimitive(c,e),this._decompressUberDracoPrimitive(c,e),!c.attributes||0===Object.keys(c.attributes).length)throw new Error("Empty glTF primitive: decompression failure?")}}this._removeExtension("KHR_draco_mesh_compression"),this._removeExtension("UBER_draco_point_cloud_compression")}},t._decompressKhronosDracoPrimitive=function(e,t){var n=e.extensions&&e.extensions.KHR_draco_mesh_compression;if(n){delete e.extensions.KHR_draco_mesh_compression;var r=this._getBufferViewArray(n.bufferView),i=t.DracoLoader.parseSync(r);e.attributes=function(e){var t={};for(var n in e){var r=e[n];if("indices"!==n){var i=D(r);t[n]=i}}return t}(i.attributes),i.indices&&(e.indices=D(i.indices))}},t._decompressUberDracoPrimitive=function(e,t){var n=e.extensions&&e.extensions.UBER_draco_point_cloud_compression;if(n){if(0!==e.mode)throw new Error("UBER_draco_point_cloud_compression");delete e.extensions.UBER_draco_point_cloud_compression;var r=this._getBufferViewArray(n.bufferView),i=t.DracoLoader.parseSync(r);e.attributes=i.attributes}},t._getBufferViewArray=function(e){var t=this.gltf.bufferViews[e];if(this.glbParser)return this.glbParser.getBufferView(t);var n=this.gltf.buffers[t.buffer].data,r=t.byteOffset||0;return new Uint8Array(n,r,t.byteLength)},t._removeExtension=function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]},t._removeStringFromArray=function(e,t){for(var n=!0;n;){var r=e.indexOf(t);r>-1?e.splice(r,1):n=!1}},e}();t.a={name:"glTF",extension:["gltf","glb"],text:!0,binary:!0,parse:function(e,t){return void 0===t&&(t={}),(new H).parse(e,t)},parseSync:function(e,t){return void 0===t&&(t={}),(new H).parseSync(e,t)}}}}]);
//# sourceMappingURL=component---templates-example-gltf-jsx-09c6310dac404c64e70c.js.map